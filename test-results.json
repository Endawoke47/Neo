{
  "total": 10,
  "passed": 1,
  "failed": 9,
  "duration": 127331,
  "details": [
    {
      "name": "API TypeScript",
      "success": false,
      "error": "Command failed: npx tsc --noEmit",
      "duration": 0
    },
    {
      "name": "Web TypeScript",
      "success": false,
      "error": "Command failed: npx tsc --noEmit",
      "duration": 0
    },
    {
      "name": "API Lint",
      "success": false,
      "error": "Command failed: npm run lint\n\nOops! Something went wrong! :(\n\nESLint: 8.57.1\n\nESLint couldn't find a configuration file. To set up a configuration file for this project, please run:\n\n    npm init @eslint/config\n\nESLint looked for configuration files in /home/adel__ndawoke/Neo/apps/api/src/config and its ancestors. If it found none, it then looked in your home directory.\n\nIf you think you already have a configuration file or if you need more help, please stop by the ESLint Discord server: https://eslint.org/chat\n\nnpm error Lifecycle script `lint` failed with error:\nnpm error code 2\nnpm error path /home/adel__ndawoke/Neo/apps/api\nnpm error workspace @counselflow/api@1.0.0\nnpm error location /home/adel__ndawoke/Neo/apps/api\nnpm error command failed\nnpm error command sh -c eslint src/**/*.ts\n",
      "duration": 0
    },
    {
      "name": "Web Lint",
      "success": true,
      "output": "\n> @counselflow/web@1.0.0 lint\n> next lint --fix\n\n? How would you like to configure ESLint? https://nextjs.org/docs/basic-features/eslint\n\u001b[?25l❯  Strict (recommended)\n   Base\n   Cancel",
      "duration": 791
    },
    {
      "name": "API Unit Tests",
      "success": false,
      "error": "Command failed: npm test -- --testPathPattern=\"test/.*\\.test\\.(ts|js)$\" --coverage\n● Validation Warning:\n\n  Unknown option \"moduleNameMapping\" with value {\"^@/(.*)$\": \"<rootDir>/src/$1\", \"^@commands/(.*)$\": \"<rootDir>/src/commands/$1\", \"^@config/(.*)$\": \"<rootDir>/src/config/$1\", \"^@core/(.*)$\": \"<rootDir>/src/core/$1\", \"^@middleware/(.*)$\": \"<rootDir>/src/middleware/$1\", \"^@utils/(.*)$\": \"<rootDir>/src/utils/$1\"} was found.\n  This is probably a typing mistake. Fixing it will remove this message.\n\n  Configuration Documentation:\n  https://jestjs.io/docs/configuration\n\n● Validation Warning:\n\n  Unknown option \"moduleNameMapping\" with value {\"^@/(.*)$\": \"<rootDir>/src/$1\", \"^@commands/(.*)$\": \"<rootDir>/src/commands/$1\", \"^@config/(.*)$\": \"<rootDir>/src/config/$1\", \"^@core/(.*)$\": \"<rootDir>/src/core/$1\", \"^@middleware/(.*)$\": \"<rootDir>/src/middleware/$1\", \"^@utils/(.*)$\": \"<rootDir>/src/utils/$1\"} was found.\n  This is probably a typing mistake. Fixing it will remove this message.\n\n  Configuration Documentation:\n  https://jestjs.io/docs/configuration\n\nFAIL src/test/database.integration.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/document.routes.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/ai.routes.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/dispute.routes.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/contract.routes.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/matter.routes.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/client.routes.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/security.performance.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/middleware.integration.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/load.stress.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/api-endpoints.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/auth-secure.routes.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/integration.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/performance.benchmark.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/circuit-breaker.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/ai-routes.integration.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/policy-service.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/ai-service.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/command-bus.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/middleware/auth.middleware.ts\nERROR: \u001b[96msrc/middleware/auth.middleware.ts\u001b[0m:\u001b[93m42\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n\u001b[7m42\u001b[0m     const secret = process.env.JWT_SECRET;\n\u001b[7m  \u001b[0m \u001b[91m                               ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/auth.middleware.ts\u001b[0m:\u001b[93m49\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_AUDIENCE' comes from an index signature, so it must be accessed with ['JWT_AUDIENCE'].\n\n\u001b[7m49\u001b[0m       audience: process.env.JWT_AUDIENCE || 'counselflow-api',\n\u001b[7m  \u001b[0m \u001b[91m                            ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/auth.middleware.ts\u001b[0m:\u001b[93m50\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_ISSUER' comes from an index signature, so it must be accessed with ['JWT_ISSUER'].\n\n\u001b[7m50\u001b[0m       issuer: process.env.JWT_ISSUER || 'counselflow'\n\u001b[7m  \u001b[0m \u001b[91m                          ~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/controllers/integration.controller.ts\nERROR: \u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m8\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/common' or its corresponding type declarations.\n\n\u001b[7m16\u001b[0m } from '@nestjs/common';\n\u001b[7m  \u001b[0m \u001b[91m       ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m99\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/swagger' or its corresponding type declarations.\n\n\u001b[7m17\u001b[0m import { ApiTags, ApiOperation, ApiResponse, ApiParam, ApiQuery, ApiBearerAuth, ApiKeyAuth } from '@nestjs/swagger';\n\u001b[7m  \u001b[0m \u001b[91m                                                                                                  ~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../guards/jwt-auth.guard' or its corresponding type declarations.\n\n\u001b[7m21\u001b[0m import { JwtAuthGuard } from '../guards/jwt-auth.guard';\n\u001b[7m  \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m22\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'ApiKeyGuard' is declared but its value is never read.\n\n\u001b[7m22\u001b[0m import { ApiKeyGuard } from '../guards/api-key.guard';\n\u001b[7m  \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m22\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../guards/api-key.guard' or its corresponding type declarations.\n\n\u001b[7m22\u001b[0m import { ApiKeyGuard } from '../guards/api-key.guard';\n\u001b[7m  \u001b[0m \u001b[91m                            ~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m23\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../guards/roles.guard' or its corresponding type declarations.\n\n\u001b[7m23\u001b[0m import { RolesGuard } from '../guards/roles.guard';\n\u001b[7m  \u001b[0m \u001b[91m                           ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../decorators/roles.decorator' or its corresponding type declarations.\n\n\u001b[7m24\u001b[0m import { Roles } from '../decorators/roles.decorator';\n\u001b[7m  \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m27\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2564: \u001b[0mProperty 'name' has no initializer and is not definitely assigned in the constructor.\n\n\u001b[7m27\u001b[0m   name: string;\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m28\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2564: \u001b[0mProperty 'type' has no initializer and is not definitely assigned in the constructor.\n\n\u001b[7m28\u001b[0m   type: string;\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m29\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2564: \u001b[0mProperty 'endpoint' has no initializer and is not definitely assigned in the constructor.\n\n\u001b[7m29\u001b[0m   endpoint: string;\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m84\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2564: \u001b[0mProperty 'endpoint' has no initializer and is not definitely assigned in the constructor.\n\n\u001b[7m84\u001b[0m   endpoint: string;\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m92\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2564: \u001b[0mProperty 'name' has no initializer and is not definitely assigned in the constructor.\n\n\u001b[7m92\u001b[0m   name: string;\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m93\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2564: \u001b[0mProperty 'permissions' has no initializer and is not definitely assigned in the constructor.\n\n\u001b[7m93\u001b[0m   permissions: string[];\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m123\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6138: \u001b[0mProperty 'apiManagementService' is declared but its value is never read.\n\n\u001b[7m123\u001b[0m     private readonly apiManagementService: ApiManagementService,\n\u001b[7m   \u001b[0m \u001b[91m                     ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m159\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m159\u001b[0m         `Failed to retrieve integrations: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                            ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m211\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m211\u001b[0m         `Failed to create integration: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m243\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m243\u001b[0m       if (error.message.includes('not found')) {\n\u001b[7m   \u001b[0m \u001b[91m          ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m247\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m247\u001b[0m         `Failed to update integration: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m277\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m277\u001b[0m       if (error.message.includes('not found')) {\n\u001b[7m   \u001b[0m \u001b[91m          ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m281\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m281\u001b[0m         `Failed to delete integration: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m320\u001b[0m:\u001b[93m79\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2379: \u001b[0mArgument of type '{ method: \"GET\" | \"POST\" | undefined; payload: any; mapping: Record<string, string> | undefined; batchSize: number | undefined; }' is not assignable to parameter of type '{ method?: \"GET\" | \"POST\"; payload?: any; mapping?: Record<string, string>; batchSize?: number; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'method' are incompatible.\n    Type '\"GET\" | \"POST\" | undefined' is not assignable to type '\"GET\" | \"POST\"'.\n      Type 'undefined' is not assignable to type '\"GET\" | \"POST\"'.\n\n\u001b[7m320\u001b[0m       return await this.integrationService.syncData(id, syncDataDto.endpoint, {\n\u001b[7m   \u001b[0m \u001b[91m                                                                              ~\u001b[0m\n\u001b[7m321\u001b[0m         method: syncDataDto.method,\n\u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[7m...\u001b[0m \n\u001b[7m324\u001b[0m         batchSize: syncDataDto.batchSize,\n\u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[7m325\u001b[0m       });\n\u001b[7m   \u001b[0m \u001b[91m~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m328\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m328\u001b[0m         `Failed to sync data: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m363\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m363\u001b[0m         `Failed to check health: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m389\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m389\u001b[0m         `Failed to retrieve metrics: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m425\u001b[0m:\u001b[93m39\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m425\u001b[0m         `Failed to process webhook: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                      ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m486\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m486\u001b[0m         `Failed to create API key: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                     ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m526\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m526\u001b[0m         `Failed to update API key: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                     ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m553\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m553\u001b[0m         `Failed to revoke API key: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                     ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m622\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m622\u001b[0m         `Failed to retrieve metrics: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m642\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m642\u001b[0m         `Failed to check health: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m677\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m677\u001b[0m         `Failed to validate API key: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~\u001b[0m\n\u001b[96msrc/controllers/integration.controller.ts\u001b[0m:\u001b[93m692\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m692\u001b[0m   async getApiDocumentation(@Req() req: Request, @Res() res: Response) {\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/controllers/client-portal.controller.ts\nERROR: \u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m1\u001b[0m:\u001b[93m77\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'Request' is declared but its value is never read.\n\n\u001b[7m1\u001b[0m import { Controller, Get, Post, Put, Delete, Body, Param, Query, UseGuards, Request } from '@nestjs/common';\n\u001b[7m \u001b[0m \u001b[91m                                                                            ~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m1\u001b[0m:\u001b[93m92\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/common' or its corresponding type declarations.\n\n\u001b[7m1\u001b[0m import { Controller, Get, Post, Put, Delete, Body, Param, Query, UseGuards, Request } from '@nestjs/common';\n\u001b[7m \u001b[0m \u001b[91m                                                                                           ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m2\u001b[0m:\u001b[93m67\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/swagger' or its corresponding type declarations.\n\n\u001b[7m2\u001b[0m import { ApiTags, ApiOperation, ApiResponse, ApiBearerAuth } from '@nestjs/swagger';\n\u001b[7m \u001b[0m \u001b[91m                                                                  ~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m3\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../guards/jwt-auth.guard' or its corresponding type declarations.\n\n\u001b[7m3\u001b[0m import { JwtAuthGuard } from '../guards/jwt-auth.guard';\n\u001b[7m \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6138: \u001b[0mProperty 'securityService' is declared but its value is never read.\n\n\u001b[7m14\u001b[0m     private readonly securityService: SecurityService,\n\u001b[7m  \u001b[0m \u001b[91m                     ~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m57\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'threadId' is declared but its value is never read.\n\n\u001b[7m57\u001b[0m     @Param('threadId') threadId: string,\n\u001b[7m  \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m58\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'body' is declared but its value is never read.\n\n\u001b[7m58\u001b[0m     @Body() body: {\n\u001b[7m  \u001b[0m \u001b[91m            ~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m97\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'sessionId' is declared but its value is never read.\n\n\u001b[7m97\u001b[0m     @Param('sessionId') sessionId: string,\n\u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m98\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'body' is declared but its value is never read.\n\n\u001b[7m98\u001b[0m     @Body() body: {\n\u001b[7m  \u001b[0m \u001b[91m            ~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m113\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'sessionId' is declared but its value is never read.\n\n\u001b[7m113\u001b[0m     @Param('sessionId') sessionId: string,\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m114\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'body' is declared but its value is never read.\n\n\u001b[7m114\u001b[0m     @Body() body: {\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m144\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m144\u001b[0m   async getPaymentMethods(@Param('clientId') clientId: string) {\n\u001b[7m   \u001b[0m \u001b[91m                                             ~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m163\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'body' is declared but its value is never read.\n\n\u001b[7m163\u001b[0m     @Body() body: {\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m176\u001b[0m:\u001b[93m48\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'methodId' is declared but its value is never read.\n\n\u001b[7m176\u001b[0m   async removePaymentMethod(@Param('methodId') methodId: string) {\n\u001b[7m   \u001b[0m \u001b[91m                                               ~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m211\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m211\u001b[0m     @Param('clientId') clientId: string,\n\u001b[7m   \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m212\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'limit' is declared but its value is never read.\n\n\u001b[7m212\u001b[0m     @Query('limit') limit: string = '50',\n\u001b[7m   \u001b[0m \u001b[91m                    ~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m213\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'offset' is declared but its value is never read.\n\n\u001b[7m213\u001b[0m     @Query('offset') offset: string = '0',\n\u001b[7m   \u001b[0m \u001b[91m                     ~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m226\u001b[0m:\u001b[93m55\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'notificationId' is declared but its value is never read.\n\n\u001b[7m226\u001b[0m   async markNotificationRead(@Param('notificationId') notificationId: string) {\n\u001b[7m   \u001b[0m \u001b[91m                                                      ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m234\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'body' is declared but its value is never read.\n\n\u001b[7m234\u001b[0m   async markAllNotificationsRead(@Body() body: { clientId: string }) {\n\u001b[7m   \u001b[0m \u001b[91m                                         ~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m284\u001b[0m:\u001b[93m39\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m284\u001b[0m   async disable2FA(@Param('clientId') clientId: string) {\n\u001b[7m   \u001b[0m \u001b[91m                                      ~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m321\u001b[0m:\u001b[93m47\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'sessionId' is declared but its value is never read.\n\n\u001b[7m321\u001b[0m   async invalidateSession(@Param('sessionId') sessionId: string) {\n\u001b[7m   \u001b[0m \u001b[91m                                              ~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m365\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m365\u001b[0m   async getTrustedDevices(@Param('clientId') clientId: string) {\n\u001b[7m   \u001b[0m \u001b[91m                                             ~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m374\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m374\u001b[0m     @Param('clientId') clientId: string,\n\u001b[7m   \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m375\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'body' is declared but its value is never read.\n\n\u001b[7m375\u001b[0m     @Body() body: { deviceFingerprint: string; deviceName: string },\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~\u001b[0m\n\u001b[96msrc/controllers/client-portal.controller.ts\u001b[0m:\u001b[93m384\u001b[0m:\u001b[93m48\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'deviceId' is declared but its value is never read.\n\n\u001b[7m384\u001b[0m   async removeTrustedDevice(@Param('deviceId') deviceId: string) {\n\u001b[7m   \u001b[0m \u001b[91m                                               ~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/middleware/error.middleware.ts\nERROR: \u001b[96msrc/middleware/error.middleware.ts\u001b[0m:\u001b[93m59\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m 59\u001b[0m export const errorHandler = (\n\u001b[7m   \u001b[0m \u001b[91m                            ~\u001b[0m\n\u001b[7m 60\u001b[0m   err: CustomError,\n\u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[7m...\u001b[0m \n\u001b[7m 63\u001b[0m   _next: NextFunction\n\u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[7m 64\u001b[0m ) => {\n\u001b[7m   \u001b[0m \u001b[91m~~~~~~\u001b[0m\n\u001b[96msrc/middleware/error.middleware.ts\u001b[0m:\u001b[93m148\u001b[0m:\u001b[93m65\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'MAX_FILE_SIZE' does not exist on type '{ JWT_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_REFRESH_SECRET: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m148\u001b[0m       message: `File size exceeds the limit of ${Math.round(env.MAX_FILE_SIZE / 1024 / 1024)}MB`,\n\u001b[7m   \u001b[0m \u001b[91m                                                                ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/error.middleware.ts\u001b[0m:\u001b[93m206\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2412: \u001b[0mType 'string | undefined' is not assignable to type 'string' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the type of the target.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m206\u001b[0m   error.code = code;\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/controllers/ai-legal-assistant.controller.ts\nERROR: \u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m5\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'Put' is declared but its value is never read.\n\n\u001b[7m5\u001b[0m   Put,\n\u001b[7m \u001b[0m \u001b[91m  ~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m8\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/common' or its corresponding type declarations.\n\n\u001b[7m15\u001b[0m } from '@nestjs/common';\n\u001b[7m  \u001b[0m \u001b[91m       ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m87\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/swagger' or its corresponding type declarations.\n\n\u001b[7m16\u001b[0m import { ApiTags, ApiOperation, ApiResponse, ApiParam, ApiQuery, ApiBearerAuth } from '@nestjs/swagger';\n\u001b[7m  \u001b[0m \u001b[91m                                                                                      ~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/platform-express' or its corresponding type declarations.\n\n\u001b[7m17\u001b[0m import { FileInterceptor } from '@nestjs/platform-express';\n\u001b[7m  \u001b[0m \u001b[91m                                ~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../guards/jwt-auth.guard' or its corresponding type declarations.\n\n\u001b[7m19\u001b[0m import { JwtAuthGuard } from '../guards/jwt-auth.guard';\n\u001b[7m  \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../guards/roles.guard' or its corresponding type declarations.\n\n\u001b[7m20\u001b[0m import { RolesGuard } from '../guards/roles.guard';\n\u001b[7m  \u001b[0m \u001b[91m                           ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../decorators/roles.decorator' or its corresponding type declarations.\n\n\u001b[7m21\u001b[0m import { Roles } from '../decorators/roles.decorator';\n\u001b[7m  \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m22\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../decorators/current-user.decorator' or its corresponding type declarations.\n\n\u001b[7m22\u001b[0m import { CurrentUser } from '../decorators/current-user.decorator';\n\u001b[7m  \u001b[0m \u001b[91m                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2564: \u001b[0mProperty 'query' has no initializer and is not definitely assigned in the constructor.\n\n\u001b[7m25\u001b[0m   query: string;\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2564: \u001b[0mProperty 'category' has no initializer and is not definitely assigned in the constructor.\n\n\u001b[7m26\u001b[0m   category: string;\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m38\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2564: \u001b[0mProperty 'title' has no initializer and is not definitely assigned in the constructor.\n\n\u001b[7m38\u001b[0m   title: string;\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m39\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2564: \u001b[0mProperty 'description' has no initializer and is not definitely assigned in the constructor.\n\n\u001b[7m39\u001b[0m   description: string;\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m40\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2564: \u001b[0mProperty 'practiceArea' has no initializer and is not definitely assigned in the constructor.\n\n\u001b[7m40\u001b[0m   practiceArea: string;\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m41\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2564: \u001b[0mProperty 'jurisdiction' has no initializer and is not definitely assigned in the constructor.\n\n\u001b[7m41\u001b[0m   jurisdiction: string;\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m42\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2564: \u001b[0mProperty 'priority' has no initializer and is not definitely assigned in the constructor.\n\n\u001b[7m42\u001b[0m   priority: 'low' | 'medium' | 'high' | 'urgent';\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m49\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2564: \u001b[0mProperty 'documentType' has no initializer and is not definitely assigned in the constructor.\n\n\u001b[7m49\u001b[0m   documentType: string;\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m110\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m110\u001b[0m         `Failed to submit legal query: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m155\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m155\u001b[0m         `Failed to retrieve queries: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m202\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m202\u001b[0m         `Failed to retrieve query: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                     ~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m236\u001b[0m:\u001b[93m44\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m236\u001b[0m         `Failed to create research task: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                           ~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m290\u001b[0m:\u001b[93m47\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m290\u001b[0m         `Failed to retrieve research tasks: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                              ~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m337\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m337\u001b[0m         `Failed to retrieve research task: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                             ~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m385\u001b[0m:\u001b[93m44\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m385\u001b[0m         `Failed to cancel research task: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                           ~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m434\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2694: \u001b[0mNamespace 'global.Express' has no exported member 'Multer'.\n\n\u001b[7m434\u001b[0m     @UploadedFile() file: Express.Multer.File,\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m461\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m461\u001b[0m         `Failed to analyze document: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~\u001b[0m\n\u001b[96msrc/controllers/ai-legal-assistant.controller.ts\u001b[0m:\u001b[93m501\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m501\u001b[0m         `Failed to analyze document: ${error.message}`,\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/controllers/client.controller.ts\nERROR: \u001b[96msrc/controllers/client.controller.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'Request' is declared but its value is never read.\n\n\u001b[7m6\u001b[0m import { Request, Response } from 'express';\n\u001b[7m \u001b[0m \u001b[91m         ~~~~~~~\u001b[0m\n\u001b[96msrc/controllers/client.controller.ts\u001b[0m:\u001b[93m47\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m47\u001b[0m     const command = new UpdateClientCommand(id, updates, req.user!.id);\n\u001b[7m  \u001b[0m \u001b[91m                                            ~~\u001b[0m\n\u001b[96msrc/controllers/client.controller.ts\u001b[0m:\u001b[93m61\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m61\u001b[0m     const command = new DeleteClientCommand(id, req.user!.id);\n\u001b[7m  \u001b[0m \u001b[91m                                            ~~\u001b[0m\n\u001b[96msrc/controllers/client.controller.ts\u001b[0m:\u001b[93m76\u001b[0m:\u001b[93m53\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m76\u001b[0m     const command = new AssignClientToLawyerCommand(id, lawyerId, req.user!.id);\n\u001b[7m  \u001b[0m \u001b[91m                                                    ~~\u001b[0m\n\u001b[96msrc/controllers/client.controller.ts\u001b[0m:\u001b[93m90\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6198: \u001b[0mAll destructured elements are unused.\n\n\u001b[7m90\u001b[0m     const { page = 1, limit = 20, search, clientType, isActive } = req.query;\n\u001b[7m  \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/core/command-bus.ts\nERROR: \u001b[96msrc/core/command-bus.ts\u001b[0m:\u001b[93m125\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2511: \u001b[0mCannot create an instance of an abstract class.\n\n\u001b[7m125\u001b[0m       throw new BaseError(\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n\u001b[7m126\u001b[0m         `Command execution failed: ${error instanceof Error ? error.message : 'Unknown error'}`,\n\u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[7m...\u001b[0m \n\u001b[7m128\u001b[0m         { commandName, originalError: error }\n\u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[7m129\u001b[0m       );\n\u001b[7m   \u001b[0m \u001b[91m~~~~~~~\u001b[0m\n\u001b[96msrc/core/command-bus.ts\u001b[0m:\u001b[93m175\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'auditTrail' comes from an index signature, so it must be accessed with ['auditTrail'].\n\n\u001b[7m175\u001b[0m     context.metadata.auditTrail = {\n\u001b[7m   \u001b[0m \u001b[91m                     ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/core/command-bus.ts\u001b[0m:\u001b[93m186\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'performanceStart' comes from an index signature, so it must be accessed with ['performanceStart'].\n\n\u001b[7m186\u001b[0m     context.metadata.performanceStart = process.hrtime.bigint();\n\u001b[7m   \u001b[0m \u001b[91m                     ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/core/command-bus.ts\u001b[0m:\u001b[93m237\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'commandClass' is declared but its value is never read.\n\n\u001b[7m237\u001b[0m   static create<T extends ICommand>(commandClass: new (...args: any[]) => T): CommandBuilder<T> {\n\u001b[7m   \u001b[0m \u001b[91m                                    ~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/config/environment.ts\nERROR: \u001b[96msrc/config/environment.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 2, '(def: string): ZodDefault<ZodEffects<ZodString, number, string>>', gave the following error.\n    Argument of type 'number' is not assignable to parameter of type 'string'.\n  Overload 2 of 2, '(def: () => string): ZodDefault<ZodEffects<ZodString, number, string>>', gave the following error.\n    Argument of type 'number' is not assignable to parameter of type '() => string'.\n\n\u001b[7m13\u001b[0m   PORT: z.string().transform(Number).default(8000),\n\u001b[7m  \u001b[0m \u001b[91m                                             ~~~~\u001b[0m\n\n\u001b[96msrc/config/environment.ts\u001b[0m:\u001b[93m39\u001b[0m:\u001b[93m57\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 2, '(def: string): ZodDefault<ZodEffects<ZodString, number, string>>', gave the following error.\n    Argument of type 'number' is not assignable to parameter of type 'string'.\n  Overload 2 of 2, '(def: () => string): ZodDefault<ZodEffects<ZodString, number, string>>', gave the following error.\n    Argument of type 'number' is not assignable to parameter of type '() => string'.\n\n\u001b[7m39\u001b[0m   UPLOAD_MAX_SIZE: z.string().transform(Number).default(10485760), // 10MB\n\u001b[7m  \u001b[0m \u001b[91m                                                        ~~~~~~~~\u001b[0m\n\n\u001b[96msrc/config/environment.ts\u001b[0m:\u001b[93m44\u001b[0m:\u001b[93m62\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 2, '(def: string): ZodDefault<ZodEffects<ZodString, number, string>>', gave the following error.\n    Argument of type 'number' is not assignable to parameter of type 'string'.\n  Overload 2 of 2, '(def: () => string): ZodDefault<ZodEffects<ZodString, number, string>>', gave the following error.\n    Argument of type 'number' is not assignable to parameter of type '() => string'.\n\n\u001b[7m44\u001b[0m   RATE_LIMIT_WINDOW_MS: z.string().transform(Number).default(900000), // 15 minutes\n\u001b[7m  \u001b[0m \u001b[91m                                                             ~~~~~~\u001b[0m\n\n\u001b[96msrc/config/environment.ts\u001b[0m:\u001b[93m45\u001b[0m:\u001b[93m65\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 2, '(def: string): ZodDefault<ZodEffects<ZodString, number, string>>', gave the following error.\n    Argument of type 'number' is not assignable to parameter of type 'string'.\n  Overload 2 of 2, '(def: () => string): ZodDefault<ZodEffects<ZodString, number, string>>', gave the following error.\n    Argument of type 'number' is not assignable to parameter of type '() => string'.\n\n\u001b[7m45\u001b[0m   RATE_LIMIT_MAX_REQUESTS: z.string().transform(Number).default(100),\n\u001b[7m  \u001b[0m \u001b[91m                                                                ~~~\u001b[0m\n\n\u001b[96msrc/config/environment.ts\u001b[0m:\u001b[93m48\u001b[0m:\u001b[93m63\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 2, '(def: string): ZodDefault<ZodEffects<ZodString, boolean, string>>', gave the following error.\n    Argument of type 'boolean' is not assignable to parameter of type 'string'.\n  Overload 2 of 2, '(def: () => string): ZodDefault<ZodEffects<ZodString, boolean, string>>', gave the following error.\n    Argument of type 'boolean' is not assignable to parameter of type '() => string'.\n\n\u001b[7m48\u001b[0m   HEALTH_CHECK_ENABLED: z.string().transform(Boolean).default(true),\n\u001b[7m  \u001b[0m \u001b[91m                                                              ~~~~\u001b[0m\n\n\u001b[96msrc/config/environment.ts\u001b[0m:\u001b[93m49\u001b[0m:\u001b[93m58\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 2, '(def: string): ZodDefault<ZodEffects<ZodString, boolean, string>>', gave the following error.\n    Argument of type 'boolean' is not assignable to parameter of type 'string'.\n  Overload 2 of 2, '(def: () => string): ZodDefault<ZodEffects<ZodString, boolean, string>>', gave the following error.\n    Argument of type 'boolean' is not assignable to parameter of type '() => string'.\n\n\u001b[7m49\u001b[0m   METRICS_ENABLED: z.string().transform(Boolean).default(true),\n\u001b[7m  \u001b[0m \u001b[91m                                                         ~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/middleware/security.middleware.ts\nERROR: \u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m78\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'multer' or its corresponding type declarations.\n\n\u001b[7m78\u001b[0m import multer from 'multer';\n\u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m85\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m85\u001b[0m     destination: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                  ~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m85\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'req' implicitly has an 'any' type.\n\n\u001b[7m85\u001b[0m     destination: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                  ~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m85\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'file' is declared but its value is never read.\n\n\u001b[7m85\u001b[0m     destination: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                       ~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m85\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'file' implicitly has an 'any' type.\n\n\u001b[7m85\u001b[0m     destination: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                       ~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m85\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'cb' implicitly has an 'any' type.\n\n\u001b[7m85\u001b[0m     destination: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                             ~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m86\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'UPLOAD_PATH' comes from an index signature, so it must be accessed with ['UPLOAD_PATH'].\n\n\u001b[7m86\u001b[0m       const uploadPath = process.env.UPLOAD_PATH || './uploads';\n\u001b[7m  \u001b[0m \u001b[91m                                     ~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m89\u001b[0m:\u001b[93m16\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m89\u001b[0m     filename: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m               ~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m89\u001b[0m:\u001b[93m16\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'req' implicitly has an 'any' type.\n\n\u001b[7m89\u001b[0m     filename: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m               ~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m89\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'file' implicitly has an 'any' type.\n\n\u001b[7m89\u001b[0m     filename: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                    ~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m89\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'cb' implicitly has an 'any' type.\n\n\u001b[7m89\u001b[0m     filename: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                          ~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m133\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'FRONTEND_URL' comes from an index signature, so it must be accessed with ['FRONTEND_URL'].\n\n\u001b[7m133\u001b[0m       process.env.FRONTEND_URL || 'http://localhost:3000',\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m141\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n\u001b[7m141\u001b[0m     if (!origin && process.env.NODE_ENV === 'development') {\n\u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m162\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'res' is declared but its value is never read.\n\n\u001b[7m162\u001b[0m export const sanitizeInput = (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m                                            ~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m247\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'res' is declared but its value is never read.\n\n\u001b[7m247\u001b[0m export const xssProtection = (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m                                            ~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m288\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m288\u001b[0m   return (req: AuthenticatedRequest, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m324\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'resourceId' is declared but its value is never read.\n\n\u001b[7m324\u001b[0m     const resourceId = req.params[resourceIdParam];\n\u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m325\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'userId' is declared but its value is never read.\n\n\u001b[7m325\u001b[0m     const userId = req.user.id;\n\u001b[7m   \u001b[0m \u001b[91m          ~~~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m335\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m335\u001b[0m export const validateApiKey = (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m346\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'VALID_API_KEYS' comes from an index signature, so it must be accessed with ['VALID_API_KEYS'].\n\n\u001b[7m346\u001b[0m   const validApiKeys = process.env.VALID_API_KEYS?.split(',') || [];\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m360\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m360\u001b[0m   return (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m390\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m390\u001b[0m   const value = parseFloat(match[1]);\n\u001b[7m   \u001b[0m \u001b[91m                           ~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m393\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2538: \u001b[0mType 'undefined' cannot be used as an index type.\n\n\u001b[7m393\u001b[0m   return value * units[unit];\n\u001b[7m   \u001b[0m \u001b[91m                       ~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m398\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m398\u001b[0m   return (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m454\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'API_VERSION' comes from an index signature, so it must be accessed with ['API_VERSION'].\n\n\u001b[7m454\u001b[0m   res.setHeader('X-API-Version', process.env.API_VERSION || '1.0.0');\n\u001b[7m   \u001b[0m \u001b[91m                                             ~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m473\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m473\u001b[0m   return (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/security.middleware.ts\u001b[0m:\u001b[93m512\u001b[0m:\u001b[93m57\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'res' is declared but its value is never read.\n\n\u001b[7m512\u001b[0m export const monitorSuspiciousActivity = (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m                                                        ~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/core/policy.service.ts\nERROR: \u001b[96msrc/core/policy.service.ts\u001b[0m:\u001b[93m8\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'prisma' is declared but its value is never read.\n\n\u001b[7m8\u001b[0m import { prisma } from '../config/database';\n\u001b[7m \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/core/policy.service.ts\u001b[0m:\u001b[93m193\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'role' is declared but its value is never read.\n\n\u001b[7m193\u001b[0m     for (const [role, rules] of this.rules) {\n\u001b[7m   \u001b[0m \u001b[91m                ~~~~\u001b[0m\n\u001b[96msrc/core/policy.service.ts\u001b[0m:\u001b[93m279\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'action' is declared but its value is never read.\n\n\u001b[7m279\u001b[0m     const { user, action, subject } = context;\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~\u001b[0m\n\u001b[96msrc/core/policy.service.ts\u001b[0m:\u001b[93m279\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'subject' is declared but its value is never read.\n\n\u001b[7m279\u001b[0m     const { user, action, subject } = context;\n\u001b[7m   \u001b[0m \u001b[91m                          ~~~~~~~\u001b[0m\n\u001b[96msrc/core/policy.service.ts\u001b[0m:\u001b[93m400\u001b[0m:\u001b[93m50\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'match' is declared but its value is never read.\n\n\u001b[7m400\u001b[0m     return template.replace(/\\{\\{([^}]+)\\}\\}/g, (match, path) => {\n\u001b[7m   \u001b[0m \u001b[91m                                                 ~~~~~\u001b[0m\n\u001b[96msrc/core/policy.service.ts\u001b[0m:\u001b[93m474\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'role' is declared but its value is never read.\n\n\u001b[7m474\u001b[0m     for (const [role, rules] of this.rules) {\n\u001b[7m   \u001b[0m \u001b[91m                ~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/config/security.ts\nERROR: \u001b[96msrc/config/security.ts\u001b[0m:\u001b[93m72\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'MAX_FILE_SIZE' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m72\u001b[0m     maxFileSize: env.MAX_FILE_SIZE,\n\u001b[7m  \u001b[0m \u001b[91m                     ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/security.ts\u001b[0m:\u001b[93m83\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'ALLOWED_FILE_TYPES' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m83\u001b[0m     allowedExtensions: env.ALLOWED_FILE_TYPES.split(','),\n\u001b[7m  \u001b[0m \u001b[91m                           ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/security.ts\u001b[0m:\u001b[93m84\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'UPLOAD_PATH' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m84\u001b[0m     uploadPath: env.UPLOAD_PATH\n\u001b[7m  \u001b[0m \u001b[91m                    ~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/security.ts\u001b[0m:\u001b[93m87\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType '(string | undefined)[]' is not assignable to type 'string[]'.\n  Type 'string | undefined' is not assignable to type 'string'.\n    Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m87\u001b[0m     origins: [\n\u001b[7m  \u001b[0m \u001b[91m    ~~~~~~~\u001b[0m\n\n  \u001b[96msrc/config/security.ts\u001b[0m:\u001b[93m23\u001b[0m:\u001b[93m5\u001b[0m\n    \u001b[7m23\u001b[0m     origins: string[];\n    \u001b[7m  \u001b[0m \u001b[96m    ~~~~~~~\u001b[0m\n    The expected type comes from property 'origins' which is declared here on type '{ origins: string[]; credentials: boolean; methods: string[]; allowedHeaders: string[]; exposedHeaders: string[]; }'\n\u001b[96msrc/config/security.ts\u001b[0m:\u001b[93m134\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'MAX_FILE_SIZE' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m134\u001b[0m     maxRequestSize: env.MAX_FILE_SIZE,\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/security.ts\u001b[0m:\u001b[93m144\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'ENABLE_AUDIT_LOGGING' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m144\u001b[0m     enableSecurityLogs: env.ENABLE_AUDIT_LOGGING,\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/security.ts\u001b[0m:\u001b[93m145\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'ENABLE_AUDIT_LOGGING' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m145\u001b[0m     enableAuditLogs: env.ENABLE_AUDIT_LOGGING,\n\u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/security.ts\u001b[0m:\u001b[93m147\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'LOG_RETENTION_DAYS' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m147\u001b[0m     logRetentionDays: env.LOG_RETENTION_DAYS,\n\u001b[7m   \u001b[0m \u001b[91m                          ~~~~~~~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/middleware/audit.middleware.ts\nERROR: \u001b[96msrc/middleware/audit.middleware.ts\u001b[0m:\u001b[93m4\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'Request' is declared but its value is never read.\n\n\u001b[7m4\u001b[0m import { Request, Response, NextFunction } from 'express';\n\u001b[7m \u001b[0m \u001b[91m         ~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/audit.middleware.ts\u001b[0m:\u001b[93m123\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'responseBody' is declared but its value is never read.\n\n\u001b[7m123\u001b[0m   responseBody,\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/audit.middleware.ts\u001b[0m:\u001b[93m141\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2375: \u001b[0mType '{ userId: string; action: string; resource: string; resourceId: string | undefined; method: string; path: string; ipAddress: string; userAgent: string | undefined; requestBody: any; responseStatus: number; timestamp: Date; duration: number; metadata: { ...; }; }' is not assignable to type 'AuditLogEntry' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'resourceId' are incompatible.\n    Type 'string | undefined' is not assignable to type 'string'.\n      Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m141\u001b[0m     const auditEntry: AuditLogEntry = {\n\u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/audit.middleware.ts\u001b[0m:\u001b[93m200\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'string | undefined' is not assignable to type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m200\u001b[0m     return pathParts[3]; // 'clients'\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~\u001b[0m\n\u001b[96msrc/middleware/audit.middleware.ts\u001b[0m:\u001b[93m217\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m217\u001b[0m   if (uuidPattern.test(lastPart)) {\n\u001b[7m   \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/audit.middleware.ts\u001b[0m:\u001b[93m330\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'log' implicitly has an 'any' type.\n\n\u001b[7m330\u001b[0m     logs: logs.map(log => ({\n\u001b[7m   \u001b[0m \u001b[91m                   ~~~\u001b[0m\n\u001b[96msrc/middleware/audit.middleware.ts\u001b[0m:\u001b[93m354\u001b[0m:\u001b[93m44\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'log' implicitly has an 'any' type.\n\n\u001b[7m354\u001b[0m     tooManyFailedLogins: recentLogs.filter(log =>\n\u001b[7m   \u001b[0m \u001b[91m                                           ~~~\u001b[0m\n\u001b[96msrc/middleware/audit.middleware.ts\u001b[0m:\u001b[93m360\u001b[0m:\u001b[93m49\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'log' implicitly has an 'any' type.\n\n\u001b[7m360\u001b[0m     multipleDeleteOperations: recentLogs.filter(log =>\n\u001b[7m   \u001b[0m \u001b[91m                                                ~~~\u001b[0m\n\u001b[96msrc/middleware/audit.middleware.ts\u001b[0m:\u001b[93m365\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'log' implicitly has an 'any' type.\n\n\u001b[7m365\u001b[0m       recentLogs.map(log => log.resource)\n\u001b[7m   \u001b[0m \u001b[91m                     ~~~\u001b[0m\n\u001b[96msrc/middleware/audit.middleware.ts\u001b[0m:\u001b[93m368\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'log' implicitly has an 'any' type.\n\n\u001b[7m368\u001b[0m     failedPermissions: recentLogs.filter(log =>\n\u001b[7m   \u001b[0m \u001b[91m                                         ~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/ai.routes.simple.ts\nERROR: \u001b[96msrc/routes/ai.routes.simple.ts\u001b[0m:\u001b[93m7\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'z' is declared but its value is never read.\n\n\u001b[7m7\u001b[0m import { z } from 'zod';\n\u001b[7m \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/ai.routes.simple.ts\u001b[0m:\u001b[93m10\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'createError' is declared but its value is never read.\n\n\u001b[7m10\u001b[0m import { createError } from '../middleware/error.middleware';\n\u001b[7m  \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/ai.routes.simple.ts\u001b[0m:\u001b[93m11\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'logger' is declared but its value is never read.\n\n\u001b[7m11\u001b[0m import { logger } from '../config/logger';\n\u001b[7m  \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/ai.routes.simple.ts\u001b[0m:\u001b[93m170\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m170\u001b[0m router.get('/health', async (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~\u001b[0m\n\u001b[96msrc/routes/ai.routes.simple.ts\u001b[0m:\u001b[93m185\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m185\u001b[0m router.get('/jurisdictions', (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m                              ~~~\u001b[0m\n\u001b[96msrc/routes/ai.routes.simple.ts\u001b[0m:\u001b[93m213\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m213\u001b[0m router.get('/languages', (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m                          ~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/contract-intelligence-simple.routes.ts\nERROR: \u001b[96msrc/routes/contract-intelligence-simple.routes.ts\u001b[0m:\u001b[93m35\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m35\u001b[0m router.post('/analyze', async (req: Request, res: Response) => {\n\u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence-simple.routes.ts\u001b[0m:\u001b[93m140\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m140\u001b[0m router.post('/quick-scan', async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence-simple.routes.ts\u001b[0m:\u001b[93m239\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m239\u001b[0m router.get('/supported-features', async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m                                         ~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence-simple.routes.ts\u001b[0m:\u001b[93m269\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m269\u001b[0m router.get('/health', async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/config/database.ts\nERROR: \u001b[96msrc/config/database.ts\u001b[0m:\u001b[93m38\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'e' implicitly has an 'any' type.\n\n\u001b[7m38\u001b[0m     prisma.$on('query', (e) => {\n\u001b[7m  \u001b[0m \u001b[91m                         ~\u001b[0m\n\u001b[96msrc/config/database.ts\u001b[0m:\u001b[93m58\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'e' implicitly has an 'any' type.\n\n\u001b[7m58\u001b[0m     prisma.$on('info', (e) => {\n\u001b[7m  \u001b[0m \u001b[91m                        ~\u001b[0m\n\u001b[96msrc/config/database.ts\u001b[0m:\u001b[93m62\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'e' implicitly has an 'any' type.\n\n\u001b[7m62\u001b[0m     prisma.$on('warn', (e) => {\n\u001b[7m  \u001b[0m \u001b[91m                        ~\u001b[0m\n\u001b[96msrc/config/database.ts\u001b[0m:\u001b[93m66\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'e' implicitly has an 'any' type.\n\n\u001b[7m66\u001b[0m     prisma.$on('error', (e) => {\n\u001b[7m  \u001b[0m \u001b[91m                         ~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/client.routes.ts\nERROR: \u001b[96msrc/routes/client.routes.ts\u001b[0m:\u001b[93m185\u001b[0m:\u001b[93m76\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2379: \u001b[0mArgument of type '{ startDate: Date | undefined; endDate: Date | undefined; compareStartDate: Date | undefined; compareEndDate: Date | undefined; }' is not assignable to parameter of type '{ startDate?: Date; endDate?: Date; compareStartDate?: Date; compareEndDate?: Date; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'startDate' are incompatible.\n    Type 'Date | undefined' is not assignable to type 'Date'.\n      Type 'undefined' is not assignable to type 'Date'.\n\n\u001b[7m185\u001b[0m     const stats = await ClientService.getClientStatsWithComparison(userId, options);\n\u001b[7m   \u001b[0m \u001b[91m                                                                           ~~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.ts\u001b[0m:\u001b[93m202\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m202\u001b[0m router.get('/search', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.ts\u001b[0m:\u001b[93m238\u001b[0m:\u001b[93m54\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m238\u001b[0m     const client = await ClientService.getClientById(id, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                     ~~\u001b[0m\n\u001b[96msrc/routes/client.routes.ts\u001b[0m:\u001b[93m261\u001b[0m:\u001b[93m53\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m261\u001b[0m     const client = await ClientService.updateClient(id, updateData, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                    ~~\u001b[0m\n\u001b[96msrc/routes/client.routes.ts\u001b[0m:\u001b[93m286\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m286\u001b[0m router.patch('/:id/status', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.ts\u001b[0m:\u001b[93m299\u001b[0m:\u001b[93m59\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m299\u001b[0m     const client = await ClientService.updateClientStatus(id, status, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                          ~~\u001b[0m\n\u001b[96msrc/routes/client.routes.ts\u001b[0m:\u001b[93m316\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m316\u001b[0m router.patch('/:id/assign-lawyer', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.ts\u001b[0m:\u001b[93m329\u001b[0m:\u001b[93m53\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m329\u001b[0m     const client = await ClientService.assignLawyer(id, lawyerId, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                    ~~\u001b[0m\n\u001b[96msrc/routes/client.routes.ts\u001b[0m:\u001b[93m351\u001b[0m:\u001b[93m53\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m351\u001b[0m     const result = await ClientService.deleteClient(id, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                    ~~\u001b[0m\n\u001b[96msrc/routes/client.routes.ts\u001b[0m:\u001b[93m367\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m367\u001b[0m router.post('/bulk', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/middleware/validation.middleware.ts\nERROR: \u001b[96msrc/middleware/validation.middleware.ts\u001b[0m:\u001b[93m44\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m44\u001b[0m   return (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m  \u001b[0m \u001b[91m         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/validation.middleware.ts\u001b[0m:\u001b[93m95\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m95\u001b[0m   return (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m  \u001b[0m \u001b[91m         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/validation.middleware.ts\u001b[0m:\u001b[93m123\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m123\u001b[0m   return (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/middleware/validation.middleware.ts\u001b[0m:\u001b[93m463\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  The last overload gave the following error.\n    Object literal may only specify known properties, and 'FORBID_SCRIPT' does not exist in type 'Config'.\n\n\u001b[7m463\u001b[0m     FORBID_SCRIPT: true,\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~~~~~~~~\u001b[0m\n\n  \u001b[96m../../node_modules/dompurify/dist/purify.cjs.d.ts\u001b[0m:\u001b[93m285\u001b[0m:\u001b[93m5\u001b[0m\n    \u001b[7m285\u001b[0m     sanitize(dirty: string | Node, cfg?: Config): string;\n    \u001b[7m   \u001b[0m \u001b[96m    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    The last overload is declared here.\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/auth.routes.ts\nERROR: \u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m67\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: null, options?: (SignOptions & { algorithm: \"none\"; }) | undefined): string', gave the following error.\n    Argument of type 'string' is not assignable to parameter of type 'null'.\n  Overload 2 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: Buffer<ArrayBufferLike> | Secret | PrivateKeyInput | JsonWebKeyInput, options?: SignOptions | undefined): string', gave the following error.\n    Type 'string' is not assignable to type 'number | StringValue | undefined'.\n  Overload 3 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: Buffer<ArrayBufferLike> | Secret | PrivateKeyInput | JsonWebKeyInput, callback: SignCallback): void', gave the following error.\n    Object literal may only specify known properties, and 'expiresIn' does not exist in type 'SignCallback'.\n\n\u001b[7m67\u001b[0m   const accessToken = jwt.sign(\n\u001b[7m  \u001b[0m \u001b[91m                          ~~~~\u001b[0m\n\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m69\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n\u001b[7m69\u001b[0m     process.env.JWT_SECRET || 'your-secret-key',\n\u001b[7m  \u001b[0m \u001b[91m                ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m70\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n\u001b[7m70\u001b[0m     { expiresIn: process.env.JWT_EXPIRES_IN || '24h' }\n\u001b[7m  \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m73\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: null, options?: (SignOptions & { algorithm: \"none\"; }) | undefined): string', gave the following error.\n    Argument of type 'string' is not assignable to parameter of type 'null'.\n  Overload 2 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: Buffer<ArrayBufferLike> | Secret | PrivateKeyInput | JsonWebKeyInput, options?: SignOptions | undefined): string', gave the following error.\n    Type 'string' is not assignable to type 'number | StringValue | undefined'.\n  Overload 3 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: Buffer<ArrayBufferLike> | Secret | PrivateKeyInput | JsonWebKeyInput, callback: SignCallback): void', gave the following error.\n    Object literal may only specify known properties, and 'expiresIn' does not exist in type 'SignCallback'.\n\n\u001b[7m73\u001b[0m   const refreshToken = jwt.sign(\n\u001b[7m  \u001b[0m \u001b[91m                           ~~~~\u001b[0m\n\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m75\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n\u001b[7m75\u001b[0m     process.env.JWT_REFRESH_SECRET || 'your-refresh-secret-key',\n\u001b[7m  \u001b[0m \u001b[91m                ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m76\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'REFRESH_TOKEN_EXPIRES_IN' comes from an index signature, so it must be accessed with ['REFRESH_TOKEN_EXPIRES_IN'].\n\n\u001b[7m76\u001b[0m     { expiresIn: process.env.REFRESH_TOKEN_EXPIRES_IN || '7d' }\n\u001b[7m  \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m83\u001b[0m:\u001b[93m43\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_ROUNDS'].\n\n\u001b[7m83\u001b[0m   const saltRounds = parseInt(process.env.BCRYPT_ROUNDS || '12');\n\u001b[7m  \u001b[0m \u001b[91m                                          ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m90\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n\u001b[7m90\u001b[0m     process.env.JWT_SECRET || 'your-secret-key',\n\u001b[7m  \u001b[0m \u001b[91m                ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m98\u001b[0m:\u001b[93m39\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m98\u001b[0m router.post('/register', authLimiter, async (req, res) => {\n\u001b[7m  \u001b[0m \u001b[91m                                      ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m189\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m189\u001b[0m router.post('/login', authLimiter, async (req, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m284\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m284\u001b[0m router.post('/refresh', async (req, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m298\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n\u001b[7m298\u001b[0m       process.env.JWT_REFRESH_SECRET || 'your-refresh-secret-key'\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m394\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m394\u001b[0m router.get('/me', authenticate, async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m437\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m437\u001b[0m router.put('/me', authenticate, async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m493\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m493\u001b[0m router.put('/change-password', authenticate, async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                                             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m555\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m555\u001b[0m router.post('/forgot-password', authLimiter, async (req, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                                             ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m591\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n\u001b[7m591\u001b[0m       ...(process.env.NODE_ENV === 'development' && { resetToken })\n\u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m611\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m611\u001b[0m router.post('/reset-password', authLimiter, async (req, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                                            ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m616\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'decoded' is declared but its value is never read.\n\n\u001b[7m616\u001b[0m     const decoded = jwt.verify(\n\u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth.routes.ts\u001b[0m:\u001b[93m618\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n\u001b[7m618\u001b[0m       process.env.JWT_SECRET || 'your-secret-key'\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/ai.routes.fixed.ts\nERROR: \u001b[96msrc/routes/ai.routes.fixed.ts\u001b[0m:\u001b[93m118\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m118\u001b[0m router.get('/jurisdictions', (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                              ~~~\u001b[0m\n\u001b[96msrc/routes/ai.routes.fixed.ts\u001b[0m:\u001b[93m126\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m126\u001b[0m router.get('/languages', (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                          ~~~\u001b[0m\n\u001b[96msrc/routes/ai.routes.fixed.ts\u001b[0m:\u001b[93m135\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m135\u001b[0m router.get('/health', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/config/swagger.ts\nERROR: \u001b[96msrc/config/swagger.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'swagger-jsdoc' or its corresponding type declarations.\n\n\u001b[7m6\u001b[0m import swaggerJsdoc from 'swagger-jsdoc';\n\u001b[7m \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/swagger.ts\u001b[0m:\u001b[93m7\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'swagger-jsdoc' or its corresponding type declarations.\n\n\u001b[7m7\u001b[0m import { SwaggerDefinition } from 'swagger-jsdoc';\n\u001b[7m \u001b[0m \u001b[91m                                  ~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/swagger.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'npm_package_version' comes from an index signature, so it must be accessed with ['npm_package_version'].\n\n\u001b[7m14\u001b[0m     version: process.env.npm_package_version || '1.0.0',\n\u001b[7m  \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/config/logger.ts\nERROR: \u001b[96msrc/config/logger.ts\u001b[0m:\u001b[93m7\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'winston-daily-rotate-file' or its corresponding type declarations.\n\n\u001b[7m7\u001b[0m import DailyRotateFile from 'winston-daily-rotate-file';\n\u001b[7m \u001b[0m \u001b[91m                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/logger.ts\u001b[0m:\u001b[93m41\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'LOG_RETENTION_DAYS' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m41\u001b[0m       maxFiles: `${env.LOG_RETENTION_DAYS}d`,\n\u001b[7m  \u001b[0m \u001b[91m                       ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/logger.ts\u001b[0m:\u001b[93m52\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'LOG_RETENTION_DAYS' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m52\u001b[0m       maxFiles: `${env.LOG_RETENTION_DAYS}d`,\n\u001b[7m  \u001b[0m \u001b[91m                       ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/logger.ts\u001b[0m:\u001b[93m64\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'LOG_RETENTION_DAYS' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m64\u001b[0m       maxFiles: `${env.LOG_RETENTION_DAYS}d`,\n\u001b[7m  \u001b[0m \u001b[91m                       ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/logger.ts\u001b[0m:\u001b[93m90\u001b[0m:\u001b[93m57\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'LOG_LEVEL' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m90\u001b[0m     level: env.NODE_ENV === 'production' ? 'warn' : env.LOG_LEVEL\n\u001b[7m  \u001b[0m \u001b[91m                                                        ~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/logger.ts\u001b[0m:\u001b[93m96\u001b[0m:\u001b[93m14\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'LOG_LEVEL' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m96\u001b[0m   level: env.LOG_LEVEL,\n\u001b[7m  \u001b[0m \u001b[91m             ~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/logger.ts\u001b[0m:\u001b[93m101\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'npm_package_version' comes from an index signature, so it must be accessed with ['npm_package_version'].\n\n\u001b[7m101\u001b[0m     version: process.env.npm_package_version || '1.0.0'\n\u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/document-automation.routes.ts\nERROR: \u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m51\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m51\u001b[0m const validateGenerationRequest = (req: Request, res: Response, next: Function) => {\n\u001b[7m  \u001b[0m \u001b[91m                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m219\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n\u001b[7m219\u001b[0m       details: process.env.NODE_ENV === 'development' ? error?.stack : undefined\n\u001b[7m   \u001b[0m \u001b[91m                           ~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m299\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'type' comes from an index signature, so it must be accessed with ['type'].\n\n\u001b[7m299\u001b[0m     if (req.query.type) {\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m300\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'type' comes from an index signature, so it must be accessed with ['type'].\n\n\u001b[7m300\u001b[0m       filters.type = req.query.type as DocumentType;\n\u001b[7m   \u001b[0m \u001b[91m                               ~~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m302\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'jurisdiction' comes from an index signature, so it must be accessed with ['jurisdiction'].\n\n\u001b[7m302\u001b[0m     if (req.query.jurisdiction) {\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m303\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'jurisdiction' comes from an index signature, so it must be accessed with ['jurisdiction'].\n\n\u001b[7m303\u001b[0m       filters.jurisdiction = req.query.jurisdiction as LegalJurisdiction;\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m305\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'legalArea' comes from an index signature, so it must be accessed with ['legalArea'].\n\n\u001b[7m305\u001b[0m     if (req.query.legalArea) {\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m306\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'legalArea' comes from an index signature, so it must be accessed with ['legalArea'].\n\n\u001b[7m306\u001b[0m       filters.legalArea = req.query.legalArea as LegalArea;\n\u001b[7m   \u001b[0m \u001b[91m                                    ~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m308\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'complexity' comes from an index signature, so it must be accessed with ['complexity'].\n\n\u001b[7m308\u001b[0m     if (req.query.complexity) {\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m309\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'complexity' comes from an index signature, so it must be accessed with ['complexity'].\n\n\u001b[7m309\u001b[0m       filters.complexity = req.query.complexity as DocumentComplexity;\n\u001b[7m   \u001b[0m \u001b[91m                                     ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m311\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'language' comes from an index signature, so it must be accessed with ['language'].\n\n\u001b[7m311\u001b[0m     if (req.query.language) {\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m312\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'language' comes from an index signature, so it must be accessed with ['language'].\n\n\u001b[7m312\u001b[0m       filters.language = req.query.language as SupportedLanguage;\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m336\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m336\u001b[0m router.post('/templates/validate', async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m366\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m366\u001b[0m router.get('/capabilities', (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m458\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m458\u001b[0m router.get('/document-types', (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m                               ~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m527\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m527\u001b[0m router.use((error: any, req: Request, res: Response, next: Function) => {\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m527\u001b[0m:\u001b[93m54\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'next' is declared but its value is never read.\n\n\u001b[7m527\u001b[0m router.use((error: any, req: Request, res: Response, next: Function) => {\n\u001b[7m   \u001b[0m \u001b[91m                                                     ~~~~\u001b[0m\n\u001b[96msrc/routes/document-automation.routes.ts\u001b[0m:\u001b[93m532\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n\u001b[7m532\u001b[0m     details: process.env.NODE_ENV === 'development' ? error.message : undefined\n\u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/auth-secure.routes.ts\nERROR: \u001b[96msrc/routes/auth-secure.routes.ts\u001b[0m:\u001b[93m23\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n\u001b[7m23\u001b[0m const JWT_REFRESH_SECRET = process.env.JWT_REFRESH_SECRET || (() => {\n\u001b[7m  \u001b[0m \u001b[91m                                       ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth-secure.routes.ts\u001b[0m:\u001b[93m69\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n\u001b[7m69\u001b[0m const isDevelopment = process.env.NODE_ENV !== 'production';\n\u001b[7m  \u001b[0m \u001b[91m                                  ~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth-secure.routes.ts\u001b[0m:\u001b[93m126\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m126\u001b[0m router.post('/login', async (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth-secure.routes.ts\u001b[0m:\u001b[93m304\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m304\u001b[0m router.post('/register', async (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth-secure.routes.ts\u001b[0m:\u001b[93m310\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n\u001b[7m310\u001b[0m     if (!process.env.ENABLE_REGISTRATION || process.env.ENABLE_REGISTRATION === 'false') {\n\u001b[7m   \u001b[0m \u001b[91m                     ~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth-secure.routes.ts\u001b[0m:\u001b[93m310\u001b[0m:\u001b[93m57\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n\u001b[7m310\u001b[0m     if (!process.env.ENABLE_REGISTRATION || process.env.ENABLE_REGISTRATION === 'false') {\n\u001b[7m   \u001b[0m \u001b[91m                                                        ~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth-secure.routes.ts\u001b[0m:\u001b[93m438\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m438\u001b[0m router.get('/me', authenticate, async (req: AuthenticatedRequest, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth-secure.routes.ts\u001b[0m:\u001b[93m589\u001b[0m:\u001b[93m61\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'next' is declared but its value is never read.\n\n\u001b[7m589\u001b[0m router.post('/refresh', async (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m                                                            ~~~~\u001b[0m\n\u001b[96msrc/routes/auth-secure.routes.ts\u001b[0m:\u001b[93m602\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n\u001b[7m602\u001b[0m       audience: process.env.APP_URL || 'http://localhost:3000'\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth-secure.routes.ts\u001b[0m:\u001b[93m672\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m672\u001b[0m router.post('/logout', authenticate, async (req: AuthenticatedRequest, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/auth-secure.routes.ts\u001b[0m:\u001b[93m732\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m732\u001b[0m router.post('/forgot-password', async (req: Request, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/user.routes.ts\nERROR: \u001b[96msrc/routes/user.routes.ts\u001b[0m:\u001b[93m10\u001b[0m:\u001b[93m18\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m10\u001b[0m router.get('/', (req, res) => {\n\u001b[7m  \u001b[0m \u001b[91m                 ~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/dashboard.routes.ts\nERROR: \u001b[96msrc/routes/dashboard.routes.ts\u001b[0m:\u001b[93m77\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'limit' comes from an index signature, so it must be accessed with ['limit'].\n\n\u001b[7m77\u001b[0m     const limit = req.query.limit ? parseInt(req.query.limit as string) : 10;\n\u001b[7m  \u001b[0m \u001b[91m                            ~~~~~\u001b[0m\n\u001b[96msrc/routes/dashboard.routes.ts\u001b[0m:\u001b[93m77\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'limit' comes from an index signature, so it must be accessed with ['limit'].\n\n\u001b[7m77\u001b[0m     const limit = req.query.limit ? parseInt(req.query.limit as string) : 10;\n\u001b[7m  \u001b[0m \u001b[91m                                                       ~~~~~\u001b[0m\n\u001b[96msrc/routes/dashboard.routes.ts\u001b[0m:\u001b[93m98\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'limit' comes from an index signature, so it must be accessed with ['limit'].\n\n\u001b[7m98\u001b[0m     const limit = req.query.limit ? parseInt(req.query.limit as string) : 10;\n\u001b[7m  \u001b[0m \u001b[91m                            ~~~~~\u001b[0m\n\u001b[96msrc/routes/dashboard.routes.ts\u001b[0m:\u001b[93m98\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'limit' comes from an index signature, so it must be accessed with ['limit'].\n\n\u001b[7m98\u001b[0m     const limit = req.query.limit ? parseInt(req.query.limit as string) : 10;\n\u001b[7m  \u001b[0m \u001b[91m                                                       ~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/document.routes.ts\nERROR: \u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m8\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'multer' or its corresponding type declarations.\n\n\u001b[7m8\u001b[0m import multer from 'multer';\n\u001b[7m \u001b[0m \u001b[91m                   ~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m16\u001b[0m   destination: async (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                      ~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'req' implicitly has an 'any' type.\n\n\u001b[7m16\u001b[0m   destination: async (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                      ~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'file' is declared but its value is never read.\n\n\u001b[7m16\u001b[0m   destination: async (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                           ~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'file' implicitly has an 'any' type.\n\n\u001b[7m16\u001b[0m   destination: async (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                           ~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'cb' implicitly has an 'any' type.\n\n\u001b[7m16\u001b[0m   destination: async (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                                 ~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m14\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m25\u001b[0m   filename: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m             ~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m14\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'req' implicitly has an 'any' type.\n\n\u001b[7m25\u001b[0m   filename: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m             ~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'file' implicitly has an 'any' type.\n\n\u001b[7m25\u001b[0m   filename: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                  ~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'cb' implicitly has an 'any' type.\n\n\u001b[7m25\u001b[0m   filename: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                        ~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m38\u001b[0m:\u001b[93m16\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m38\u001b[0m   fileFilter: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m               ~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m38\u001b[0m:\u001b[93m16\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'req' implicitly has an 'any' type.\n\n\u001b[7m38\u001b[0m   fileFilter: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m               ~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m38\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'file' implicitly has an 'any' type.\n\n\u001b[7m38\u001b[0m   fileFilter: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                    ~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m38\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'cb' implicitly has an 'any' type.\n\n\u001b[7m38\u001b[0m   fileFilter: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                          ~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m87\u001b[0m:\u001b[93m47\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m87\u001b[0m router.post('/upload', upload.single('file'), async (req: AuthenticatedRequest, res) => {\n\u001b[7m  \u001b[0m \u001b[91m                                              ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m89\u001b[0m:\u001b[93m14\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'AuthenticatedRequest'.\n\n\u001b[7m89\u001b[0m     if (!req.file) {\n\u001b[7m  \u001b[0m \u001b[91m             ~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m100\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'AuthenticatedRequest'.\n\n\u001b[7m100\u001b[0m       fileType: path.extname(req.file.originalname).substring(1).toUpperCase(),\n\u001b[7m   \u001b[0m \u001b[91m                                 ~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m101\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'AuthenticatedRequest'.\n\n\u001b[7m101\u001b[0m       fileName: req.file.filename,\n\u001b[7m   \u001b[0m \u001b[91m                    ~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m102\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'AuthenticatedRequest'.\n\n\u001b[7m102\u001b[0m       originalName: req.file.originalname,\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m103\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'AuthenticatedRequest'.\n\n\u001b[7m103\u001b[0m       fileSize: req.file.size,\n\u001b[7m   \u001b[0m \u001b[91m                    ~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m104\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'AuthenticatedRequest'.\n\n\u001b[7m104\u001b[0m       mimeType: req.file.mimetype,\n\u001b[7m   \u001b[0m \u001b[91m                    ~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m105\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'AuthenticatedRequest'.\n\n\u001b[7m105\u001b[0m       filePath: req.file.path,\n\u001b[7m   \u001b[0m \u001b[91m                    ~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m127\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'AuthenticatedRequest'.\n\n\u001b[7m127\u001b[0m     if (req.file) {\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m129\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'AuthenticatedRequest'.\n\n\u001b[7m129\u001b[0m         await fs.unlink(req.file.path);\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m171\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m171\u001b[0m router.get('/search', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m207\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m207\u001b[0m     const document = await DocumentService.getDocumentById(id, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m229\u001b[0m:\u001b[93m65\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m229\u001b[0m     const downloadInfo = await DocumentService.downloadDocument(id, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                                ~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m251\u001b[0m:\u001b[93m64\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m251\u001b[0m     const versions = await DocumentService.getDocumentVersions(id, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                               ~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m274\u001b[0m:\u001b[93m59\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m274\u001b[0m     const document = await DocumentService.updateDocument(id, updateData, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                          ~~\u001b[0m\n\u001b[96msrc/routes/document.routes.ts\u001b[0m:\u001b[93m304\u001b[0m:\u001b[93m57\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m304\u001b[0m     const result = await DocumentService.deleteDocument(id, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                        ~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/legal-research.routes.ts\nERROR: \u001b[96msrc/routes/legal-research.routes.ts\u001b[0m:\u001b[93m112\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m112\u001b[0m   async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/legal-research.routes.ts\u001b[0m:\u001b[93m125\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2375: \u001b[0mType '{ query: any; jurisdictions: any; legalAreas: any; languages: any; documentTypes: any; maxResults: any; includeAnalysis: any; includeCitations: any; citationFormat: any; complexity: any; semanticSearch: any; includeRelatedCases: any; confidenceThreshold: any; dateRange: { ...; } | undefined; }' is not assignable to type 'LegalResearchRequest' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'dateRange' are incompatible.\n    Type '{ from: Date; to: Date; } | undefined' is not assignable to type '{ from: Date; to: Date; }'.\n      Type 'undefined' is not assignable to type '{ from: Date; to: Date; }'.\n\n\u001b[7m125\u001b[0m       const researchRequest: LegalResearchRequest = {\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/legal-research.routes.ts\u001b[0m:\u001b[93m175\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m175\u001b[0m   async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/legal-research.routes.ts\u001b[0m:\u001b[93m186\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'q' comes from an index signature, so it must be accessed with ['q'].\n\n\u001b[7m186\u001b[0m       const query = req.query.q as string;\n\u001b[7m   \u001b[0m \u001b[91m                              ~\u001b[0m\n\u001b[96msrc/routes/legal-research.routes.ts\u001b[0m:\u001b[93m220\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m220\u001b[0m router.get('/jurisdictions', async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m                                    ~~~\u001b[0m\n\u001b[96msrc/routes/legal-research.routes.ts\u001b[0m:\u001b[93m254\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m254\u001b[0m router.get('/areas', async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~\u001b[0m\n\u001b[96msrc/routes/legal-research.routes.ts\u001b[0m:\u001b[93m283\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m283\u001b[0m router.get('/document-types', async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m                                     ~~~\u001b[0m\n\u001b[96msrc/routes/legal-research.routes.ts\u001b[0m:\u001b[93m314\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m314\u001b[0m   async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/config/secrets.ts\nERROR: \u001b[96msrc/config/secrets.ts\u001b[0m:\u001b[93m39\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'SECRETS_ENCRYPTION_KEY' comes from an index signature, so it must be accessed with ['SECRETS_ENCRYPTION_KEY'].\n\n\u001b[7m39\u001b[0m     return process.env.SECRETS_ENCRYPTION_KEY || crypto.randomBytes(32).toString('hex');\n\u001b[7m  \u001b[0m \u001b[91m                       ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/config/secrets.ts\u001b[0m:\u001b[93m45\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2551: \u001b[0mProperty 'createCipherGCM' does not exist on type 'typeof import(\"crypto\")'. Did you mean 'createCipheriv'?\n\n\u001b[7m45\u001b[0m     const cipher = crypto.createCipherGCM('aes-256-gcm', key, iv);\n\u001b[7m  \u001b[0m \u001b[91m                          ~~~~~~~~~~~~~~~\u001b[0m\n\n  \u001b[96m../../node_modules/@types/node/crypto.d.ts\u001b[0m:\u001b[93m734\u001b[0m:\u001b[93m14\u001b[0m\n    \u001b[7m734\u001b[0m     function createCipheriv(\n    \u001b[7m   \u001b[0m \u001b[96m             ~~~~~~~~~~~~~~\u001b[0m\n    'createCipheriv' is declared here.\n\u001b[96msrc/config/secrets.ts\u001b[0m:\u001b[93m56\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 4, '(arrayBuffer: WithImplicitCoercion<ArrayBufferLike>, byteOffset?: number | undefined, length?: number | undefined): Buffer<ArrayBufferLike>', gave the following error.\n    Argument of type 'string | undefined' is not assignable to parameter of type 'WithImplicitCoercion<ArrayBufferLike>'.\n      Type 'undefined' is not assignable to type 'WithImplicitCoercion<ArrayBufferLike>'.\n  Overload 2 of 4, '(string: WithImplicitCoercion<string>, encoding?: BufferEncoding | undefined): Buffer<ArrayBuffer>', gave the following error.\n    Argument of type 'string | undefined' is not assignable to parameter of type 'WithImplicitCoercion<string>'.\n      Type 'undefined' is not assignable to type 'WithImplicitCoercion<string>'.\n\n\u001b[7m56\u001b[0m     const iv = Buffer.from(ivHex, 'hex');\n\u001b[7m  \u001b[0m \u001b[91m                           ~~~~~\u001b[0m\n\n\u001b[96msrc/config/secrets.ts\u001b[0m:\u001b[93m57\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 4, '(arrayBuffer: WithImplicitCoercion<ArrayBufferLike>, byteOffset?: number | undefined, length?: number | undefined): Buffer<ArrayBufferLike>', gave the following error.\n    Argument of type 'string | undefined' is not assignable to parameter of type 'WithImplicitCoercion<ArrayBufferLike>'.\n      Type 'undefined' is not assignable to type 'WithImplicitCoercion<ArrayBufferLike>'.\n  Overload 2 of 4, '(string: WithImplicitCoercion<string>, encoding?: BufferEncoding | undefined): Buffer<ArrayBuffer>', gave the following error.\n    Argument of type 'string | undefined' is not assignable to parameter of type 'WithImplicitCoercion<string>'.\n      Type 'undefined' is not assignable to type 'WithImplicitCoercion<string>'.\n\n\u001b[7m57\u001b[0m     const authTag = Buffer.from(authTagHex, 'hex');\n\u001b[7m  \u001b[0m \u001b[91m                                ~~~~~~~~~~\u001b[0m\n\n\u001b[96msrc/config/secrets.ts\u001b[0m:\u001b[93m60\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2551: \u001b[0mProperty 'createDecipherGCM' does not exist on type 'typeof import(\"crypto\")'. Did you mean 'createDecipheriv'?\n\n\u001b[7m60\u001b[0m     const decipher = crypto.createDecipherGCM('aes-256-gcm', key, iv);\n\u001b[7m  \u001b[0m \u001b[91m                            ~~~~~~~~~~~~~~~~~\u001b[0m\n\n  \u001b[96m../../node_modules/@types/node/crypto.d.ts\u001b[0m:\u001b[93m995\u001b[0m:\u001b[93m14\u001b[0m\n    \u001b[7m995\u001b[0m     function createDecipheriv(\n    \u001b[7m   \u001b[0m \u001b[96m             ~~~~~~~~~~~~~~~~\u001b[0m\n    'createDecipheriv' is declared here.\n\u001b[96msrc/config/secrets.ts\u001b[0m:\u001b[93m157\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType '{ name: string; createdAt: Date; expiresAt: Date | undefined; rotationPolicy: \"manual\" | \"auto\"; }[]' is not assignable to type '{ name: string; createdAt: Date; expiresAt?: Date; rotationPolicy: string; }[]'.\n  Type '{ name: string; createdAt: Date; expiresAt: Date | undefined; rotationPolicy: \"manual\" | \"auto\"; }' is not assignable to type '{ name: string; createdAt: Date; expiresAt?: Date; rotationPolicy: string; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n    Types of property 'expiresAt' are incompatible.\n      Type 'Date | undefined' is not assignable to type 'Date'.\n        Type 'undefined' is not assignable to type 'Date'.\n\n\u001b[7m157\u001b[0m     return Array.from(this.secrets.entries()).map(([name, secret]) => ({\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~\u001b[0m\n\u001b[96msrc/config/secrets.ts\u001b[0m:\u001b[93m197\u001b[0m:\u001b[93m16\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m197\u001b[0m   fileFilter: (req: any, file: any, cb: any) => {\n\u001b[7m   \u001b[0m \u001b[91m               ~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/contract.routes.ts\nERROR: \u001b[96msrc/routes/contract.routes.ts\u001b[0m:\u001b[93m81\u001b[0m:\u001b[93m82\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2379: \u001b[0mArgument of type '{ startDate: Date | undefined; endDate: Date | undefined; compareStartDate: Date | undefined; compareEndDate: Date | undefined; }' is not assignable to parameter of type '{ startDate?: Date; endDate?: Date; compareStartDate?: Date; compareEndDate?: Date; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'startDate' are incompatible.\n    Type 'Date | undefined' is not assignable to type 'Date'.\n      Type 'undefined' is not assignable to type 'Date'.\n\n\u001b[7m81\u001b[0m       const stats = await ContractService.getContractStatsWithComparison(userId, options);\n\u001b[7m  \u001b[0m \u001b[91m                                                                                 ~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract.routes.ts\u001b[0m:\u001b[93m106\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m106\u001b[0m router.get('/search', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract.routes.ts\u001b[0m:\u001b[93m142\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m142\u001b[0m     const contract = await ContractService.getContractById(id, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~\u001b[0m\n\u001b[96msrc/routes/contract.routes.ts\u001b[0m:\u001b[93m165\u001b[0m:\u001b[93m59\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m165\u001b[0m     const contract = await ContractService.updateContract(id, updateData, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                          ~~\u001b[0m\n\u001b[96msrc/routes/contract.routes.ts\u001b[0m:\u001b[93m190\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m190\u001b[0m router.patch('/:id/status', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract.routes.ts\u001b[0m:\u001b[93m203\u001b[0m:\u001b[93m59\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m203\u001b[0m     const contract = await ContractService.updateContract(id, { status }, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                          ~~\u001b[0m\n\u001b[96msrc/routes/contract.routes.ts\u001b[0m:\u001b[93m225\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m225\u001b[0m     await ContractService.deleteContract(id, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                         ~~\u001b[0m\n\u001b[96msrc/routes/contract.routes.ts\u001b[0m:\u001b[93m247\u001b[0m:\u001b[93m68\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m247\u001b[0m     const originalContract = await ContractService.getContractById(id, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                                   ~~\u001b[0m\n\u001b[96msrc/routes/contract.routes.ts\u001b[0m:\u001b[93m265\u001b[0m:\u001b[93m69\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ title: string; description: any; type: any; value: any; currency: any; startDate: string; endDate: any; renewalTerms: any; riskLevel: any; priority: any; tags: any; clientId: any; }' is not assignable to parameter of type '{ type: \"SERVICE_AGREEMENT\" | \"EMPLOYMENT\" | \"NDA\" | \"JOINT_VENTURE\" | \"LICENSE_AGREEMENT\" | \"MERGER_ACQUISITION\" | \"PARTNERSHIP\" | \"CONSULTING\" | \"SUPPLY\" | \"DISTRIBUTION\"; ... 10 more ...; renewalTerms?: string | undefined; }'.\n  Types of property 'startDate' are incompatible.\n    Type 'string' is not assignable to type 'Date'.\n\n\u001b[7m265\u001b[0m     const duplicatedContract = await ContractService.createContract(duplicateData, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                                    ~~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/legal-intelligence.routes.ts\nERROR: \u001b[96msrc/routes/legal-intelligence.routes.ts\u001b[0m:\u001b[93m49\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m49\u001b[0m const validateRequest = (req: Request, res: Response, next: Function) => {\n\u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/legal-intelligence.routes.ts\u001b[0m:\u001b[93m236\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m236\u001b[0m router.get('/capabilities', (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/client.routes.real.ts\nERROR: \u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m18\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'Request' is declared but its value is never read.\n\n\u001b[7m6\u001b[0m import { Router, Request, Response, NextFunction } from 'express';\n\u001b[7m \u001b[0m \u001b[91m                 ~~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m11\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'logger' is declared but its value is never read.\n\n\u001b[7m11\u001b[0m import { logger } from '../config/logger';\n\u001b[7m  \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m45\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'page' comes from an index signature, so it must be accessed with ['page'].\n\n\u001b[7m45\u001b[0m         page: parseInt(req.query.page as string) || 1,\n\u001b[7m  \u001b[0m \u001b[91m                                 ~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m46\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'limit' comes from an index signature, so it must be accessed with ['limit'].\n\n\u001b[7m46\u001b[0m         limit: parseInt(req.query.limit as string) || 20,\n\u001b[7m  \u001b[0m \u001b[91m                                  ~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m47\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'search' comes from an index signature, so it must be accessed with ['search'].\n\n\u001b[7m47\u001b[0m         search: req.query.search as string,\n\u001b[7m  \u001b[0m \u001b[91m                          ~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m48\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'clientType' comes from an index signature, so it must be accessed with ['clientType'].\n\n\u001b[7m48\u001b[0m         clientType: req.query.clientType as any,\n\u001b[7m  \u001b[0m \u001b[91m                              ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m49\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'industry' comes from an index signature, so it must be accessed with ['industry'].\n\n\u001b[7m49\u001b[0m         industry: req.query.industry as string,\n\u001b[7m  \u001b[0m \u001b[91m                            ~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m50\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'sortBy' comes from an index signature, so it must be accessed with ['sortBy'].\n\n\u001b[7m50\u001b[0m         sortBy: req.query.sortBy as any || 'name',\n\u001b[7m  \u001b[0m \u001b[91m                          ~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m51\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'sortOrder' comes from an index signature, so it must be accessed with ['sortOrder'].\n\n\u001b[7m51\u001b[0m         sortOrder: req.query.sortOrder as any || 'asc',\n\u001b[7m  \u001b[0m \u001b[91m                             ~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m81\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m81\u001b[0m       const client = await clientService.getClientById(req.params.id);\n\u001b[7m  \u001b[0m \u001b[91m                                                       ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m81\u001b[0m:\u001b[93m67\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'id' comes from an index signature, so it must be accessed with ['id'].\n\n\u001b[7m81\u001b[0m       const client = await clientService.getClientById(req.params.id);\n\u001b[7m  \u001b[0m \u001b[91m                                                                  ~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m107\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m107\u001b[0m         req.params.id,\n\u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m107\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'id' comes from an index signature, so it must be accessed with ['id'].\n\n\u001b[7m107\u001b[0m         req.params.id,\n\u001b[7m   \u001b[0m \u001b[91m                   ~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m136\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m136\u001b[0m       await clientService.deleteClient(req.params.id, req.user!.id);\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m136\u001b[0m:\u001b[93m51\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'id' comes from an index signature, so it must be accessed with ['id'].\n\n\u001b[7m136\u001b[0m       await clientService.deleteClient(req.params.id, req.user!.id);\n\u001b[7m   \u001b[0m \u001b[91m                                                  ~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m159\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m159\u001b[0m   async (req: AuthenticatedRequest, res: Response, next: NextFunction) => {\n\u001b[7m   \u001b[0m \u001b[91m         ~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m182\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'term' comes from an index signature, so it must be accessed with ['term'].\n\n\u001b[7m182\u001b[0m       const searchTerm = req.params.term;\n\u001b[7m   \u001b[0m \u001b[91m                                    ~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m183\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'limit' comes from an index signature, so it must be accessed with ['limit'].\n\n\u001b[7m183\u001b[0m       const limit = parseInt(req.query.limit as string) || 10;\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m185\u001b[0m:\u001b[93m57\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m185\u001b[0m       const clients = await clientService.searchClients(searchTerm, limit);\n\u001b[7m   \u001b[0m \u001b[91m                                                        ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m206\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m206\u001b[0m       const client = await clientService.getClientById(req.params.id);\n\u001b[7m   \u001b[0m \u001b[91m                                                       ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m206\u001b[0m:\u001b[93m67\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'id' comes from an index signature, so it must be accessed with ['id'].\n\n\u001b[7m206\u001b[0m       const client = await clientService.getClientById(req.params.id);\n\u001b[7m   \u001b[0m \u001b[91m                                                                  ~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m215\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'id' does not exist on type 'ClientWithStats'.\n\n\u001b[7m215\u001b[0m           where: { clientId: client.id },\n\u001b[7m   \u001b[0m \u001b[91m                                    ~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m219\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'id' does not exist on type 'ClientWithStats'.\n\n\u001b[7m219\u001b[0m           where: { clientId: client.id },\n\u001b[7m   \u001b[0m \u001b[91m                                    ~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m222\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'id' does not exist on type 'ClientWithStats'.\n\n\u001b[7m222\u001b[0m           where: { clientId: client.id },\n\u001b[7m   \u001b[0m \u001b[91m                                    ~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m293\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'id' comes from an index signature, so it must be accessed with ['id'].\n\n\u001b[7m293\u001b[0m       const clientId = req.params.id;\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m294\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'limit' comes from an index signature, so it must be accessed with ['limit'].\n\n\u001b[7m294\u001b[0m       const limit = parseInt(req.query.limit as string) || 50;\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m348\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'matter' implicitly has an 'any' type.\n\n\u001b[7m348\u001b[0m         ...matterActivities.map(matter => ({\n\u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m356\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'doc' implicitly has an 'any' type.\n\n\u001b[7m356\u001b[0m         ...documentActivities.map(doc => ({\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~\u001b[0m\n\u001b[96msrc/routes/client.routes.real.ts\u001b[0m:\u001b[93m364\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'contact' implicitly has an 'any' type.\n\n\u001b[7m364\u001b[0m         ...contactActivities.map(contact => ({\n\u001b[7m   \u001b[0m \u001b[91m                                 ~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/contract-intelligence.routes.ts\nERROR: \u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'multer' or its corresponding type declarations.\n\n\u001b[7m16\u001b[0m import multer from 'multer';\n\u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6196: \u001b[0m'AuthenticatedRequest' is declared but never used.\n\n\u001b[7m20\u001b[0m interface AuthenticatedRequest extends Request {\n\u001b[7m  \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m45\u001b[0m:\u001b[93m16\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m45\u001b[0m   fileFilter: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m               ~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m45\u001b[0m:\u001b[93m16\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'req' implicitly has an 'any' type.\n\n\u001b[7m45\u001b[0m   fileFilter: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m               ~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m45\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'file' implicitly has an 'any' type.\n\n\u001b[7m45\u001b[0m   fileFilter: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                    ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m45\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'cb' implicitly has an 'any' type.\n\n\u001b[7m45\u001b[0m   fileFilter: (req, file, cb) => {\n\u001b[7m  \u001b[0m \u001b[91m                          ~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m56\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'handleValidationErrors' is declared but its value is never read.\n\n\u001b[7m56\u001b[0m const handleValidationErrors = (req: Request, res: Response, next: Function) => {\n\u001b[7m  \u001b[0m \u001b[91m      ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m56\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m56\u001b[0m const handleValidationErrors = (req: Request, res: Response, next: Function) => {\n\u001b[7m  \u001b[0m \u001b[91m                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m114\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'RequestValidator'.\n\n\u001b[7m114\u001b[0m   RequestValidator.validate,\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m115\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m115\u001b[0m   async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m121\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'user' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m121\u001b[0m         userId: req.user?.id,\n\u001b[7m   \u001b[0m \u001b[91m                    ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m129\u001b[0m:\u001b[93m15\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m129\u001b[0m       if (req.file) {\n\u001b[7m   \u001b[0m \u001b[91m              ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m132\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m132\u001b[0m           content: req.file.buffer.toString('utf-8'), // In production, use proper PDF/DOCX parsers\n\u001b[7m   \u001b[0m \u001b[91m                       ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m133\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m133\u001b[0m           fileName: req.file.originalname,\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m134\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m134\u001b[0m           fileSize: req.file.size,\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m135\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m135\u001b[0m           mimeType: req.file.mimetype\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m170\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'customParameters' does not exist in type 'ContractAnalysisRequest'.\n\n\u001b[7m170\u001b[0m         customParameters: req.body.customParameters || {}\n\u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m194\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'user' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m194\u001b[0m         userId: req.user?.id,\n\u001b[7m   \u001b[0m \u001b[91m                    ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m228\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'RequestValidator'.\n\n\u001b[7m228\u001b[0m   RequestValidator.validate,\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m229\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m229\u001b[0m   async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m235\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'user' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m235\u001b[0m         userId: req.user?.id,\n\u001b[7m   \u001b[0m \u001b[91m                    ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m236\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'files' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m236\u001b[0m         documentCount: req.files?.length || 0\n\u001b[7m   \u001b[0m \u001b[91m                           ~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m239\u001b[0m:\u001b[93m16\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'files' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m239\u001b[0m       if (!req.files || req.files.length === 0) {\n\u001b[7m   \u001b[0m \u001b[91m               ~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m239\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'files' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m239\u001b[0m       if (!req.files || req.files.length === 0) {\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m247\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'files' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m247\u001b[0m       const files = req.files as Express.Multer.File[];\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m247\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2694: \u001b[0mNamespace 'global.Express' has no exported member 'Multer'.\n\n\u001b[7m247\u001b[0m       const files = req.files as Express.Multer.File[];\n\u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m260\u001b[0m:\u001b[93m15\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'fileSize' does not exist in type 'DocumentInput'.\n\n\u001b[7m260\u001b[0m               fileSize: file.size,\n\u001b[7m   \u001b[0m \u001b[91m              ~~~~~~~~\u001b[0m\n\n  \u001b[96msrc/types/contract-intelligence.types.ts\u001b[0m:\u001b[93m148\u001b[0m:\u001b[93m3\u001b[0m\n    \u001b[7m148\u001b[0m   document: DocumentInput;\n    \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~\u001b[0m\n    The expected type comes from property 'document' which is declared here on type 'ContractAnalysisRequest'\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m334\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'RequestValidator'.\n\n\u001b[7m334\u001b[0m   RequestValidator.validate,\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m342\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'user' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m342\u001b[0m         userId: req.user?.id\n\u001b[7m   \u001b[0m \u001b[91m                    ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m358\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'analysisId' comes from an index signature, so it must be accessed with ['analysisId'].\n\n\u001b[7m358\u001b[0m         analysisId: req.params.analysisId,\n\u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m378\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m378\u001b[0m   async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m         ~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m421\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'RequestValidator'.\n\n\u001b[7m421\u001b[0m   RequestValidator.validate,\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m422\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m422\u001b[0m   async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m428\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'user' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m428\u001b[0m         userId: req.user?.id,\n\u001b[7m   \u001b[0m \u001b[91m                    ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m434\u001b[0m:\u001b[93m15\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m434\u001b[0m       if (req.file) {\n\u001b[7m   \u001b[0m \u001b[91m              ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m436\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m436\u001b[0m           content: req.file.buffer.toString('utf-8'),\n\u001b[7m   \u001b[0m \u001b[91m                       ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m437\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m437\u001b[0m           fileName: req.file.originalname,\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m438\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m438\u001b[0m           fileSize: req.file.size,\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m439\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'file' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.\n\n\u001b[7m439\u001b[0m           mimeType: req.file.mimetype\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~~\u001b[0m\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m466\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType '\"internal\"' is not assignable to type '\"public\" | \"confidential\" | \"privileged\"'.\n\n\u001b[7m466\u001b[0m         confidentialityLevel: 'internal'\n\u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\n  \u001b[96msrc/types/contract-intelligence.types.ts\u001b[0m:\u001b[93m159\u001b[0m:\u001b[93m3\u001b[0m\n    \u001b[7m159\u001b[0m   confidentialityLevel: 'public' | 'confidential' | 'privileged';\n    \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    The expected type comes from property 'confidentialityLevel' which is declared here on type 'ContractAnalysisRequest'\n\u001b[96msrc/routes/contract-intelligence.routes.ts\u001b[0m:\u001b[93m522\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m522\u001b[0m   async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m         ~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/client.service.real.ts\nERROR: \u001b[96msrc/services/client.service.real.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2305: \u001b[0mModule '\"@prisma/client\"' has no exported member 'Client'.\n\n\u001b[7m6\u001b[0m import { PrismaClient, Client, ClientType, Prisma } from '@prisma/client';\n\u001b[7m \u001b[0m \u001b[91m                       ~~~~~~\u001b[0m\n\u001b[96msrc/services/client.service.real.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2305: \u001b[0mModule '\"@prisma/client\"' has no exported member 'ClientType'.\n\n\u001b[7m6\u001b[0m import { PrismaClient, Client, ClientType, Prisma } from '@prisma/client';\n\u001b[7m \u001b[0m \u001b[91m                               ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client.service.real.ts\u001b[0m:\u001b[93m156\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'page' is of type 'unknown'.\n\n\u001b[7m156\u001b[0m     const skip = (page - 1) * limit;\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~\u001b[0m\n\u001b[96msrc/services/client.service.real.ts\u001b[0m:\u001b[93m156\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'limit' is of type 'unknown'.\n\n\u001b[7m156\u001b[0m     const skip = (page - 1) * limit;\n\u001b[7m   \u001b[0m \u001b[91m                              ~~~~~\u001b[0m\n\u001b[96msrc/services/client.service.real.ts\u001b[0m:\u001b[93m159\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2694: \u001b[0mNamespace '\"/home/adel__ndawoke/Neo/node_modules/.prisma/client/default\".Prisma' has no exported member 'ClientWhereInput'.\n\n\u001b[7m159\u001b[0m     const where: Prisma.ClientWhereInput = {\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client.service.real.ts\u001b[0m:\u001b[93m186\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2464: \u001b[0mA computed property name must be of type 'string', 'number', 'symbol', or 'any'.\n\n\u001b[7m186\u001b[0m             [sortBy]: sortOrder,\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client.service.real.ts\u001b[0m:\u001b[93m196\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'client' implicitly has an 'any' type.\n\n\u001b[7m196\u001b[0m         clients.map(async (client) => {\n\u001b[7m   \u001b[0m \u001b[91m                           ~~~~~~\u001b[0m\n\u001b[96msrc/services/client.service.real.ts\u001b[0m:\u001b[93m217\u001b[0m:\u001b[93m44\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'limit' is of type 'unknown'.\n\n\u001b[7m217\u001b[0m       const totalPages = Math.ceil(total / limit);\n\u001b[7m   \u001b[0m \u001b[91m                                           ~~~~~\u001b[0m\n\u001b[96msrc/services/client.service.real.ts\u001b[0m:\u001b[93m223\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'unknown' is not assignable to type 'number'.\n\n\u001b[7m223\u001b[0m         currentPage: page,\n\u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~~~\u001b[0m\n\n  \u001b[96msrc/services/client.service.real.ts\u001b[0m:\u001b[93m151\u001b[0m:\u001b[93m5\u001b[0m\n    \u001b[7m151\u001b[0m     currentPage: number;\n    \u001b[7m   \u001b[0m \u001b[96m    ~~~~~~~~~~~\u001b[0m\n    The expected type comes from property 'currentPage' which is declared here on type '{ clients: ClientWithStats[]; total: number; totalPages: number; currentPage: number; }'\n\u001b[96msrc/services/client.service.real.ts\u001b[0m:\u001b[93m390\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m390\u001b[0m         topBillingData.map(async (item) => {\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~\u001b[0m\n\u001b[96msrc/services/client.service.real.ts\u001b[0m:\u001b[93m402\u001b[0m:\u001b[93m57\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'acc' implicitly has an 'any' type.\n\n\u001b[7m402\u001b[0m       const clientsByTypeObject = clientsByType.reduce((acc, item) => {\n\u001b[7m   \u001b[0m \u001b[91m                                                        ~~~\u001b[0m\n\u001b[96msrc/services/client.service.real.ts\u001b[0m:\u001b[93m402\u001b[0m:\u001b[93m62\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m402\u001b[0m       const clientsByTypeObject = clientsByType.reduce((acc, item) => {\n\u001b[7m   \u001b[0m \u001b[91m                                                             ~~~~\u001b[0m\n\u001b[96msrc/services/client.service.real.ts\u001b[0m:\u001b[93m408\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m408\u001b[0m       const clientsByIndustryArray = clientsByIndustry.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/ai.routes.ts\nERROR: \u001b[96msrc/routes/ai.routes.ts\u001b[0m:\u001b[93m125\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m125\u001b[0m router.get('/jurisdictions', (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                              ~~~\u001b[0m\n\u001b[96msrc/routes/ai.routes.ts\u001b[0m:\u001b[93m133\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m133\u001b[0m router.get('/languages', (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                          ~~~\u001b[0m\n\u001b[96msrc/routes/ai.routes.ts\u001b[0m:\u001b[93m331\u001b[0m:\u001b[93m55\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m331\u001b[0m     const analysis = await aiAnalysis.getAnalysisById(id, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                      ~~\u001b[0m\n\u001b[96msrc/routes/ai.routes.ts\u001b[0m:\u001b[93m352\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m352\u001b[0m router.get('/providers/status', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~\u001b[0m\n\u001b[96msrc/routes/ai.routes.ts\u001b[0m:\u001b[93m371\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m371\u001b[0m router.get('/health', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~\u001b[0m\n\u001b[96msrc/routes/ai.routes.ts\u001b[0m:\u001b[93m400\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m400\u001b[0m router.get('/capabilities', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/client-portal.service.ts\nERROR: \u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m1\u001b[0m:\u001b[93m63\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/common' or its corresponding type declarations.\n\n\u001b[7m1\u001b[0m import { Injectable, Logger, HttpException, HttpStatus } from '@nestjs/common';\n\u001b[7m \u001b[0m \u001b[91m                                                              ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m2\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/typeorm' or its corresponding type declarations.\n\n\u001b[7m2\u001b[0m import { InjectRepository } from '@nestjs/typeorm';\n\u001b[7m \u001b[0m \u001b[91m                                 ~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m3\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'typeorm' or its corresponding type declarations.\n\n\u001b[7m3\u001b[0m import { Repository, In, Between } from 'typeorm';\n\u001b[7m \u001b[0m \u001b[91m                                        ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m4\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/event-emitter' or its corresponding type declarations.\n\n\u001b[7m4\u001b[0m import { EventEmitter2 } from '@nestjs/event-emitter';\n\u001b[7m \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m5\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/config' or its corresponding type declarations.\n\n\u001b[7m5\u001b[0m import { ConfigService } from '@nestjs/config';\n\u001b[7m \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../entities/client.entity' or its corresponding type declarations.\n\n\u001b[7m6\u001b[0m import { Client } from '../entities/client.entity';\n\u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m7\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../entities/case.entity' or its corresponding type declarations.\n\n\u001b[7m7\u001b[0m import { Case } from '../entities/case.entity';\n\u001b[7m \u001b[0m \u001b[91m                     ~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m8\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../entities/document.entity' or its corresponding type declarations.\n\n\u001b[7m8\u001b[0m import { Document } from '../entities/document.entity';\n\u001b[7m \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m9\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../entities/message.entity' or its corresponding type declarations.\n\n\u001b[7m9\u001b[0m import { Message } from '../entities/message.entity';\n\u001b[7m \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m10\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../entities/payment.entity' or its corresponding type declarations.\n\n\u001b[7m10\u001b[0m import { Payment } from '../entities/payment.entity';\n\u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m11\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../entities/notification.entity' or its corresponding type declarations.\n\n\u001b[7m11\u001b[0m import { Notification } from '../entities/notification.entity';\n\u001b[7m  \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m12\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../entities/client-session.entity' or its corresponding type declarations.\n\n\u001b[7m12\u001b[0m import { ClientSession } from '../entities/client-session.entity';\n\u001b[7m  \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module './encryption.service' or its corresponding type declarations.\n\n\u001b[7m13\u001b[0m import { EncryptionService } from './encryption.service';\n\u001b[7m  \u001b[0m \u001b[91m                                  ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module './notification.service' or its corresponding type declarations.\n\n\u001b[7m14\u001b[0m import { NotificationService } from './notification.service';\n\u001b[7m  \u001b[0m \u001b[91m                                    ~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module './payment.service' or its corresponding type declarations.\n\n\u001b[7m15\u001b[0m import { PaymentService } from './payment.service';\n\u001b[7m  \u001b[0m \u001b[91m                               ~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m204\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6138: \u001b[0mProperty 'configService' is declared but its value is never read.\n\n\u001b[7m204\u001b[0m     private configService: ConfigService,\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m273\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'c' implicitly has an 'any' type.\n\n\u001b[7m273\u001b[0m         cases: cases.map(c => ({\n\u001b[7m   \u001b[0m \u001b[91m                         ~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m283\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'd' implicitly has an 'any' type.\n\n\u001b[7m283\u001b[0m         recentDocuments: recentDocuments.map(d => ({\n\u001b[7m   \u001b[0m \u001b[91m                                             ~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m291\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'm' implicitly has an 'any' type.\n\n\u001b[7m291\u001b[0m         messages: messages.map(m => ({\n\u001b[7m   \u001b[0m \u001b[91m                               ~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m300\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'p' implicitly has an 'any' type.\n\n\u001b[7m300\u001b[0m         payments: payments.map(p => ({\n\u001b[7m   \u001b[0m \u001b[91m                               ~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m309\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'n' implicitly has an 'any' type.\n\n\u001b[7m309\u001b[0m         notifications: notifications.map(n => ({\n\u001b[7m   \u001b[0m \u001b[91m                                         ~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m382\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2375: \u001b[0mType '{ caseId: string | undefined; priority: string; tags: never[]; }' is not assignable to type '{ caseId?: string; documentId?: string; priority: string; tags: string[]; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'caseId' are incompatible.\n    Type 'string | undefined' is not assignable to type 'string'.\n      Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m382\u001b[0m         metadata: {\n\u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~\u001b[0m\n\n  \u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m127\u001b[0m:\u001b[93m3\u001b[0m\n    \u001b[7m127\u001b[0m   metadata: {\n    \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~\u001b[0m\n    The expected type comes from property 'metadata' which is declared here on type 'SecureCommunication'\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m671\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 's' implicitly has an 'any' type.\n\n\u001b[7m671\u001b[0m           unique: new Set(sessions.map(s => s.sessionId)).size,\n\u001b[7m   \u001b[0m \u001b[91m                                       ~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m672\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'sum' implicitly has an 'any' type.\n\n\u001b[7m672\u001b[0m           avgDuration: sessions.reduce((sum, s) => sum + s.duration, 0) / sessions.length,\n\u001b[7m   \u001b[0m \u001b[91m                                        ~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m672\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 's' implicitly has an 'any' type.\n\n\u001b[7m672\u001b[0m           avgDuration: sessions.reduce((sum, s) => sum + s.duration, 0) / sessions.length,\n\u001b[7m   \u001b[0m \u001b[91m                                             ~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m705\u001b[0m:\u001b[93m52\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 't' implicitly has an 'any' type.\n\n\u001b[7m705\u001b[0m     const completedTasks = caseEntity.tasks.filter(t => t.status === 'completed').length;\n\u001b[7m   \u001b[0m \u001b[91m                                                   ~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m709\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m709\u001b[0m   private async getUpcomingAppointments(clientId: string) {\n\u001b[7m   \u001b[0m \u001b[91m                                        ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m714\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'communication' is declared but its value is never read.\n\n\u001b[7m714\u001b[0m   private async saveSecureCommunication(communication: SecureCommunication) {\n\u001b[7m   \u001b[0m \u001b[91m                                        ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m718\u001b[0m:\u001b[93m43\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'collaboration' is declared but its value is never read.\n\n\u001b[7m718\u001b[0m   private async saveDocumentCollaboration(collaboration: DocumentCollaboration) {\n\u001b[7m   \u001b[0m \u001b[91m                                          ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m722\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m722\u001b[0m   private async getPortalConfig(clientId: string): Promise<ClientPortalConfig> {\n\u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m727\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'config' is declared but its value is never read.\n\n\u001b[7m727\u001b[0m   private async validatePortalConfig(config: ClientPortalConfig) {\n\u001b[7m   \u001b[0m \u001b[91m                                     ~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m731\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m731\u001b[0m   private async savePortalConfig(clientId: string, config: ClientPortalConfig) {\n\u001b[7m   \u001b[0m \u001b[91m                                 ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m731\u001b[0m:\u001b[93m52\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'config' is declared but its value is never read.\n\n\u001b[7m731\u001b[0m   private async savePortalConfig(clientId: string, config: ClientPortalConfig) {\n\u001b[7m   \u001b[0m \u001b[91m                                                   ~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m735\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m735\u001b[0m   private async getDocumentsViewed(clientId: string, dateRange: { start: Date; end: Date }) {\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m735\u001b[0m:\u001b[93m54\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'dateRange' is declared but its value is never read.\n\n\u001b[7m735\u001b[0m   private async getDocumentsViewed(clientId: string, dateRange: { start: Date; end: Date }) {\n\u001b[7m   \u001b[0m \u001b[91m                                                     ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m740\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m740\u001b[0m   private async getMessagesCount(clientId: string, dateRange: { start: Date; end: Date }) {\n\u001b[7m   \u001b[0m \u001b[91m                                 ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m740\u001b[0m:\u001b[93m52\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'dateRange' is declared but its value is never read.\n\n\u001b[7m740\u001b[0m   private async getMessagesCount(clientId: string, dateRange: { start: Date; end: Date }) {\n\u001b[7m   \u001b[0m \u001b[91m                                                   ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m745\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m745\u001b[0m   private async getPaymentsCount(clientId: string, dateRange: { start: Date; end: Date }) {\n\u001b[7m   \u001b[0m \u001b[91m                                 ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m745\u001b[0m:\u001b[93m52\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'dateRange' is declared but its value is never read.\n\n\u001b[7m745\u001b[0m   private async getPaymentsCount(clientId: string, dateRange: { start: Date; end: Date }) {\n\u001b[7m   \u001b[0m \u001b[91m                                                   ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m750\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m750\u001b[0m   private async getActivityByHour(clientId: string, dateRange: { start: Date; end: Date }) {\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m750\u001b[0m:\u001b[93m53\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'dateRange' is declared but its value is never read.\n\n\u001b[7m750\u001b[0m   private async getActivityByHour(clientId: string, dateRange: { start: Date; end: Date }) {\n\u001b[7m   \u001b[0m \u001b[91m                                                    ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m755\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m755\u001b[0m   private async getActivityByDay(clientId: string, dateRange: { start: Date; end: Date }) {\n\u001b[7m   \u001b[0m \u001b[91m                                 ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m755\u001b[0m:\u001b[93m52\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'dateRange' is declared but its value is never read.\n\n\u001b[7m755\u001b[0m   private async getActivityByDay(clientId: string, dateRange: { start: Date; end: Date }) {\n\u001b[7m   \u001b[0m \u001b[91m                                                   ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m760\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m760\u001b[0m   private async getTopFeatures(clientId: string, dateRange: { start: Date; end: Date }) {\n\u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m760\u001b[0m:\u001b[93m50\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'dateRange' is declared but its value is never read.\n\n\u001b[7m760\u001b[0m   private async getTopFeatures(clientId: string, dateRange: { start: Date; end: Date }) {\n\u001b[7m   \u001b[0m \u001b[91m                                                 ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m765\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m765\u001b[0m   private async getClientSatisfactionRating(clientId: string) {\n\u001b[7m   \u001b[0m \u001b[91m                                            ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m770\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m770\u001b[0m   private async getClientFeedback(clientId: string, dateRange: { start: Date; end: Date }) {\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client-portal.service.ts\u001b[0m:\u001b[93m770\u001b[0m:\u001b[93m53\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'dateRange' is declared but its value is never read.\n\n\u001b[7m770\u001b[0m   private async getClientFeedback(clientId: string, dateRange: { start: Date; end: Date }) {\n\u001b[7m   \u001b[0m \u001b[91m                                                    ~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/auth.service.ts\nERROR: \u001b[96msrc/services/auth.service.ts\u001b[0m:\u001b[93m83\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n\u001b[7m83\u001b[0m     this.jwtSecret = process.env.JWT_SECRET || 'your-secret-key';\n\u001b[7m  \u001b[0m \u001b[91m                                 ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/auth.service.ts\u001b[0m:\u001b[93m84\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n\u001b[7m84\u001b[0m     this.jwtRefreshSecret = process.env.JWT_REFRESH_SECRET || 'your-refresh-secret-key';\n\u001b[7m  \u001b[0m \u001b[91m                                        ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/auth.service.ts\u001b[0m:\u001b[93m85\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n\u001b[7m85\u001b[0m     this.jwtExpiresIn = process.env.JWT_EXPIRES_IN || '24h';\n\u001b[7m  \u001b[0m \u001b[91m                                    ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/auth.service.ts\u001b[0m:\u001b[93m86\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'REFRESH_TOKEN_EXPIRES_IN' comes from an index signature, so it must be accessed with ['REFRESH_TOKEN_EXPIRES_IN'].\n\n\u001b[7m86\u001b[0m     this.refreshTokenExpiresIn = process.env.REFRESH_TOKEN_EXPIRES_IN || '7d';\n\u001b[7m  \u001b[0m \u001b[91m                                             ~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/auth.service.ts\u001b[0m:\u001b[93m87\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_ROUNDS'].\n\n\u001b[7m87\u001b[0m     this.bcryptRounds = parseInt(process.env.BCRYPT_ROUNDS || '12');\n\u001b[7m  \u001b[0m \u001b[91m                                             ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/auth.service.ts\u001b[0m:\u001b[93m473\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: null, options?: (SignOptions & { algorithm: \"none\"; }) | undefined): string', gave the following error.\n    Argument of type 'string' is not assignable to parameter of type 'null'.\n  Overload 2 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: Secret | Buffer<ArrayBufferLike> | JsonWebKeyInput | PrivateKeyInput, options?: SignOptions | undefined): string', gave the following error.\n    Type 'string' is not assignable to type 'number | StringValue | undefined'.\n  Overload 3 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: Secret | Buffer<ArrayBufferLike> | JsonWebKeyInput | PrivateKeyInput, callback: SignCallback): void', gave the following error.\n    Object literal may only specify known properties, and 'expiresIn' does not exist in type 'SignCallback'.\n\n\u001b[7m473\u001b[0m     const accessToken = jwt.sign(\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~\u001b[0m\n\n\u001b[96msrc/services/auth.service.ts\u001b[0m:\u001b[93m479\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: null, options?: (SignOptions & { algorithm: \"none\"; }) | undefined): string', gave the following error.\n    Argument of type 'string' is not assignable to parameter of type 'null'.\n  Overload 2 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: Secret | Buffer<ArrayBufferLike> | JsonWebKeyInput | PrivateKeyInput, options?: SignOptions | undefined): string', gave the following error.\n    Type 'string' is not assignable to type 'number | StringValue | undefined'.\n  Overload 3 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: Secret | Buffer<ArrayBufferLike> | JsonWebKeyInput | PrivateKeyInput, callback: SignCallback): void', gave the following error.\n    Object literal may only specify known properties, and 'expiresIn' does not exist in type 'SignCallback'.\n\n\u001b[7m479\u001b[0m     const refreshToken = jwt.sign(\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/dispute.routes.ts\nERROR: \u001b[96msrc/routes/dispute.routes.ts\u001b[0m:\u001b[93m88\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m88\u001b[0m router.get('/search', async (req: AuthenticatedRequest, res) => {\n\u001b[7m  \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/dispute.routes.ts\u001b[0m:\u001b[93m124\u001b[0m:\u001b[93m57\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m124\u001b[0m     const dispute = await DisputeService.getDisputeById(id, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                        ~~\u001b[0m\n\u001b[96msrc/routes/dispute.routes.ts\u001b[0m:\u001b[93m147\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m147\u001b[0m     const dispute = await DisputeService.updateDispute(id, updateData, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                       ~~\u001b[0m\n\u001b[96msrc/routes/dispute.routes.ts\u001b[0m:\u001b[93m172\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m172\u001b[0m router.patch('/:id/status', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/dispute.routes.ts\u001b[0m:\u001b[93m185\u001b[0m:\u001b[93m62\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m185\u001b[0m     const dispute = await DisputeService.updateDisputeStatus(id, status, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                             ~~\u001b[0m\n\u001b[96msrc/routes/dispute.routes.ts\u001b[0m:\u001b[93m202\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m202\u001b[0m router.patch('/:id/deadlines', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/dispute.routes.ts\u001b[0m:\u001b[93m224\u001b[0m:\u001b[93m58\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m224\u001b[0m     const dispute = await DisputeService.updateDeadlines(id, validatedDeadlines, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                         ~~\u001b[0m\n\u001b[96msrc/routes/dispute.routes.ts\u001b[0m:\u001b[93m249\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m249\u001b[0m router.patch('/:id/assign-lawyer', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/dispute.routes.ts\u001b[0m:\u001b[93m262\u001b[0m:\u001b[93m55\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m262\u001b[0m     const dispute = await DisputeService.assignLawyer(id, lawyerId, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                      ~~\u001b[0m\n\u001b[96msrc/routes/dispute.routes.ts\u001b[0m:\u001b[93m284\u001b[0m:\u001b[93m55\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m284\u001b[0m     const result = await DisputeService.deleteDispute(id, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                      ~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/ai-legal-assistant.service.ts\nERROR: \u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m1\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/common' or its corresponding type declarations.\n\n\u001b[7m1\u001b[0m import { Injectable, Logger } from '@nestjs/common';\n\u001b[7m \u001b[0m \u001b[91m                                   ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m2\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/config' or its corresponding type declarations.\n\n\u001b[7m2\u001b[0m import { ConfigService } from '@nestjs/config';\n\u001b[7m \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m3\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/event-emitter' or its corresponding type declarations.\n\n\u001b[7m3\u001b[0m import { EventEmitter2 } from '@nestjs/event-emitter';\n\u001b[7m \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m5\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'fs' is declared but its value is never read.\n\n\u001b[7m5\u001b[0m import * as fs from 'fs/promises';\n\u001b[7m \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'path' is declared but its value is never read.\n\n\u001b[7m6\u001b[0m import * as path from 'path';\n\u001b[7m \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m128\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2709: \u001b[0mCannot use namespace 'OpenAI' as a type.\n\n\u001b[7m128\u001b[0m   private openai: OpenAI;\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m148\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2351: \u001b[0mThis expression is not constructable.\n  Type 'typeof import(\"/home/adel__ndawoke/Neo/node_modules/openai/index\")' has no construct signatures.\n\n\u001b[7m148\u001b[0m     this.openai = new OpenAI({\n\u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m190\u001b[0m:\u001b[93m70\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m190\u001b[0m       this.logger.error(`Failed to process legal query ${queryId}: ${error.message}`);\n\u001b[7m   \u001b[0m \u001b[91m                                                                     ~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m191\u001b[0m:\u001b[93m68\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m191\u001b[0m       this.eventEmitter.emit('legal-query.failed', { query, error: error.message });\n\u001b[7m   \u001b[0m \u001b[91m                                                                   ~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m260\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m260\u001b[0m       this.logger.error(`OpenAI API error: ${error.message}`);\n\u001b[7m   \u001b[0m \u001b[91m                                             ~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m371\u001b[0m:\u001b[93m54\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m371\u001b[0m       this.logger.error(`Document analysis failed: ${error.message}`);\n\u001b[7m   \u001b[0m \u001b[91m                                                     ~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m417\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m417\u001b[0m       this.logger.error(`OpenAI document analysis error: ${error.message}`);\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m497\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m497\u001b[0m       this.logger.error(`Research task failed ${taskId}: ${error.message}`);\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m498\u001b[0m:\u001b[93m69\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m498\u001b[0m       this.eventEmitter.emit('research-task.failed', { task, error: error.message });\n\u001b[7m   \u001b[0m \u001b[91m                                                                    ~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m562\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'response' is declared but its value is never read.\n\n\u001b[7m562\u001b[0m   private async generateRecommendations(query: LegalQuery, response: string): Promise<string[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m578\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'query' is declared but its value is never read.\n\n\u001b[7m578\u001b[0m   private async generateNextSteps(query: LegalQuery, response: string): Promise<string[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m578\u001b[0m:\u001b[93m54\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'response' is declared but its value is never read.\n\n\u001b[7m578\u001b[0m   private async generateNextSteps(query: LegalQuery, response: string): Promise<string[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                                     ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m601\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'query' is declared but its value is never read.\n\n\u001b[7m601\u001b[0m   private async findRelatedCases(query: LegalQuery): Promise<string[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                 ~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m614\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2532: \u001b[0mObject is possibly 'undefined'.\n\n\u001b[7m614\u001b[0m     return match ? match[1].trim() : null;\n\u001b[7m   \u001b[0m \u001b[91m                   ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-legal-assistant.service.ts\u001b[0m:\u001b[93m623\u001b[0m:\u001b[93m12\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2532: \u001b[0mObject is possibly 'undefined'.\n\n\u001b[7m623\u001b[0m     return match[1]\n\u001b[7m   \u001b[0m \u001b[91m           ~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/ai-service.ts\nERROR: \u001b[96msrc/services/ai-service.ts\u001b[0m:\u001b[93m156\u001b[0m:\u001b[93m39\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'messages' does not exist on type 'Anthropic'.\n\n\u001b[7m156\u001b[0m       const message = await anthropic.messages.create({\n\u001b[7m   \u001b[0m \u001b[91m                                      ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-service.ts\u001b[0m:\u001b[93m195\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m195\u001b[0m   async process(request: AIRequest): Promise<AIResponse> {\n\u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/ai-gateway.service.ts\nERROR: \u001b[96msrc/services/ai-gateway.service.ts\u001b[0m:\u001b[93m64\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'OLLAMA_BASE_URL' comes from an index signature, so it must be accessed with ['OLLAMA_BASE_URL'].\n\n\u001b[7m64\u001b[0m         baseURL: process.env.OLLAMA_BASE_URL || 'http://localhost:11434'\n\u001b[7m  \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.service.ts\u001b[0m:\u001b[93m68\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'LEGAL_BERT_MODEL_PATH' comes from an index signature, so it must be accessed with ['LEGAL_BERT_MODEL_PATH'].\n\n\u001b[7m68\u001b[0m         modelPath: process.env.LEGAL_BERT_MODEL_PATH || './models/legal-bert'\n\u001b[7m  \u001b[0m \u001b[91m                               ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.service.ts\u001b[0m:\u001b[93m74\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'OPENAI_API_KEY' comes from an index signature, so it must be accessed with ['OPENAI_API_KEY'].\n\n\u001b[7m74\u001b[0m         apiKey: process.env.OPENAI_API_KEY\n\u001b[7m  \u001b[0m \u001b[91m                            ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.service.ts\u001b[0m:\u001b[93m78\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ANTHROPIC_API_KEY' comes from an index signature, so it must be accessed with ['ANTHROPIC_API_KEY'].\n\n\u001b[7m78\u001b[0m         apiKey: process.env.ANTHROPIC_API_KEY\n\u001b[7m  \u001b[0m \u001b[91m                            ~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.service.ts\u001b[0m:\u001b[93m82\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'GOOGLE_API_KEY' comes from an index signature, so it must be accessed with ['GOOGLE_API_KEY'].\n\n\u001b[7m82\u001b[0m         apiKey: process.env.GOOGLE_API_KEY\n\u001b[7m  \u001b[0m \u001b[91m                            ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.service.ts\u001b[0m:\u001b[93m90\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'OPENAI_API_KEY' comes from an index signature, so it must be accessed with ['OPENAI_API_KEY'].\n\n\u001b[7m90\u001b[0m       if (process.env.OPENAI_API_KEY) {\n\u001b[7m  \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.service.ts\u001b[0m:\u001b[93m93\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ANTHROPIC_API_KEY' comes from an index signature, so it must be accessed with ['ANTHROPIC_API_KEY'].\n\n\u001b[7m93\u001b[0m       if (process.env.ANTHROPIC_API_KEY) {\n\u001b[7m  \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.service.ts\u001b[0m:\u001b[93m96\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'GOOGLE_API_KEY' comes from an index signature, so it must be accessed with ['GOOGLE_API_KEY'].\n\n\u001b[7m96\u001b[0m       if (process.env.GOOGLE_API_KEY) {\n\u001b[7m  \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.service.ts\u001b[0m:\u001b[93m216\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'AIProvider | undefined' is not assignable to type 'AIProvider'.\n  Type 'undefined' is not assignable to type 'AIProvider'.\n\n\u001b[7m216\u001b[0m     return availableProviders[0];\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.service.ts\u001b[0m:\u001b[93m269\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2698: \u001b[0mSpread types may only be created from object types.\n\n\u001b[7m269\u001b[0m         ...result,\n\u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/ai-analysis.service.ts\nERROR: \u001b[96msrc/services/ai-analysis.service.ts\u001b[0m:\u001b[93m7\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'AIProvider' is declared but its value is never read.\n\n\u001b[7m7\u001b[0m import { AIAnalysisType, AIProvider, LegalJurisdiction } from '../types/ai.types';\n\u001b[7m \u001b[0m \u001b[91m                         ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-analysis.service.ts\u001b[0m:\u001b[93m117\u001b[0m:\u001b[93m85\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'GENERAL' does not exist on type 'typeof LegalJurisdiction'.\n\n\u001b[7m117\u001b[0m         jurisdiction: (data.jurisdiction as LegalJurisdiction) || LegalJurisdiction.GENERAL\n\u001b[7m   \u001b[0m \u001b[91m                                                                                    ~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-analysis.service.ts\u001b[0m:\u001b[93m121\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ type: AIAnalysisType; input: { contractTitle: any; contractDescription: any; contractType: any; contractValue: any; currency: any; startDate: any; endDate: any; clientInfo: any; focusAreas: string[]; jurisdiction: string; }; context: { ...; }; language: string; jurisdiction: LegalJurisdiction; }' is not assignable to parameter of type '{ type: AIAnalysisType; options?: { temperature?: number | undefined; maxTokens?: number | undefined; timeout?: number | undefined; streaming?: boolean | undefined; cacheEnabled?: boolean | undefined; fallbackProvider?: AIProvider | undefined; } | undefined; provider?: AIProvider | undefined; model?: string | undefi...'.\n  Types of property 'context' are incompatible.\n    Type '{ analysisType: \"RISK_ASSESSMENT\" | \"CLAUSE_EXTRACTION\" | \"COMPLIANCE_CHECK\" | \"KEY_TERMS\"; practiceArea: string; jurisdiction: LegalJurisdiction; }' is missing the following properties from type '{ jurisdiction: LegalJurisdiction; practiceArea: string; legalSystem: LegalSystem; language: SupportedLanguage; confidentialityLevel: \"public\" | ... 1 more ... | \"privileged\"; }': legalSystem, language, confidentialityLevel\n\n\u001b[7m121\u001b[0m       const aiResult = await this.aiGateway.processRequest(aiRequest, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-analysis.service.ts\u001b[0m:\u001b[93m195\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'DOCUMENT_SUMMARY' does not exist on type 'typeof AIAnalysisType'.\n\n\u001b[7m195\u001b[0m         type: AIAnalysisType.DOCUMENT_SUMMARY,\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-analysis.service.ts\u001b[0m:\u001b[93m209\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'GENERAL' does not exist on type 'typeof LegalJurisdiction'.\n\n\u001b[7m209\u001b[0m         jurisdiction: LegalJurisdiction.GENERAL\n\u001b[7m   \u001b[0m \u001b[91m                                        ~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-analysis.service.ts\u001b[0m:\u001b[93m213\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ type: any; input: { documentTitle: any; documentDescription: any; documentType: any; fileType: any; extractionTargets: string[]; }; context: { analysisType: \"COMPLIANCE_CHECK\" | \"CONTENT_SUMMARY\" | \"KEY_POINTS\" | \"RISK_ANALYSIS\"; relatedContract: any; relatedMatter: any; }; language: string; jurisdiction: any; }' is not assignable to parameter of type '{ type: AIAnalysisType; options?: { temperature?: number | undefined; maxTokens?: number | undefined; timeout?: number | undefined; streaming?: boolean | undefined; cacheEnabled?: boolean | undefined; fallbackProvider?: AIProvider | undefined; } | undefined; provider?: AIProvider | undefined; model?: string | undefi...'.\n  Types of property 'context' are incompatible.\n    Type '{ analysisType: \"COMPLIANCE_CHECK\" | \"CONTENT_SUMMARY\" | \"KEY_POINTS\" | \"RISK_ANALYSIS\"; relatedContract: any; relatedMatter: any; }' is missing the following properties from type '{ jurisdiction: LegalJurisdiction; practiceArea: string; legalSystem: LegalSystem; language: SupportedLanguage; confidentialityLevel: \"public\" | ... 1 more ... | \"privileged\"; }': jurisdiction, practiceArea, legalSystem, language, confidentialityLevel\n\n\u001b[7m213\u001b[0m       const aiResult = await this.aiGateway.processRequest(aiRequest, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-analysis.service.ts\u001b[0m:\u001b[93m272\u001b[0m:\u001b[93m85\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'GENERAL' does not exist on type 'typeof LegalJurisdiction'.\n\n\u001b[7m272\u001b[0m         jurisdiction: (data.jurisdiction as LegalJurisdiction) || LegalJurisdiction.GENERAL\n\u001b[7m   \u001b[0m \u001b[91m                                                                                    ~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-analysis.service.ts\u001b[0m:\u001b[93m276\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ type: AIAnalysisType; input: { query: string; practiceArea: string | undefined; sources: string[]; dateRange: { from?: string | undefined; to?: string | undefined; } | undefined; }; context: { ...; }; language: string; jurisdiction: LegalJurisdiction; }' is not assignable to parameter of type '{ type: AIAnalysisType; options?: { temperature?: number | undefined; maxTokens?: number | undefined; timeout?: number | undefined; streaming?: boolean | undefined; cacheEnabled?: boolean | undefined; fallbackProvider?: AIProvider | undefined; } | undefined; provider?: AIProvider | undefined; model?: string | undefi...'.\n  Types of property 'context' are incompatible.\n    Type '{ jurisdiction: string | undefined; researchType: string; }' is missing the following properties from type '{ jurisdiction: LegalJurisdiction; practiceArea: string; legalSystem: LegalSystem; language: SupportedLanguage; confidentialityLevel: \"public\" | ... 1 more ... | \"privileged\"; }': practiceArea, legalSystem, language, confidentialityLevel\n\n\u001b[7m276\u001b[0m       const aiResult = await this.aiGateway.processRequest(aiRequest, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-analysis.service.ts\u001b[0m:\u001b[93m369\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'GENERAL' does not exist on type 'typeof LegalJurisdiction'.\n\n\u001b[7m369\u001b[0m         jurisdiction: LegalJurisdiction.GENERAL\n\u001b[7m   \u001b[0m \u001b[91m                                        ~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-analysis.service.ts\u001b[0m:\u001b[93m373\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ type: AIAnalysisType; input: { matterTitle: any; matterType: any; matterStatus: any; priority: any; riskLevel: any; estimatedValue: any; billableHours: any; clientInfo: any; disputes: any; documentsCount: any; factorsToConsider: string[]; }; context: { ...; }; language: string; jurisdiction: any; }' is not assignable to parameter of type '{ type: AIAnalysisType; options?: { temperature?: number | undefined; maxTokens?: number | undefined; timeout?: number | undefined; streaming?: boolean | undefined; cacheEnabled?: boolean | undefined; fallbackProvider?: AIProvider | undefined; } | undefined; provider?: AIProvider | undefined; model?: string | undefi...'.\n  Types of property 'context' are incompatible.\n    Type '{ predictionType: \"OUTCOME\" | \"DURATION\" | \"COST\" | \"SETTLEMENT_RANGE\"; practiceArea: any; }' is missing the following properties from type '{ jurisdiction: LegalJurisdiction; practiceArea: string; legalSystem: LegalSystem; language: SupportedLanguage; confidentialityLevel: \"public\" | ... 1 more ... | \"privileged\"; }': jurisdiction, legalSystem, language, confidentialityLevel\n\n\u001b[7m373\u001b[0m       const aiResult = await this.aiGateway.processRequest(aiRequest, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-analysis.service.ts\u001b[0m:\u001b[93m496\u001b[0m:\u001b[93m85\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'GENERAL' does not exist on type 'typeof LegalJurisdiction'.\n\n\u001b[7m496\u001b[0m         jurisdiction: (data.jurisdiction as LegalJurisdiction) || LegalJurisdiction.GENERAL\n\u001b[7m   \u001b[0m \u001b[91m                                                                                    ~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-analysis.service.ts\u001b[0m:\u001b[93m500\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ type: AIAnalysisType; input: { entityType: \"CONTRACT\" | \"MATTER\" | \"DOCUMENT\"; entityData: any; regulations: string[]; jurisdiction: string | undefined; }; context: { complianceScope: string; }; language: string; jurisdiction: LegalJurisdiction; }' is not assignable to parameter of type '{ type: AIAnalysisType; options?: { temperature?: number | undefined; maxTokens?: number | undefined; timeout?: number | undefined; streaming?: boolean | undefined; cacheEnabled?: boolean | undefined; fallbackProvider?: AIProvider | undefined; } | undefined; provider?: AIProvider | undefined; model?: string | undefi...'.\n  Types of property 'context' are incompatible.\n    Type '{ complianceScope: string; }' is missing the following properties from type '{ jurisdiction: LegalJurisdiction; practiceArea: string; legalSystem: LegalSystem; language: SupportedLanguage; confidentialityLevel: \"public\" | ... 1 more ... | \"privileged\"; }': jurisdiction, practiceArea, legalSystem, language, confidentialityLevel\n\n\u001b[7m500\u001b[0m       const aiResult = await this.aiGateway.processRequest(aiRequest, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-analysis.service.ts\u001b[0m:\u001b[93m602\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'analysis' implicitly has an 'any' type.\n\n\u001b[7m602\u001b[0m       return analyses.map(analysis => ({\n\u001b[7m   \u001b[0m \u001b[91m                          ~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/api-management.service.ts\nERROR: \u001b[96msrc/services/api-management.service.ts\u001b[0m:\u001b[93m1\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/common' or its corresponding type declarations.\n\n\u001b[7m1\u001b[0m import { Injectable, Logger } from '@nestjs/common';\n\u001b[7m \u001b[0m \u001b[91m                                   ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/api-management.service.ts\u001b[0m:\u001b[93m2\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/config' or its corresponding type declarations.\n\n\u001b[7m2\u001b[0m import { ConfigService } from '@nestjs/config';\n\u001b[7m \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/api-management.service.ts\u001b[0m:\u001b[93m3\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/event-emitter' or its corresponding type declarations.\n\n\u001b[7m3\u001b[0m import { EventEmitter2 } from '@nestjs/event-emitter';\n\u001b[7m \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/api-management.service.ts\u001b[0m:\u001b[93m4\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'swagger-jsdoc' or its corresponding type declarations.\n\n\u001b[7m4\u001b[0m import * as swaggerJsdoc from 'swagger-jsdoc';\n\u001b[7m \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/api-management.service.ts\u001b[0m:\u001b[93m5\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'swagger-ui-express' or its corresponding type declarations.\n\n\u001b[7m5\u001b[0m import * as swaggerUi from 'swagger-ui-express';\n\u001b[7m \u001b[0m \u001b[91m                           ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/api-management.service.ts\u001b[0m:\u001b[93m368\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m368\u001b[0m     app.get('/api-docs.json', (req, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                               ~~~\u001b[0m\n\u001b[96msrc/services/api-management.service.ts\u001b[0m:\u001b[93m390\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2375: \u001b[0mType '{ id: `${string}-${string}-${string}-${string}-${string}`; name: string; key: string; secret: string; permissions: string[]; rateLimit: { requests: number; window: number; }; allowedIPs: string[] | undefined; expiresAt: Date | undefined; isActive: true; metadata: Record<...> | undefined; }' is not assignable to type 'ApiKey' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'allowedIPs' are incompatible.\n    Type 'string[] | undefined' is not assignable to type 'string[]'.\n      Type 'undefined' is not assignable to type 'string[]'.\n\n\u001b[7m390\u001b[0m     const apiKey: ApiKey = {\n\u001b[7m   \u001b[0m \u001b[91m          ~~~~~~\u001b[0m\n\u001b[96msrc/services/api-management.service.ts\u001b[0m:\u001b[93m587\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: null, options?: (SignOptions & { algorithm: \"none\"; }) | undefined): string', gave the following error.\n    Type 'string' is not assignable to type 'number | StringValue | undefined'.\n  Overload 2 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: Buffer<ArrayBufferLike> | Secret | PrivateKeyInput | JsonWebKeyInput, options?: SignOptions | undefined): string', gave the following error.\n    Type 'string' is not assignable to type 'number | StringValue | undefined'.\n  Overload 3 of 5, '(payload: string | object | Buffer<ArrayBufferLike>, secretOrPrivateKey: Buffer<ArrayBufferLike> | Secret | PrivateKeyInput | JsonWebKeyInput, callback: SignCallback): void', gave the following error.\n    Object literal may only specify known properties, and 'expiresIn' does not exist in type 'SignCallback'.\n\n\u001b[7m587\u001b[0m       expiresIn: options?.expiresIn || '24h',\n\u001b[7m   \u001b[0m \u001b[91m      ~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/matter.routes.ts\nERROR: \u001b[96msrc/routes/matter.routes.ts\u001b[0m:\u001b[93m88\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m88\u001b[0m router.get('/search', async (req: AuthenticatedRequest, res) => {\n\u001b[7m  \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/matter.routes.ts\u001b[0m:\u001b[93m124\u001b[0m:\u001b[93m54\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m124\u001b[0m     const matter = await MatterService.getMatterById(id, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                     ~~\u001b[0m\n\u001b[96msrc/routes/matter.routes.ts\u001b[0m:\u001b[93m147\u001b[0m:\u001b[93m53\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m147\u001b[0m     const matter = await MatterService.updateMatter(id, updateData, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                    ~~\u001b[0m\n\u001b[96msrc/routes/matter.routes.ts\u001b[0m:\u001b[93m172\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m172\u001b[0m router.patch('/:id/status', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/matter.routes.ts\u001b[0m:\u001b[93m185\u001b[0m:\u001b[93m59\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m185\u001b[0m     const matter = await MatterService.updateMatterStatus(id, status, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                          ~~\u001b[0m\n\u001b[96msrc/routes/matter.routes.ts\u001b[0m:\u001b[93m202\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m202\u001b[0m router.patch('/:id/billable-hours', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/matter.routes.ts\u001b[0m:\u001b[93m215\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m215\u001b[0m     const matter = await MatterService.updateBillableHours(id, hours, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~\u001b[0m\n\u001b[96msrc/routes/matter.routes.ts\u001b[0m:\u001b[93m232\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m232\u001b[0m router.patch('/:id/assign-lawyer', async (req: AuthenticatedRequest, res) => {\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/matter.routes.ts\u001b[0m:\u001b[93m245\u001b[0m:\u001b[93m53\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m245\u001b[0m     const matter = await MatterService.assignLawyer(id, lawyerId, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                    ~~\u001b[0m\n\u001b[96msrc/routes/matter.routes.ts\u001b[0m:\u001b[93m267\u001b[0m:\u001b[93m53\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m267\u001b[0m     const result = await MatterService.deleteMatter(id, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                    ~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/contract.service.ts\nERROR: \u001b[96msrc/services/contract.service.ts\u001b[0m:\u001b[93m221\u001b[0m:\u001b[93m47\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'contract' implicitly has an 'any' type.\n\n\u001b[7m221\u001b[0m       const contractsWithTags = contracts.map(contract => ({\n\u001b[7m   \u001b[0m \u001b[91m                                              ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/contract.service.ts\u001b[0m:\u001b[93m526\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m526\u001b[0m         byStatus: contractsByStatus.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                        ~~~~\u001b[0m\n\u001b[96msrc/services/contract.service.ts\u001b[0m:\u001b[93m530\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m530\u001b[0m         byRiskLevel: contractsByRisk.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                         ~~~~\u001b[0m\n\u001b[96msrc/services/contract.service.ts\u001b[0m:\u001b[93m534\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m534\u001b[0m         monthlyTrend: monthlyTrend.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~\u001b[0m\n\u001b[96msrc/services/contract.service.ts\u001b[0m:\u001b[93m575\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'contract' implicitly has an 'any' type.\n\n\u001b[7m575\u001b[0m       return contracts.map(contract => ({\n\u001b[7m   \u001b[0m \u001b[91m                           ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/contract.service.ts\u001b[0m:\u001b[93m725\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m725\u001b[0m         byType: contractsByType.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                    ~~~~\u001b[0m\n\u001b[96msrc/services/contract.service.ts\u001b[0m:\u001b[93m729\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m729\u001b[0m         byStatus: contractsByStatus.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                        ~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/email.service.ts\nERROR: \u001b[96msrc/services/email.service.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'nodemailer' or its corresponding type declarations.\n\n\u001b[7m6\u001b[0m import nodemailer from 'nodemailer';\n\u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/email.service.ts\u001b[0m:\u001b[93m31\u001b[0m:\u001b[93m52\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'SMTP_PASS' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m31\u001b[0m       if (!env.SMTP_HOST || !env.SMTP_USER || !env.SMTP_PASS) {\n\u001b[7m  \u001b[0m \u001b[91m                                                   ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/email.service.ts\u001b[0m:\u001b[93m42\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'SMTP_PASS' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m42\u001b[0m           pass: env.SMTP_PASS,\n\u001b[7m  \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/email.service.ts\u001b[0m:\u001b[93m67\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'EMAIL_FROM' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m67\u001b[0m         from: env.EMAIL_FROM || 'CounselFlow <noreply@counselflow.com>',\n\u001b[7m  \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/email.service.ts\u001b[0m:\u001b[93m97\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'APP_URL' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m97\u001b[0m     const resetUrl = `${env.APP_URL || 'http://localhost:3000'}/auth/reset-password?token=${resetToken}`;\n\u001b[7m  \u001b[0m \u001b[91m                            ~~~~~~~\u001b[0m\n\u001b[96msrc/services/email.service.ts\u001b[0m:\u001b[93m129\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'APP_URL' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m129\u001b[0m     const verificationUrl = `${env.APP_URL || 'http://localhost:3000'}/auth/verify-email?token=${verificationToken}`;\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~~~\u001b[0m\n\u001b[96msrc/services/email.service.ts\u001b[0m:\u001b[93m261\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'APP_URL' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m261\u001b[0m               <a href=\"${env.APP_URL || 'http://localhost:3000'}/dashboard\" class=\"button\">Access Your Dashboard</a>\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~~\u001b[0m\n\u001b[96msrc/services/email.service.ts\u001b[0m:\u001b[93m289\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'APP_URL' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m289\u001b[0m Access your dashboard at: ${env.APP_URL || 'http://localhost:3000'}/dashboard\n\u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/dashboard.service.ts\nERROR: \u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m159\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7034: \u001b[0mVariable 'alerts' implicitly has type 'any[]' in some locations where its type cannot be determined.\n\n\u001b[7m159\u001b[0m       const alerts = [];\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m183\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'contract' implicitly has an 'any' type.\n\n\u001b[7m183\u001b[0m       expiringContracts.forEach(contract => {\n\u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m215\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'matter' implicitly has an 'any' type.\n\n\u001b[7m215\u001b[0m       overdueMatters.forEach(matter => {\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m245\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'dispute' implicitly has an 'any' type.\n\n\u001b[7m245\u001b[0m       highRiskDisputes.forEach(dispute => {\n\u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m258\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7005: \u001b[0mVariable 'alerts' implicitly has an 'any[]' type.\n\n\u001b[7m258\u001b[0m       alerts.sort((a, b) => priorityOrder[a.priority as keyof typeof priorityOrder] - priorityOrder[b.priority as keyof typeof priorityOrder]);\n\u001b[7m   \u001b[0m \u001b[91m      ~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m260\u001b[0m:\u001b[93m14\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7005: \u001b[0mVariable 'alerts' implicitly has an 'any[]' type.\n\n\u001b[7m260\u001b[0m       return alerts.slice(0, 10); // Return top 10 alerts\n\u001b[7m   \u001b[0m \u001b[91m             ~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m269\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7034: \u001b[0mVariable 'activities' implicitly has type 'any[]' in some locations where its type cannot be determined.\n\n\u001b[7m269\u001b[0m       const activities = [];\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m291\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'contract' implicitly has an 'any' type.\n\n\u001b[7m291\u001b[0m       recentContracts.forEach(contract => {\n\u001b[7m   \u001b[0m \u001b[91m                              ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m322\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'matter' implicitly has an 'any' type.\n\n\u001b[7m322\u001b[0m       recentMatters.forEach(matter => {\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m353\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'document' implicitly has an 'any' type.\n\n\u001b[7m353\u001b[0m       recentDocuments.forEach(document => {\n\u001b[7m   \u001b[0m \u001b[91m                              ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m365\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7005: \u001b[0mVariable 'activities' implicitly has an 'any[]' type.\n\n\u001b[7m365\u001b[0m       activities.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n\u001b[7m   \u001b[0m \u001b[91m      ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m366\u001b[0m:\u001b[93m14\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7005: \u001b[0mVariable 'activities' implicitly has an 'any[]' type.\n\n\u001b[7m366\u001b[0m       return activities.slice(0, limit);\n\u001b[7m   \u001b[0m \u001b[91m             ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m375\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7034: \u001b[0mVariable 'deadlines' implicitly has type 'any[]' in some locations where its type cannot be determined.\n\n\u001b[7m375\u001b[0m       const deadlines = [];\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m398\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'contract' implicitly has an 'any' type.\n\n\u001b[7m398\u001b[0m       contractDeadlines.forEach(contract => {\n\u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m433\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'matter' implicitly has an 'any' type.\n\n\u001b[7m433\u001b[0m       matterDeadlines.forEach(matter => {\n\u001b[7m   \u001b[0m \u001b[91m                              ~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m469\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'dispute' implicitly has an 'any' type.\n\n\u001b[7m469\u001b[0m       disputeTrials.forEach(dispute => {\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m483\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7005: \u001b[0mVariable 'deadlines' implicitly has an 'any[]' type.\n\n\u001b[7m483\u001b[0m       deadlines.sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\n\u001b[7m   \u001b[0m \u001b[91m      ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m484\u001b[0m:\u001b[93m14\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7005: \u001b[0mVariable 'deadlines' implicitly has an 'any[]' type.\n\n\u001b[7m484\u001b[0m       return deadlines.slice(0, limit);\n\u001b[7m   \u001b[0m \u001b[91m             ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m508\u001b[0m:\u001b[93m44\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'sum' implicitly has an 'any' type.\n\n\u001b[7m508\u001b[0m       const totalValue = contracts.reduce((sum, contract) => sum + (contract.value || 0), 0);\n\u001b[7m   \u001b[0m \u001b[91m                                           ~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m508\u001b[0m:\u001b[93m49\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'contract' implicitly has an 'any' type.\n\n\u001b[7m508\u001b[0m       const totalValue = contracts.reduce((sum, contract) => sum + (contract.value || 0), 0);\n\u001b[7m   \u001b[0m \u001b[91m                                                ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m510\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'c' implicitly has an 'any' type.\n\n\u001b[7m510\u001b[0m         .filter(c => ['APPROVED', 'EXECUTED'].includes(c.status))\n\u001b[7m   \u001b[0m \u001b[91m                ~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m511\u001b[0m:\u001b[93m18\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'sum' implicitly has an 'any' type.\n\n\u001b[7m511\u001b[0m         .reduce((sum, contract) => sum + (contract.value || 0), 0);\n\u001b[7m   \u001b[0m \u001b[91m                 ~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m511\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'contract' implicitly has an 'any' type.\n\n\u001b[7m511\u001b[0m         .reduce((sum, contract) => sum + (contract.value || 0), 0);\n\u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m518\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'c' implicitly has an 'any' type.\n\n\u001b[7m518\u001b[0m           contracts.map(c => ({ createdAt: c.createdAt, count: c.value || 0 }))\n\u001b[7m   \u001b[0m \u001b[91m                        ~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m549\u001b[0m:\u001b[93m50\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'sum' implicitly has an 'any' type.\n\n\u001b[7m549\u001b[0m       const totalBillableHours = matters.reduce((sum, matter) => sum + matter.billableHours, 0);\n\u001b[7m   \u001b[0m \u001b[91m                                                 ~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m549\u001b[0m:\u001b[93m55\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'matter' implicitly has an 'any' type.\n\n\u001b[7m549\u001b[0m       const totalBillableHours = matters.reduce((sum, matter) => sum + matter.billableHours, 0);\n\u001b[7m   \u001b[0m \u001b[91m                                                      ~~~~~~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m550\u001b[0m:\u001b[93m47\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'm' implicitly has an 'any' type.\n\n\u001b[7m550\u001b[0m       const completedMatters = matters.filter(m => ['CLOSED', 'COMPLETED'].includes(m.status));\n\u001b[7m   \u001b[0m \u001b[91m                                              ~\u001b[0m\n\u001b[96msrc/services/dashboard.service.ts\u001b[0m:\u001b[93m591\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'contractStats' is declared but its value is never read.\n\n\u001b[7m591\u001b[0m   private static calculateValueDistribution(contractStats: any) {\n\u001b[7m   \u001b[0m \u001b[91m                                            ~~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/usage-tracker.service.ts\nERROR: \u001b[96msrc/services/usage-tracker.service.ts\u001b[0m:\u001b[93m31\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'startDate' is declared but its value is never read.\n\n\u001b[7m31\u001b[0m   async getUserUsage(userId: string, startDate?: Date, endDate?: Date): Promise<AIUsage[]> {\n\u001b[7m  \u001b[0m \u001b[91m                                     ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/usage-tracker.service.ts\u001b[0m:\u001b[93m31\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'endDate' is declared but its value is never read.\n\n\u001b[7m31\u001b[0m   async getUserUsage(userId: string, startDate?: Date, endDate?: Date): Promise<AIUsage[]> {\n\u001b[7m  \u001b[0m \u001b[91m                                                       ~~~~~~~\u001b[0m\n\u001b[96msrc/services/usage-tracker.service.ts\u001b[0m:\u001b[93m50\u001b[0m:\u001b[93m44\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'startDate' is declared but its value is never read.\n\n\u001b[7m50\u001b[0m   async getProviderUsage(provider: string, startDate?: Date, endDate?: Date): Promise<{\n\u001b[7m  \u001b[0m \u001b[91m                                           ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/usage-tracker.service.ts\u001b[0m:\u001b[93m50\u001b[0m:\u001b[93m62\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'endDate' is declared but its value is never read.\n\n\u001b[7m50\u001b[0m   async getProviderUsage(provider: string, startDate?: Date, endDate?: Date): Promise<{\n\u001b[7m  \u001b[0m \u001b[91m                                                             ~~~~~~~\u001b[0m\n\u001b[96msrc/services/usage-tracker.service.ts\u001b[0m:\u001b[93m65\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'userId' is declared but its value is never read.\n\n\u001b[7m65\u001b[0m   async getCostAnalysis(userId?: string): Promise<{\n\u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~\u001b[0m\n\u001b[96msrc/services/usage-tracker.service.ts\u001b[0m:\u001b[93m88\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'timeframe' is declared but its value is never read.\n\n\u001b[7m88\u001b[0m   async getUsageMetrics(timeframe: 'day' | 'week' | 'month' = 'day'): Promise<{\n\u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/usage-tracker.service.ts\u001b[0m:\u001b[93m120\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'userId' is declared but its value is never read.\n\n\u001b[7m120\u001b[0m   async checkBudgetStatus(userId: string): Promise<{\n\u001b[7m   \u001b[0m \u001b[91m                          ~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/document.service.ts\nERROR: \u001b[96msrc/services/document.service.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'path' is declared but its value is never read.\n\n\u001b[7m6\u001b[0m import path from 'path';\n\u001b[7m \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document.service.ts\u001b[0m:\u001b[93m296\u001b[0m:\u001b[93m47\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'document' implicitly has an 'any' type.\n\n\u001b[7m296\u001b[0m       const documentsWithTags = documents.map(document => ({\n\u001b[7m   \u001b[0m \u001b[91m                                              ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document.service.ts\u001b[0m:\u001b[93m618\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m618\u001b[0m         byType: documentsByType.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                    ~~~~\u001b[0m\n\u001b[96msrc/services/document.service.ts\u001b[0m:\u001b[93m622\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m622\u001b[0m         byFileType: documentsByFileType.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                            ~~~~\u001b[0m\n\u001b[96msrc/services/document.service.ts\u001b[0m:\u001b[93m626\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m626\u001b[0m         monthlyTrend: monthlyTrend.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~\u001b[0m\n\u001b[96msrc/services/document.service.ts\u001b[0m:\u001b[93m677\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'document' implicitly has an 'any' type.\n\n\u001b[7m677\u001b[0m       return documents.map(document => ({\n\u001b[7m   \u001b[0m \u001b[91m                           ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document.service.ts\u001b[0m:\u001b[93m744\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'document' implicitly has an 'any' type.\n\n\u001b[7m744\u001b[0m       return documents.map(document => ({\n\u001b[7m   \u001b[0m \u001b[91m                           ~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/contract-intelligence.service.ts\nERROR: \u001b[96msrc/services/contract-intelligence.service.ts\u001b[0m:\u001b[93m423\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'documentInfo' is declared but its value is never read.\n\n\u001b[7m423\u001b[0m     documentInfo: DocumentInfo,\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/contract-intelligence.service.ts\u001b[0m:\u001b[93m466\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'documentInfo' is declared but its value is never read.\n\n\u001b[7m466\u001b[0m   private async extractTerms(documentInfo: DocumentInfo, request: ContractAnalysisRequest): Promise<ExtractedTerm[]> {\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/contract-intelligence.service.ts\u001b[0m:\u001b[93m500\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'documentInfo' is declared but its value is never read.\n\n\u001b[7m500\u001b[0m     documentInfo: DocumentInfo,\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/contract-intelligence.service.ts\u001b[0m:\u001b[93m501\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'contractType' is declared but its value is never read.\n\n\u001b[7m501\u001b[0m     contractType: ContractType,\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/contract-intelligence.service.ts\u001b[0m:\u001b[93m502\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m502\u001b[0m     request: ContractAnalysisRequest\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~~\u001b[0m\n\u001b[96msrc/services/contract-intelligence.service.ts\u001b[0m:\u001b[93m569\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'aiOutput' is declared but its value is never read.\n\n\u001b[7m569\u001b[0m   private parseExtractedClauses(aiOutput: string, documentInfo: DocumentInfo, request: ContractAnalysisRequest): ExtractedClause[] {\n\u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/contract-intelligence.service.ts\u001b[0m:\u001b[93m569\u001b[0m:\u001b[93m51\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'documentInfo' is declared but its value is never read.\n\n\u001b[7m569\u001b[0m   private parseExtractedClauses(aiOutput: string, documentInfo: DocumentInfo, request: ContractAnalysisRequest): ExtractedClause[] {\n\u001b[7m   \u001b[0m \u001b[91m                                                  ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/contract-intelligence.service.ts\u001b[0m:\u001b[93m603\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'aiOutput' is declared but its value is never read.\n\n\u001b[7m603\u001b[0m   private parseIdentifiedRisks(aiOutput: string, request: ContractAnalysisRequest): IdentifiedRisk[] {\n\u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/contract-intelligence.service.ts\u001b[0m:\u001b[93m657\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'contractType' is declared but its value is never read.\n\n\u001b[7m657\u001b[0m   private generateMockRisks(contractType: ContractType, request: ContractAnalysisRequest): IdentifiedRisk[] {\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/contract-intelligence.service.ts\u001b[0m:\u001b[93m714\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clauses' is declared but its value is never read.\n\n\u001b[7m714\u001b[0m     clauses: ExtractedClause[],\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~~\u001b[0m\n\u001b[96msrc/services/contract-intelligence.service.ts\u001b[0m:\u001b[93m716\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'compliance' is declared but its value is never read.\n\n\u001b[7m716\u001b[0m     compliance: ComplianceCheck[],\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/contract-intelligence.service.ts\u001b[0m:\u001b[93m745\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m745\u001b[0m     request: ContractAnalysisRequest\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~~\u001b[0m\n\u001b[96msrc/services/contract-intelligence.service.ts\u001b[0m:\u001b[93m807\u001b[0m:\u001b[93m66\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'risks' is declared but its value is never read.\n\n\u001b[7m807\u001b[0m   private calculateOverallConfidence(clauses: ExtractedClause[], risks: IdentifiedRisk[]): number {\n\u001b[7m   \u001b[0m \u001b[91m                                                                 ~~~~~\u001b[0m\n\u001b[96msrc/services/contract-intelligence.service.ts\u001b[0m:\u001b[93m816\u001b[0m:\u001b[93m61\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'contractType' is declared but its value is never read.\n\n\u001b[7m816\u001b[0m   private calculateCompleteness(clauses: ExtractedClause[], contractType: ContractType): number {\n\u001b[7m   \u001b[0m \u001b[91m                                                            ~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/dispute.service.ts\nERROR: \u001b[96msrc/services/dispute.service.ts\u001b[0m:\u001b[93m262\u001b[0m:\u001b[93m50\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'dispute' implicitly has an 'any' type.\n\n\u001b[7m262\u001b[0m       const disputesWithDeadlines = disputes.map(dispute => ({\n\u001b[7m   \u001b[0m \u001b[91m                                                 ~~~~~~~\u001b[0m\n\u001b[96msrc/services/dispute.service.ts\u001b[0m:\u001b[93m657\u001b[0m:\u001b[93m14\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'dispute' implicitly has an 'any' type.\n\n\u001b[7m657\u001b[0m         .map(dispute => {\n\u001b[7m   \u001b[0m \u001b[91m             ~~~~~~~\u001b[0m\n\u001b[96msrc/services/dispute.service.ts\u001b[0m:\u001b[93m676\u001b[0m:\u001b[93m16\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'a' implicitly has an 'any' type.\n\n\u001b[7m676\u001b[0m         .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime())\n\u001b[7m   \u001b[0m \u001b[91m               ~\u001b[0m\n\u001b[96msrc/services/dispute.service.ts\u001b[0m:\u001b[93m676\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'b' implicitly has an 'any' type.\n\n\u001b[7m676\u001b[0m         .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime())\n\u001b[7m   \u001b[0m \u001b[91m                  ~\u001b[0m\n\u001b[96msrc/services/dispute.service.ts\u001b[0m:\u001b[93m688\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m688\u001b[0m         byStatus: disputesByStatus.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~\u001b[0m\n\u001b[96msrc/services/dispute.service.ts\u001b[0m:\u001b[93m692\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m692\u001b[0m         byType: disputesByType.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~\u001b[0m\n\u001b[96msrc/services/dispute.service.ts\u001b[0m:\u001b[93m696\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m696\u001b[0m         byRiskLevel: disputesByRisk.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                        ~~~~\u001b[0m\n\u001b[96msrc/services/dispute.service.ts\u001b[0m:\u001b[93m700\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m700\u001b[0m         monthlyTrend: monthlyTrend.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~\u001b[0m\n\u001b[96msrc/services/dispute.service.ts\u001b[0m:\u001b[93m751\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'dispute' implicitly has an 'any' type.\n\n\u001b[7m751\u001b[0m       return disputes.map(dispute => ({\n\u001b[7m   \u001b[0m \u001b[91m                          ~~~~~~~\u001b[0m\n\u001b[96msrc/services/dispute.service.ts\u001b[0m:\u001b[93m763\u001b[0m:\u001b[93m54\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'status' does not exist in type '{ title?: string | undefined; description?: string | undefined; jurisdiction?: string | undefined; priority?: \"LOW\" | \"MEDIUM\" | \"HIGH\" | \"URGENT\" | undefined; type?: \"ARBITRATION\" | ... 9 more ... | undefined; ... 11 more ...; deadlines?: { ...; }[] | undefined; }'.\n\n\u001b[7m763\u001b[0m       const dispute = await this.updateDispute(id, { status }, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                     ~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/database.service.ts\nERROR: \u001b[96msrc/services/database.service.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2305: \u001b[0mModule '\"@prisma/client\"' has no exported member 'User'.\n\n\u001b[7m6\u001b[0m import { PrismaClient, User } from '@prisma/client';\n\u001b[7m \u001b[0m \u001b[91m                       ~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/matter.service.ts\nERROR: \u001b[96msrc/services/matter.service.ts\u001b[0m:\u001b[93m235\u001b[0m:\u001b[93m43\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'matter' implicitly has an 'any' type.\n\n\u001b[7m235\u001b[0m       const mattersWithTags = matters.map(matter => ({\n\u001b[7m   \u001b[0m \u001b[91m                                          ~~~~~~\u001b[0m\n\u001b[96msrc/services/matter.service.ts\u001b[0m:\u001b[93m627\u001b[0m:\u001b[93m39\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m627\u001b[0m         byStatus: mattersByStatus.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                      ~~~~\u001b[0m\n\u001b[96msrc/services/matter.service.ts\u001b[0m:\u001b[93m631\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m631\u001b[0m         byType: mattersByType.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~\u001b[0m\n\u001b[96msrc/services/matter.service.ts\u001b[0m:\u001b[93m635\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m635\u001b[0m         byRiskLevel: mattersByRisk.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~\u001b[0m\n\u001b[96msrc/services/matter.service.ts\u001b[0m:\u001b[93m639\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m639\u001b[0m         monthlyTrend: monthlyTrend.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~\u001b[0m\n\u001b[96msrc/services/matter.service.ts\u001b[0m:\u001b[93m681\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'matter' implicitly has an 'any' type.\n\n\u001b[7m681\u001b[0m       return matters.map(matter => ({\n\u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/ai-gateway.clean.ts\nERROR: \u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m8\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'AIUsage' is declared but its value is never read.\n\n\u001b[7m8\u001b[0m   AIUsage,\n\u001b[7m \u001b[0m \u001b[91m  ~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m57\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 0.\n\n\u001b[7m57\u001b[0m       this.providers.set(AIProvider.OLLAMA, new OllamaProvider());\n\u001b[7m  \u001b[0m \u001b[91m                                            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\n  \u001b[96msrc/services/providers/ollama.provider.ts\u001b[0m:\u001b[93m8\u001b[0m:\u001b[93m15\u001b[0m\n    \u001b[7m8\u001b[0m   constructor(config: any) {\n    \u001b[7m \u001b[0m \u001b[96m              ~~~~~~~~~~~\u001b[0m\n    An argument for 'config' was not provided.\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m58\u001b[0m:\u001b[93m49\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 0.\n\n\u001b[7m58\u001b[0m       this.providers.set(AIProvider.LEGAL_BERT, new LegalBertProvider());\n\u001b[7m  \u001b[0m \u001b[91m                                                ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\n  \u001b[96msrc/services/providers/legal-bert.provider.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m15\u001b[0m\n    \u001b[7m6\u001b[0m   constructor(config: any) {\n    \u001b[7m \u001b[0m \u001b[96m              ~~~~~~~~~~~\u001b[0m\n    An argument for 'config' was not provided.\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m61\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 0.\n\n\u001b[7m61\u001b[0m       this.providers.set(AIProvider.OPENAI, new OpenAIProvider());\n\u001b[7m  \u001b[0m \u001b[91m                                            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\n  \u001b[96msrc/services/providers/openai.provider.ts\u001b[0m:\u001b[93m9\u001b[0m:\u001b[93m15\u001b[0m\n    \u001b[7m9\u001b[0m   constructor(config: any) {\n    \u001b[7m \u001b[0m \u001b[96m              ~~~~~~~~~~~\u001b[0m\n    An argument for 'config' was not provided.\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m62\u001b[0m:\u001b[93m48\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 0.\n\n\u001b[7m62\u001b[0m       this.providers.set(AIProvider.ANTHROPIC, new AnthropicProvider());\n\u001b[7m  \u001b[0m \u001b[91m                                               ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\n  \u001b[96msrc/services/providers/anthropic.provider.ts\u001b[0m:\u001b[93m9\u001b[0m:\u001b[93m15\u001b[0m\n    \u001b[7m9\u001b[0m   constructor(config: any) {\n    \u001b[7m \u001b[0m \u001b[96m              ~~~~~~~~~~~\u001b[0m\n    An argument for 'config' was not provided.\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m63\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 0.\n\n\u001b[7m63\u001b[0m       this.providers.set(AIProvider.GOOGLE, new GoogleProvider());\n\u001b[7m  \u001b[0m \u001b[91m                                            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\n  \u001b[96msrc/services/providers/google.provider.ts\u001b[0m:\u001b[93m9\u001b[0m:\u001b[93m15\u001b[0m\n    \u001b[7m9\u001b[0m   constructor(config: any) {\n    \u001b[7m \u001b[0m \u001b[96m              ~~~~~~~~~~~\u001b[0m\n    An argument for 'config' was not provided.\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m70\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'OPENAI_API_KEY' comes from an index signature, so it must be accessed with ['OPENAI_API_KEY'].\n\n\u001b[7m70\u001b[0m       if (process.env.OPENAI_API_KEY) {\n\u001b[7m  \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m73\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ANTHROPIC_API_KEY' comes from an index signature, so it must be accessed with ['ANTHROPIC_API_KEY'].\n\n\u001b[7m73\u001b[0m       if (process.env.ANTHROPIC_API_KEY) {\n\u001b[7m  \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m76\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'GOOGLE_API_KEY' comes from an index signature, so it must be accessed with ['GOOGLE_API_KEY'].\n\n\u001b[7m76\u001b[0m       if (process.env.GOOGLE_API_KEY) {\n\u001b[7m  \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m96\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'generateKey' does not exist on type 'CacheService'.\n\n\u001b[7m96\u001b[0m       const cacheKey = this.cache.generateKey(validatedRequest);\n\u001b[7m  \u001b[0m \u001b[91m                                  ~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m115\u001b[0m:\u001b[93m18\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'success' does not exist on type 'AIResponse'.\n\n\u001b[7m115\u001b[0m       if (result.success) {\n\u001b[7m   \u001b[0m \u001b[91m                 ~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m120\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ userId: string; provider: AIProvider; analysisType: AIAnalysisType; tokensUsed: number; cost: number; success: any; processingTime: number; }' is not assignable to parameter of type 'AIUsage'.\n  Type '{ userId: string; provider: AIProvider; analysisType: AIAnalysisType; tokensUsed: number; cost: number; success: any; processingTime: number; }' is missing the following properties from type 'AIUsage': id, requestId, model, timestamp\n\n\u001b[7m120\u001b[0m       await this.usageTracker.trackUsage({\n\u001b[7m   \u001b[0m \u001b[91m                                         ~\u001b[0m\n\u001b[7m121\u001b[0m         userId,\n\u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~\u001b[0m\n\u001b[7m...\u001b[0m \n\u001b[7m127\u001b[0m         processingTime: Date.now() - startTime\n\u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[7m128\u001b[0m       });\n\u001b[7m   \u001b[0m \u001b[91m~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m126\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'success' does not exist on type 'AIResponse'.\n\n\u001b[7m126\u001b[0m         success: result.success,\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m143\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'context' is declared but its value is never read.\n\n\u001b[7m143\u001b[0m     const { type, context } = request;\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m176\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'AIProvider | undefined' is not assignable to type 'AIProvider'.\n  Type 'undefined' is not assignable to type 'AIProvider'.\n\n\u001b[7m176\u001b[0m     return availableProviders[0];\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m232\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2741: \u001b[0mProperty '[AIProvider.HUGGINGFACE]' is missing in type '{ legal_bert: (AIProvider.OLLAMA | AIProvider.OPENAI)[]; ollama: (AIProvider.OPENAI | AIProvider.ANTHROPIC)[]; openai: (AIProvider.ANTHROPIC | AIProvider.GOOGLE)[]; anthropic: (AIProvider.OPENAI | AIProvider.GOOGLE)[]; google: (AIProvider.OLLAMA | AIProvider.OPENAI)[]; }' but required in type 'Record<AIProvider, AIProvider[]>'.\n\n\u001b[7m232\u001b[0m     const fallbackMap: Record<AIProvider, AIProvider[]> = {\n\u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/ai-gateway.clean.ts\u001b[0m:\u001b[93m301\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2375: \u001b[0mType 'ProviderConfig | { provider: AIProvider; enabled: true; priority: number; models: never[]; rateLimit: { requestsPerMinute: number; }; costPerToken: number; }' is not assignable to type 'ProviderConfig' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Object literal may only specify known properties, and 'costPerToken' does not exist in type 'ProviderConfig'.\n\n\u001b[7m301\u001b[0m         costPerToken: 0\n\u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/security.service.ts\nERROR: \u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m1\u001b[0m:\u001b[93m63\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/common' or its corresponding type declarations.\n\n\u001b[7m1\u001b[0m import { Injectable, Logger, HttpException, HttpStatus } from '@nestjs/common';\n\u001b[7m \u001b[0m \u001b[91m                                                              ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m2\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/typeorm' or its corresponding type declarations.\n\n\u001b[7m2\u001b[0m import { InjectRepository } from '@nestjs/typeorm';\n\u001b[7m \u001b[0m \u001b[91m                                 ~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m3\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'typeorm' or its corresponding type declarations.\n\n\u001b[7m3\u001b[0m import { Repository } from 'typeorm';\n\u001b[7m \u001b[0m \u001b[91m                           ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m4\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/event-emitter' or its corresponding type declarations.\n\n\u001b[7m4\u001b[0m import { EventEmitter2 } from '@nestjs/event-emitter';\n\u001b[7m \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m5\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/config' or its corresponding type declarations.\n\n\u001b[7m5\u001b[0m import { ConfigService } from '@nestjs/config';\n\u001b[7m \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/jwt' or its corresponding type declarations.\n\n\u001b[7m6\u001b[0m import { JwtService } from '@nestjs/jwt';\n\u001b[7m \u001b[0m \u001b[91m                           ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m8\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'speakeasy' or its corresponding type declarations.\n\n\u001b[7m8\u001b[0m import * as speakeasy from 'speakeasy';\n\u001b[7m \u001b[0m \u001b[91m                           ~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m9\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'qrcode' or its corresponding type declarations.\n\n\u001b[7m9\u001b[0m import * as QRCode from 'qrcode';\n\u001b[7m \u001b[0m \u001b[91m                        ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m107\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2693: \u001b[0m'ClientSession' only refers to a type, but is being used as a value here.\n\n\u001b[7m107\u001b[0m     @InjectRepository(ClientSession)\n\u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m109\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6138: \u001b[0mProperty 'eventEmitter' is declared but its value is never read.\n\n\u001b[7m109\u001b[0m     private eventEmitter: EventEmitter2,\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m110\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6138: \u001b[0mProperty 'configService' is declared but its value is never read.\n\n\u001b[7m110\u001b[0m     private configService: ConfigService,\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m111\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6138: \u001b[0mProperty 'jwtService' is declared but its value is never read.\n\n\u001b[7m111\u001b[0m     private jwtService: JwtService,\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m257\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2375: \u001b[0mType '{ id: `${string}-${string}-${string}-${string}-${string}`; clientId: string; sessionToken: string; deviceFingerprint: string; ipAddress: string; userAgent: string; createdAt: Date; lastActivity: Date; expiresAt: Date; isActive: true; location: { ...; } | undefined; security: { ...; }; }' is not assignable to type 'ClientSession' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'location' are incompatible.\n    Type '{ country: string; city: string; timezone: string; } | undefined' is not assignable to type '{ country: string; city: string; timezone: string; }'.\n      Type 'undefined' is not assignable to type '{ country: string; city: string; timezone: string; }'.\n\n\u001b[7m257\u001b[0m       const session: ClientSession = {\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m327\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2551: \u001b[0mProperty 'createCipher' does not exist on type 'typeof import(\"crypto\")'. Did you mean 'createCipheriv'?\n\n\u001b[7m327\u001b[0m       const cipher = crypto.createCipher(this.encryptionConfig.algorithm, encryptionKey);\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~~\u001b[0m\n\n  \u001b[96m../../node_modules/@types/node/crypto.d.ts\u001b[0m:\u001b[93m734\u001b[0m:\u001b[93m14\u001b[0m\n    \u001b[7m734\u001b[0m     function createCipheriv(\n    \u001b[7m   \u001b[0m \u001b[96m             ~~~~~~~~~~~~~~\u001b[0m\n    'createCipheriv' is declared here.\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m359\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'ivBuffer' is declared but its value is never read.\n\n\u001b[7m359\u001b[0m       const ivBuffer = Buffer.from(iv, 'hex');\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m362\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2551: \u001b[0mProperty 'createDecipher' does not exist on type 'typeof import(\"crypto\")'. Did you mean 'createDecipheriv'?\n\n\u001b[7m362\u001b[0m       const decipher = crypto.createDecipher(this.encryptionConfig.algorithm, keyBuffer);\n\u001b[7m   \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~\u001b[0m\n\n  \u001b[96m../../node_modules/@types/node/crypto.d.ts\u001b[0m:\u001b[93m995\u001b[0m:\u001b[93m14\u001b[0m\n    \u001b[7m995\u001b[0m     function createDecipheriv(\n    \u001b[7m   \u001b[0m \u001b[96m             ~~~~~~~~~~~~~~~~\u001b[0m\n    'createDecipheriv' is declared here.\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m597\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m597\u001b[0m   private async isDeviceTrusted(clientId: string, fingerprint: string): Promise<boolean> {\n\u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m597\u001b[0m:\u001b[93m51\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'fingerprint' is declared but its value is never read.\n\n\u001b[7m597\u001b[0m   private async isDeviceTrusted(clientId: string, fingerprint: string): Promise<boolean> {\n\u001b[7m   \u001b[0m \u001b[91m                                                  ~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m602\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m602\u001b[0m   private async getSessionTimeout(clientId: string): Promise<number> {\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m607\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m607\u001b[0m   private async enforceSessionLimits(clientId: string): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                     ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m611\u001b[0m:\u001b[93m43\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m611\u001b[0m   private async sendNewDeviceNotification(clientId: string, deviceInfo: any): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                          ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m611\u001b[0m:\u001b[93m61\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'deviceInfo' is declared but its value is never read.\n\n\u001b[7m611\u001b[0m   private async sendNewDeviceNotification(clientId: string, deviceInfo: any): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                                            ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m619\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m619\u001b[0m   private async logSecurityEvent(clientId: string, event: any): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                 ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m619\u001b[0m:\u001b[93m52\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'event' is declared but its value is never read.\n\n\u001b[7m619\u001b[0m   private async logSecurityEvent(clientId: string, event: any): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                                   ~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m623\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m623\u001b[0m   private async storeTempTwoFactorAuth(clientId: string, auth: TwoFactorAuth): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m623\u001b[0m:\u001b[93m58\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'auth' is declared but its value is never read.\n\n\u001b[7m623\u001b[0m   private async storeTempTwoFactorAuth(clientId: string, auth: TwoFactorAuth): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                                         ~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m627\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m627\u001b[0m   private async getTempTwoFactorAuth(clientId: string): Promise<TwoFactorAuth | null> {\n\u001b[7m   \u001b[0m \u001b[91m                                     ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m632\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m632\u001b[0m   private async saveTwoFactorAuth(clientId: string, auth: TwoFactorAuth): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m632\u001b[0m:\u001b[93m53\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'auth' is declared but its value is never read.\n\n\u001b[7m632\u001b[0m   private async saveTwoFactorAuth(clientId: string, auth: TwoFactorAuth): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                                    ~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m636\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m636\u001b[0m   private async removeTempTwoFactorAuth(clientId: string): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                        ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m640\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m640\u001b[0m   private async getTwoFactorAuth(clientId: string): Promise<TwoFactorAuth> {\n\u001b[7m   \u001b[0m \u001b[91m                                 ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m645\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m645\u001b[0m   private async getSessionSettings(clientId: string): Promise<any> {\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m654\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m654\u001b[0m   private async getIpWhitelist(clientId: string): Promise<string[]> {\n\u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m659\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m659\u001b[0m   private async getDeviceTrust(clientId: string): Promise<any> {\n\u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m667\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m667\u001b[0m   private async getPasswordPolicy(clientId: string): Promise<any> {\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m679\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m679\u001b[0m   private async getAuditLog(clientId: string): Promise<any> {\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m687\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'settings' is declared but its value is never read.\n\n\u001b[7m687\u001b[0m   private async validateSecuritySettings(settings: Partial<SecuritySettings>): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m691\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'clientId' is declared but its value is never read.\n\n\u001b[7m691\u001b[0m   private async saveSecuritySettings(clientId: string, settings: Partial<SecuritySettings>): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                     ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/security.service.ts\u001b[0m:\u001b[93m691\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'settings' is declared but its value is never read.\n\n\u001b[7m691\u001b[0m   private async saveSecuritySettings(clientId: string, settings: Partial<SecuritySettings>): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                                       ~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/document-automation-v2.service.ts\nERROR: \u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m140\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'DocumentTemplate | undefined' is not assignable to type 'DocumentTemplate'.\n  Type 'undefined' is not assignable to type 'DocumentTemplate'.\n\n\u001b[7m140\u001b[0m     return templates[0]; // Return first matching template\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m227\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'context' is declared but its value is never read.\n\n\u001b[7m227\u001b[0m     context: any\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m419\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'documents' is declared but its value is never read.\n\n\u001b[7m419\u001b[0m     documents: GeneratedDocument[],\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m713\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'section' is declared but its value is never read.\n\n\u001b[7m713\u001b[0m   private shouldIncludeSection(section: TemplateSection, context: any): boolean {\n\u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m713\u001b[0m:\u001b[93m58\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'context' is declared but its value is never read.\n\n\u001b[7m713\u001b[0m   private shouldIncludeSection(section: TemplateSection, context: any): boolean {\n\u001b[7m   \u001b[0m \u001b[91m                                                         ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m717\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'conditions' is declared but its value is never read.\n\n\u001b[7m717\u001b[0m   private evaluateConditions(conditions: any, context: any): boolean {\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m717\u001b[0m:\u001b[93m47\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'context' is declared but its value is never read.\n\n\u001b[7m717\u001b[0m   private evaluateConditions(conditions: any, context: any): boolean {\n\u001b[7m   \u001b[0m \u001b[91m                                              ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m831\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'content' is declared but its value is never read.\n\n\u001b[7m831\u001b[0m   private assessConsistency(content: string): number {\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m836\u001b[0m:\u001b[93m55\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m836\u001b[0m   private assessAccuracy(document: GeneratedDocument, request: DocumentGenerationRequest): number {\n\u001b[7m   \u001b[0m \u001b[91m                                                      ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m853\u001b[0m:\u001b[93m39\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m853\u001b[0m   private async selectRelevantClauses(request: DocumentGenerationRequest): Promise<ClauseSelection[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                      ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m857\u001b[0m:\u001b[93m61\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'context' is declared but its value is never read.\n\n\u001b[7m857\u001b[0m   private async assembleClauses(clauses: ClauseSelection[], context: any): Promise<string> {\n\u001b[7m   \u001b[0m \u001b[91m                                                            ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m861\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'documentType' is declared but its value is never read.\n\n\u001b[7m861\u001b[0m   private getExpectedSections(documentType: DocumentType): any[] {\n\u001b[7m   \u001b[0m \u001b[91m                              ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m869\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'jurisdiction' is declared but its value is never read.\n\n\u001b[7m869\u001b[0m   private getComplianceRequirements(jurisdiction: LegalJurisdiction, documentType: DocumentType): any[] {\n\u001b[7m   \u001b[0m \u001b[91m                                    ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m869\u001b[0m:\u001b[93m70\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'documentType' is declared but its value is never read.\n\n\u001b[7m869\u001b[0m   private getComplianceRequirements(jurisdiction: LegalJurisdiction, documentType: DocumentType): any[] {\n\u001b[7m   \u001b[0m \u001b[91m                                                                     ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m873\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'documents' is declared but its value is never read.\n\n\u001b[7m873\u001b[0m   private async generateRecommendations(documents: GeneratedDocument[], quality: QualityAssessment, compliance: ComplianceAssessment): Promise<GenerationRecommendation[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                        ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m873\u001b[0m:\u001b[93m73\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'quality' is declared but its value is never read.\n\n\u001b[7m873\u001b[0m   private async generateRecommendations(documents: GeneratedDocument[], quality: QualityAssessment, compliance: ComplianceAssessment): Promise<GenerationRecommendation[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                                                        ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m873\u001b[0m:\u001b[93m101\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'compliance' is declared but its value is never read.\n\n\u001b[7m873\u001b[0m   private async generateRecommendations(documents: GeneratedDocument[], quality: QualityAssessment, compliance: ComplianceAssessment): Promise<GenerationRecommendation[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                                                                                    ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m877\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'documents' is declared but its value is never read.\n\n\u001b[7m877\u001b[0m   private async identifyWarnings(documents: GeneratedDocument[], request: DocumentGenerationRequest, context: any): Promise<GenerationWarning[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                 ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m877\u001b[0m:\u001b[93m66\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m877\u001b[0m   private async identifyWarnings(documents: GeneratedDocument[], request: DocumentGenerationRequest, context: any): Promise<GenerationWarning[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                                                 ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m877\u001b[0m:\u001b[93m102\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'context' is declared but its value is never read.\n\n\u001b[7m877\u001b[0m   private async identifyWarnings(documents: GeneratedDocument[], request: DocumentGenerationRequest, context: any): Promise<GenerationWarning[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                                                                                     ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m881\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m881\u001b[0m   private async generateAlternatives(request: DocumentGenerationRequest, template: DocumentTemplate, context: any): Promise<DocumentAlternative[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                     ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m881\u001b[0m:\u001b[93m74\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'template' is declared but its value is never read.\n\n\u001b[7m881\u001b[0m   private async generateAlternatives(request: DocumentGenerationRequest, template: DocumentTemplate, context: any): Promise<DocumentAlternative[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                                                         ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation-v2.service.ts\u001b[0m:\u001b[93m881\u001b[0m:\u001b[93m102\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'context' is declared but its value is never read.\n\n\u001b[7m881\u001b[0m   private async generateAlternatives(request: DocumentGenerationRequest, template: DocumentTemplate, context: any): Promise<DocumentAlternative[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                                                                                     ~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/integration.service.ts\nERROR: \u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m1\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/common' or its corresponding type declarations.\n\n\u001b[7m1\u001b[0m import { Injectable, Logger } from '@nestjs/common';\n\u001b[7m \u001b[0m \u001b[91m                                   ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m2\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/config' or its corresponding type declarations.\n\n\u001b[7m2\u001b[0m import { ConfigService } from '@nestjs/config';\n\u001b[7m \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m3\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'InjectRepository' is declared but its value is never read.\n\n\u001b[7m3\u001b[0m import { InjectRepository } from '@nestjs/typeorm';\n\u001b[7m \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m3\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/typeorm' or its corresponding type declarations.\n\n\u001b[7m3\u001b[0m import { InjectRepository } from '@nestjs/typeorm';\n\u001b[7m \u001b[0m \u001b[91m                                 ~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m4\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'Repository' is declared but its value is never read.\n\n\u001b[7m4\u001b[0m import { Repository } from 'typeorm';\n\u001b[7m \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m4\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'typeorm' or its corresponding type declarations.\n\n\u001b[7m4\u001b[0m import { Repository } from 'typeorm';\n\u001b[7m \u001b[0m \u001b[91m                           ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m5\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '@nestjs/event-emitter' or its corresponding type declarations.\n\n\u001b[7m5\u001b[0m import { EventEmitter2 } from '@nestjs/event-emitter';\n\u001b[7m \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m93\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6138: \u001b[0mProperty 'configService' is declared but its value is never read.\n\n\u001b[7m93\u001b[0m     private configService: ConfigService,\n\u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m102\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2375: \u001b[0mType '{ id: string; name: string; type: string; endpoint: string; apiKey: string | undefined; credentials: Record<string, any>; headers: Record<string, string>; rateLimit: { requests: number; window: number; }; ... 5 more ...; metadata: Record<...>; }' is not assignable to type 'IntegrationConfig' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'apiKey' are incompatible.\n    Type 'string | undefined' is not assignable to type 'string'.\n      Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m102\u001b[0m       const integration: IntegrationConfig = {\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m131\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m131\u001b[0m       this.logger.error(`Failed to register integration: ${error.message}`);\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m152\u001b[0m:\u001b[93m58\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m152\u001b[0m       this.logger.error(`Failed to update integration: ${error.message}`);\n\u001b[7m   \u001b[0m \u001b[91m                                                         ~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m171\u001b[0m:\u001b[93m58\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m171\u001b[0m       this.logger.error(`Failed to delete integration: ${error.message}`);\n\u001b[7m   \u001b[0m \u001b[91m                                                         ~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m201\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18048: \u001b[0m'config.headers' is possibly 'undefined'.\n\n\u001b[7m201\u001b[0m       config.headers['Authorization'] = `Bearer ${integration.apiKey}`;\n\u001b[7m   \u001b[0m \u001b[91m      ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m316\u001b[0m:\u001b[93m59\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m316\u001b[0m           result.errors.push(`Failed to process record: ${error.message}`);\n\u001b[7m   \u001b[0m \u001b[91m                                                          ~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m329\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m329\u001b[0m       result.errors.push(error.message);\n\u001b[7m   \u001b[0m \u001b[91m                         ~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m331\u001b[0m:\u001b[93m79\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m331\u001b[0m       this.logger.error(`Data sync failed for integration ${integrationId}: ${error.message}`);\n\u001b[7m   \u001b[0m \u001b[91m                                                                              ~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m332\u001b[0m:\u001b[93m81\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m332\u001b[0m       this.eventEmitter.emit('integration.sync.failed', { integrationId, error: error.message });\n\u001b[7m   \u001b[0m \u001b[91m                                                                                ~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m362\u001b[0m:\u001b[93m65\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m362\u001b[0m         this.logger.warn(`Failed to transform field ${field}: ${error.message}`);\n\u001b[7m   \u001b[0m \u001b[91m                                                                ~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m435\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2375: \u001b[0mType '{ id: `${string}-${string}-${string}-${string}-${string}`; event: string; payload: any; source: string; timestamp: Date; signature: string | undefined; processed: false; retryCount: number; }' is not assignable to type 'WebhookEvent' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'signature' are incompatible.\n    Type 'string | undefined' is not assignable to type 'string'.\n      Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m435\u001b[0m       const webhookEvent: WebhookEvent = {\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m449\u001b[0m:\u001b[93m55\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m449\u001b[0m       this.logger.error(`Failed to process webhook: ${error.message}`);\n\u001b[7m   \u001b[0m \u001b[91m                                                      ~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m487\u001b[0m:\u001b[93m16\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18046: \u001b[0m'error' is of type 'unknown'.\n\n\u001b[7m487\u001b[0m         error: error.message,\n\u001b[7m   \u001b[0m \u001b[91m               ~~~~~\u001b[0m\n\u001b[96msrc/services/integration.service.ts\u001b[0m:\u001b[93m492\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'integrationId' is declared but its value is never read.\n\n\u001b[7m492\u001b[0m   async getIntegrationMetrics(integrationId: string): Promise<{\n\u001b[7m   \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/utils/auth-security.ts\nERROR: \u001b[96msrc/utils/auth-security.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m34\u001b[0m   return bcrypt.hash(password, env.BCRYPT_SALT_ROUNDS);\n\u001b[7m  \u001b[0m \u001b[91m                                   ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/utils/auth-security.ts\u001b[0m:\u001b[93m50\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'JWT_EXPIRES_IN' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m50\u001b[0m     expiresIn: env.JWT_EXPIRES_IN,\n\u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/utils/auth-security.ts\u001b[0m:\u001b[93m52\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'APP_URL' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m52\u001b[0m     audience: env.APP_URL,\n\u001b[7m  \u001b[0m \u001b[91m                  ~~~~~~~\u001b[0m\n\u001b[96msrc/utils/auth-security.ts\u001b[0m:\u001b[93m60\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m60\u001b[0m     expiresIn: env.JWT_REFRESH_EXPIRES_IN,\n\u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/utils/auth-security.ts\u001b[0m:\u001b[93m62\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'APP_URL' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m62\u001b[0m     audience: env.APP_URL,\n\u001b[7m  \u001b[0m \u001b[91m                  ~~~~~~~\u001b[0m\n\u001b[96msrc/utils/auth-security.ts\u001b[0m:\u001b[93m75\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'JWT_EXPIRES_IN' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m75\u001b[0m   const expiresIn = parseExpiry(env.JWT_EXPIRES_IN);\n\u001b[7m  \u001b[0m \u001b[91m                                    ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/utils/auth-security.ts\u001b[0m:\u001b[93m87\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'APP_URL' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m87\u001b[0m     audience: env.APP_URL,\n\u001b[7m  \u001b[0m \u001b[91m                  ~~~~~~~\u001b[0m\n\u001b[96msrc/utils/auth-security.ts\u001b[0m:\u001b[93m94\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'APP_URL' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m94\u001b[0m     audience: env.APP_URL,\n\u001b[7m  \u001b[0m \u001b[91m                  ~~~~~~~\u001b[0m\n\u001b[96msrc/utils/auth-security.ts\u001b[0m:\u001b[93m113\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'PASSWORD_RESET_TOKEN_EXPIRES_IN' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m113\u001b[0m     expiresIn: env.PASSWORD_RESET_TOKEN_EXPIRES_IN,\n\u001b[7m   \u001b[0m \u001b[91m                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/utils/auth-security.ts\u001b[0m:\u001b[93m115\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'APP_URL' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m115\u001b[0m     audience: env.APP_URL,\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~\u001b[0m\n\u001b[96msrc/utils/auth-security.ts\u001b[0m:\u001b[93m122\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'APP_URL' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m122\u001b[0m     audience: env.APP_URL,\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~\u001b[0m\n\u001b[96msrc/utils/auth-security.ts\u001b[0m:\u001b[93m199\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m199\u001b[0m   const value = parseInt(match[1]);\n\u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/client.service.ts\nERROR: \u001b[96msrc/services/client.service.ts\u001b[0m:\u001b[93m512\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m512\u001b[0m         byType: clientsByType.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~\u001b[0m\n\u001b[96msrc/services/client.service.ts\u001b[0m:\u001b[93m516\u001b[0m:\u001b[93m43\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m516\u001b[0m         byIndustry: clientsByIndustry.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                          ~~~~\u001b[0m\n\u001b[96msrc/services/client.service.ts\u001b[0m:\u001b[93m520\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m520\u001b[0m         monthlyTrend: monthlyTrend.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~\u001b[0m\n\u001b[96msrc/services/client.service.ts\u001b[0m:\u001b[93m670\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m670\u001b[0m         byType: clientsByType.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~\u001b[0m\n\u001b[96msrc/services/client.service.ts\u001b[0m:\u001b[93m674\u001b[0m:\u001b[93m43\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'item' implicitly has an 'any' type.\n\n\u001b[7m674\u001b[0m         byIndustry: clientsByIndustry.map(item => ({\n\u001b[7m   \u001b[0m \u001b[91m                                          ~~~~\u001b[0m\n\u001b[96msrc/services/client.service.ts\u001b[0m:\u001b[93m678\u001b[0m:\u001b[93m44\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'client' implicitly has an 'any' type.\n\n\u001b[7m678\u001b[0m         recentActivity: recentActivity.map(client => ({\n\u001b[7m   \u001b[0m \u001b[91m                                           ~~~~~~\u001b[0m\n\u001b[96msrc/services/client.service.ts\u001b[0m:\u001b[93m704\u001b[0m:\u001b[93m16\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18048: \u001b[0m'clientData' is possibly 'undefined'.\n\n\u001b[7m704\u001b[0m           if (!clientData.name || !clientData.email) {\n\u001b[7m   \u001b[0m \u001b[91m               ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client.service.ts\u001b[0m:\u001b[93m704\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18048: \u001b[0m'clientData' is possibly 'undefined'.\n\n\u001b[7m704\u001b[0m           if (!clientData.name || !clientData.email) {\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client.service.ts\u001b[0m:\u001b[93m715\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18048: \u001b[0m'clientData' is possibly 'undefined'.\n\n\u001b[7m715\u001b[0m             where: { email: clientData.email }\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client.service.ts\u001b[0m:\u001b[93m731\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18048: \u001b[0m'clientData' is possibly 'undefined'.\n\n\u001b[7m731\u001b[0m               assignedLawyerId: clientData.assignedLawyerId || userId,\n\u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client.service.ts\u001b[0m:\u001b[93m731\u001b[0m:\u001b[93m44\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'assignedLawyerId' does not exist on type '{ name: string; email: string; clientType: \"INDIVIDUAL\" | \"CORPORATION\" | \"NON_PROFIT\" | \"GOVERNMENT\"; phoneNumber?: string | undefined; address?: string | undefined; industry?: string | undefined; description?: string | undefined; }'.\n\n\u001b[7m731\u001b[0m               assignedLawyerId: clientData.assignedLawyerId || userId,\n\u001b[7m   \u001b[0m \u001b[91m                                           ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/client.service.ts\u001b[0m:\u001b[93m814\u001b[0m:\u001b[93m52\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'status' does not exist in type '{ name?: string | undefined; email?: string | undefined; phoneNumber?: string | undefined; address?: string | undefined; clientType?: \"INDIVIDUAL\" | \"CORPORATION\" | \"NON_PROFIT\" | \"GOVERNMENT\" | undefined; industry?: string | undefined; description?: string | undefined; }'.\n\n\u001b[7m814\u001b[0m       const client = await this.updateClient(id, { status }, userId);\n\u001b[7m   \u001b[0m \u001b[91m                                                   ~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/document-automation.service.ts\nERROR: \u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m35\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'ConfidentialityLevel' is declared but its value is never read.\n\n\u001b[7m35\u001b[0m   ConfidentialityLevel\n\u001b[7m  \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m65\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'complexity' is declared but its value is never read.\n\n\u001b[7m65\u001b[0m       const complexity = await this.analyzeComplexity(request);\n\u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m164\u001b[0m:\u001b[93m12\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2532: \u001b[0mObject is possibly 'undefined'.\n\n\u001b[7m164\u001b[0m     return scoredTemplates[0].template;\n\u001b[7m   \u001b[0m \u001b[91m           ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m292\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2551: \u001b[0mProperty 'generateBasicDocument' does not exist on type 'DocumentAutomationService'. Did you mean 'generateDocument'?\n\n\u001b[7m292\u001b[0m     const content = this.generateBasicDocument(request, prompt);\n\u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\n  \u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m58\u001b[0m:\u001b[93m16\u001b[0m\n    \u001b[7m58\u001b[0m   public async generateDocument(request: DocumentGenerationRequest): Promise<DocumentGenerationResult> {\n    \u001b[7m  \u001b[0m \u001b[96m               ~~~~~~~~~~~~~~~~\u001b[0m\n    'generateDocument' is declared here.\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m316\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | Buffer<ArrayBufferLike>' is not assignable to parameter of type 'string'.\n  Type 'Buffer<ArrayBufferLike>' is not assignable to type 'string'.\n\n\u001b[7m316\u001b[0m       const enhancedContent = await this.enhanceWithAI(doc.content, request);\n\u001b[7m   \u001b[0m \u001b[91m                                                       ~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m389\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | Buffer<ArrayBufferLike>' is not assignable to parameter of type 'string'.\n  Type 'Buffer<ArrayBufferLike>' is not assignable to type 'string'.\n\n\u001b[7m389\u001b[0m       pageCount: this.estimatePageCount(formattedContent),\n\u001b[7m   \u001b[0m \u001b[91m                                        ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m390\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | Buffer<ArrayBufferLike>' is not assignable to parameter of type 'string'.\n  Type 'Buffer<ArrayBufferLike>' is not assignable to type 'string'.\n\n\u001b[7m390\u001b[0m       wordCount: this.countWords(formattedContent),\n\u001b[7m   \u001b[0m \u001b[91m                                 ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m393\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | Buffer<ArrayBufferLike>' is not assignable to parameter of type 'string'.\n  Type 'Buffer<ArrayBufferLike>' is not assignable to type 'string'.\n\n\u001b[7m393\u001b[0m       checksum: this.calculateChecksum(formattedContent)\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m430\u001b[0m:\u001b[93m71\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'context' is declared but its value is never read.\n\n\u001b[7m430\u001b[0m   private buildAIGenerationPrompt(request: DocumentGenerationRequest, context: any): string {\n\u001b[7m   \u001b[0m \u001b[91m                                                                      ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m473\u001b[0m:\u001b[93m43\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'generateCompletion' does not exist on type 'AIGatewayService'.\n\n\u001b[7m473\u001b[0m     const response = await this.aiGateway.generateCompletion({\n\u001b[7m   \u001b[0m \u001b[91m                                          ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m554\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | Buffer<ArrayBufferLike>' is not assignable to parameter of type 'string'.\n  Type 'Buffer<ArrayBufferLike>' is not assignable to type 'string'.\n\n\u001b[7m554\u001b[0m     const terms = this.extractLegalTerms(document.content);\n\u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m560\u001b[0m:\u001b[93m55\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m560\u001b[0m   private assessAccuracy(document: GeneratedDocument, request: DocumentGenerationRequest): number {\n\u001b[7m   \u001b[0m \u001b[91m                                                      ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m570\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'split' does not exist on type 'string | Buffer<ArrayBufferLike>'.\n  Property 'split' does not exist on type 'Buffer<ArrayBufferLike>'.\n\n\u001b[7m570\u001b[0m     const sentences = document.content.split(/[.!?]+/).length;\n\u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m571\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | Buffer<ArrayBufferLike>' is not assignable to parameter of type 'string'.\n  Type 'Buffer<ArrayBufferLike>' is not assignable to type 'string'.\n\n\u001b[7m571\u001b[0m     const words = this.countWords(document.content);\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m591\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'substring' does not exist on type 'string | Buffer<ArrayBufferLike>'.\n  Property 'substring' does not exist on type 'Buffer<ArrayBufferLike>'.\n\n\u001b[7m591\u001b[0m ${document.content.substring(0, 2000)}...\n\u001b[7m   \u001b[0m \u001b[91m                   ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m602\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'generateCompletion' does not exist on type 'AIGatewayService'.\n\n\u001b[7m602\u001b[0m       const response = await this.aiGateway.generateCompletion({\n\u001b[7m   \u001b[0m \u001b[91m                                            ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m774\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'response' is declared but its value is never read.\n\n\u001b[7m774\u001b[0m     const response = await this.aiGateway.generateCompletion({\n\u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m774\u001b[0m:\u001b[93m43\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'generateCompletion' does not exist on type 'AIGatewayService'.\n\n\u001b[7m774\u001b[0m     const response = await this.aiGateway.generateCompletion({\n\u001b[7m   \u001b[0m \u001b[91m                                          ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m877\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'conditions' is declared but its value is never read.\n\n\u001b[7m877\u001b[0m   private evaluateConditions(conditions: any, context: any): boolean {\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m877\u001b[0m:\u001b[93m47\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'context' is declared but its value is never read.\n\n\u001b[7m877\u001b[0m   private evaluateConditions(conditions: any, context: any): boolean {\n\u001b[7m   \u001b[0m \u001b[91m                                              ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1009\u001b[0m:\u001b[93m39\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m1009\u001b[0m   private async selectRelevantClauses(request: DocumentGenerationRequest): Promise<ClauseSelection[]> {\n\u001b[7m    \u001b[0m \u001b[91m                                      ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1014\u001b[0m:\u001b[93m61\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'context' is declared but its value is never read.\n\n\u001b[7m1014\u001b[0m   private async assembleClauses(clauses: ClauseSelection[], context: any): Promise<string> {\n\u001b[7m    \u001b[0m \u001b[91m                                                            ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1054\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'documentType' is declared but its value is never read.\n\n\u001b[7m1054\u001b[0m   private getExpectedSections(documentType: DocumentType): any[] {\n\u001b[7m    \u001b[0m \u001b[91m                              ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1063\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'content' is declared but its value is never read.\n\n\u001b[7m1063\u001b[0m   private extractLegalTerms(content: string): string[] {\n\u001b[7m    \u001b[0m \u001b[91m                            ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1068\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'terms' is declared but its value is never read.\n\n\u001b[7m1068\u001b[0m   private findTermInconsistencies(terms: string[]): string[] {\n\u001b[7m    \u001b[0m \u001b[91m                                  ~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1073\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'jurisdiction' is declared but its value is never read.\n\n\u001b[7m1073\u001b[0m   private getComplianceRequirements(jurisdiction: LegalJurisdiction, documentType: DocumentType): ComplianceRequirement[] {\n\u001b[7m    \u001b[0m \u001b[91m                                    ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1073\u001b[0m:\u001b[93m70\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'documentType' is declared but its value is never read.\n\n\u001b[7m1073\u001b[0m   private getComplianceRequirements(jurisdiction: LegalJurisdiction, documentType: DocumentType): ComplianceRequirement[] {\n\u001b[7m    \u001b[0m \u001b[91m                                                                     ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1078\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'document' is declared but its value is never read.\n\n\u001b[7m1078\u001b[0m   private async findComplianceViolations(document: GeneratedDocument, requirements: ComplianceRequirement[]): Promise<ComplianceViolation[]> {\n\u001b[7m    \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1078\u001b[0m:\u001b[93m71\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'requirements' is declared but its value is never read.\n\n\u001b[7m1078\u001b[0m   private async findComplianceViolations(document: GeneratedDocument, requirements: ComplianceRequirement[]): Promise<ComplianceViolation[]> {\n\u001b[7m    \u001b[0m \u001b[91m                                                                      ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1083\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'document' is declared but its value is never read.\n\n\u001b[7m1083\u001b[0m   private generateComplianceRecommendations(document: GeneratedDocument, violations: ComplianceViolation[]): any[] {\n\u001b[7m    \u001b[0m \u001b[91m                                            ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1083\u001b[0m:\u001b[93m74\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'violations' is declared but its value is never read.\n\n\u001b[7m1083\u001b[0m   private generateComplianceRecommendations(document: GeneratedDocument, violations: ComplianceViolation[]): any[] {\n\u001b[7m    \u001b[0m \u001b[91m                                                                         ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1088\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'document' is declared but its value is never read.\n\n\u001b[7m1088\u001b[0m   private async assessJurisdictionCompliance(document: GeneratedDocument, jurisdiction: LegalJurisdiction): Promise<number> {\n\u001b[7m    \u001b[0m \u001b[91m                                             ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1088\u001b[0m:\u001b[93m75\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'jurisdiction' is declared but its value is never read.\n\n\u001b[7m1088\u001b[0m   private async assessJurisdictionCompliance(document: GeneratedDocument, jurisdiction: LegalJurisdiction): Promise<number> {\n\u001b[7m    \u001b[0m \u001b[91m                                                                          ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1092\u001b[0m:\u001b[93m44\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'document' is declared but its value is never read.\n\n\u001b[7m1092\u001b[0m   private async assessRegulatoryCompliance(document: GeneratedDocument, request: DocumentGenerationRequest): Promise<number> {\n\u001b[7m    \u001b[0m \u001b[91m                                           ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1092\u001b[0m:\u001b[93m73\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m1092\u001b[0m   private async assessRegulatoryCompliance(document: GeneratedDocument, request: DocumentGenerationRequest): Promise<number> {\n\u001b[7m    \u001b[0m \u001b[91m                                                                        ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1096\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'document' is declared but its value is never read.\n\n\u001b[7m1096\u001b[0m   private identifyQualityIssues(document: GeneratedDocument, request: DocumentGenerationRequest): QualityIssue[] {\n\u001b[7m    \u001b[0m \u001b[91m                                ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1096\u001b[0m:\u001b[93m62\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m1096\u001b[0m   private identifyQualityIssues(document: GeneratedDocument, request: DocumentGenerationRequest): QualityIssue[] {\n\u001b[7m    \u001b[0m \u001b[91m                                                             ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1101\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'documents' is declared but its value is never read.\n\n\u001b[7m1101\u001b[0m   private async generateRecommendations(documents: GeneratedDocument[], quality: QualityAssessment, compliance: ComplianceAssessment): Promise<GenerationRecommendation[]> {\n\u001b[7m    \u001b[0m \u001b[91m                                        ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1101\u001b[0m:\u001b[93m73\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'quality' is declared but its value is never read.\n\n\u001b[7m1101\u001b[0m   private async generateRecommendations(documents: GeneratedDocument[], quality: QualityAssessment, compliance: ComplianceAssessment): Promise<GenerationRecommendation[]> {\n\u001b[7m    \u001b[0m \u001b[91m                                                                        ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1101\u001b[0m:\u001b[93m101\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'compliance' is declared but its value is never read.\n\n\u001b[7m1101\u001b[0m   private async generateRecommendations(documents: GeneratedDocument[], quality: QualityAssessment, compliance: ComplianceAssessment): Promise<GenerationRecommendation[]> {\n\u001b[7m    \u001b[0m \u001b[91m                                                                                                    ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1106\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'documents' is declared but its value is never read.\n\n\u001b[7m1106\u001b[0m   private async identifyWarnings(documents: GeneratedDocument[], request: DocumentGenerationRequest, context: any): Promise<GenerationWarning[]> {\n\u001b[7m    \u001b[0m \u001b[91m                                 ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1106\u001b[0m:\u001b[93m66\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m1106\u001b[0m   private async identifyWarnings(documents: GeneratedDocument[], request: DocumentGenerationRequest, context: any): Promise<GenerationWarning[]> {\n\u001b[7m    \u001b[0m \u001b[91m                                                                 ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1106\u001b[0m:\u001b[93m102\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'context' is declared but its value is never read.\n\n\u001b[7m1106\u001b[0m   private async identifyWarnings(documents: GeneratedDocument[], request: DocumentGenerationRequest, context: any): Promise<GenerationWarning[]> {\n\u001b[7m    \u001b[0m \u001b[91m                                                                                                     ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1111\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m1111\u001b[0m   private async generateAlternatives(request: DocumentGenerationRequest, template: DocumentTemplate, context: any): Promise<DocumentAlternative[]> {\n\u001b[7m    \u001b[0m \u001b[91m                                     ~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1111\u001b[0m:\u001b[93m74\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'template' is declared but its value is never read.\n\n\u001b[7m1111\u001b[0m   private async generateAlternatives(request: DocumentGenerationRequest, template: DocumentTemplate, context: any): Promise<DocumentAlternative[]> {\n\u001b[7m    \u001b[0m \u001b[91m                                                                         ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/document-automation.service.ts\u001b[0m:\u001b[93m1111\u001b[0m:\u001b[93m102\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'context' is declared but its value is never read.\n\n\u001b[7m1111\u001b[0m   private async generateAlternatives(request: DocumentGenerationRequest, template: DocumentTemplate, context: any): Promise<DocumentAlternative[]> {\n\u001b[7m    \u001b[0m \u001b[91m                                                                                                     ~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/utils/logger.ts\nERROR: \u001b[96msrc/utils/logger.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'LOG_LEVEL' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m19\u001b[0m     this.logLevel = this.getLogLevel(env.LOG_LEVEL);\n\u001b[7m  \u001b[0m \u001b[91m                                         ~~~~~~~~~\u001b[0m\n\u001b[96msrc/utils/logger.ts\u001b[0m:\u001b[93m70\u001b[0m:\u001b[93m14\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'ENABLE_REQUEST_LOGGING' does not exist on type '{ NODE_ENV: \"development\" | \"production\" | \"test\"; PORT: number; DATABASE_URL: string; JWT_SECRET: string; JWT_REFRESH_SECRET: string; JWT_AUDIENCE: string; JWT_ISSUER: string; UPLOAD_MAX_SIZE: number; ... 13 more ...; CORS_ORIGIN?: string | undefined; }'.\n\n\u001b[7m70\u001b[0m     if (!env.ENABLE_REQUEST_LOGGING) {\n\u001b[7m  \u001b[0m \u001b[91m             ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/utils/circuit-breaker.ts\nERROR: \u001b[96msrc/utils/circuit-breaker.ts\u001b[0m:\u001b[93m7\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'ExternalServiceError' is declared but its value is never read.\n\n\u001b[7m7\u001b[0m import { AIServiceError, ExternalServiceError } from './errors';\n\u001b[7m \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/utils/circuit-breaker.ts\u001b[0m:\u001b[93m101\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'unknown' is not assignable to parameter of type 'Error'.\n\n\u001b[7m101\u001b[0m       this.onFailure(error, duration);\n\u001b[7m   \u001b[0m \u001b[91m                     ~~~~~\u001b[0m\n\u001b[96msrc/utils/circuit-breaker.ts\u001b[0m:\u001b[93m219\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2412: \u001b[0mType 'undefined' is not assignable to type 'Date' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the type of the target.\n\n\u001b[7m219\u001b[0m     this.nextAttempt = undefined;\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/utils/circuit-breaker.ts\u001b[0m:\u001b[93m253\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2375: \u001b[0mType '{ lastFailureTime: Date | undefined; lastSuccessTime: Date | undefined; totalRequests: number; successCount: number; failureCount: number; timeoutCount: number; rejectedCount: number; averageResponseTime: number; }' is not assignable to type 'CircuitBreakerMetrics' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'lastFailureTime' are incompatible.\n    Type 'Date | undefined' is not assignable to type 'Date'.\n      Type 'undefined' is not assignable to type 'Date'.\n\n\u001b[7m253\u001b[0m     return {\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~\u001b[0m\n\u001b[96msrc/utils/circuit-breaker.ts\u001b[0m:\u001b[93m360\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'name' is declared but its value is never read.\n\n\u001b[7m360\u001b[0m     for (const [name, breaker] of this.breakers) {\n\u001b[7m   \u001b[0m \u001b[91m                ~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/commands/client/create-client.command.ts\nERROR: \u001b[96msrc/commands/client/create-client.command.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1016: \u001b[0mA required parameter cannot follow an optional parameter.\n\n\u001b[7m17\u001b[0m     currentUserId: string\n\u001b[7m  \u001b[0m \u001b[91m    ~~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/utils/errors.ts\nERROR: \u001b[96msrc/utils/errors.ts\u001b[0m:\u001b[93m27\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2412: \u001b[0mType 'string | undefined' is not assignable to type 'string' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the type of the target.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m27\u001b[0m     this.correlationId = correlationId;\n\u001b[7m  \u001b[0m \u001b[91m    ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/utils/errors.ts\u001b[0m:\u001b[93m239\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'next' is declared but its value is never read.\n\n\u001b[7m239\u001b[0m   next: NextFunction\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~\u001b[0m\n\u001b[96msrc/utils/errors.ts\u001b[0m:\u001b[93m258\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n\u001b[7m258\u001b[0m       process.env.NODE_ENV === 'production' ? 'Internal server error' : err.message,\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~\u001b[0m\n\u001b[96msrc/utils/errors.ts\u001b[0m:\u001b[93m260\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n\u001b[7m260\u001b[0m       process.env.NODE_ENV === 'development' ? { originalStack: err.stack } : undefined\n\u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~\u001b[0m\n\u001b[96msrc/utils/errors.ts\u001b[0m:\u001b[93m290\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n\u001b[7m290\u001b[0m       ...(process.env.NODE_ENV === 'development' && {\n\u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~\u001b[0m\n\u001b[96msrc/utils/errors.ts\u001b[0m:\u001b[93m332\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2379: \u001b[0mArgument of type '{ timestamp: Date; error: string; correlationId: string; userId: string | undefined; }' is not assignable to parameter of type '{ timestamp: Date; error: string; correlationId: string; userId?: string; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'userId' are incompatible.\n    Type 'string | undefined' is not assignable to type 'string'.\n      Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m332\u001b[0m     this.recentErrors.unshift({\n\u001b[7m   \u001b[0m \u001b[91m                              ~\u001b[0m\n\u001b[7m333\u001b[0m       timestamp: new Date(),\n\u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[7m...\u001b[0m \n\u001b[7m336\u001b[0m       userId: context.userId\n\u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[7m337\u001b[0m     });\n\u001b[7m   \u001b[0m \u001b[91m~~~~~\u001b[0m\n\u001b[96msrc/utils/errors.ts\u001b[0m:\u001b[93m367\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2683: \u001b[0m'this' implicitly has type 'any' because it does not have a type annotation.\n\n\u001b[7m367\u001b[0m     recentErrors: typeof this.recentErrors;\n\u001b[7m   \u001b[0m \u001b[91m                         ~~~~\u001b[0m\n\n  \u001b[96msrc/utils/errors.ts\u001b[0m:\u001b[93m367\u001b[0m:\u001b[93m5\u001b[0m\n    \u001b[7m367\u001b[0m     recentErrors: typeof this.recentErrors;\n    \u001b[7m   \u001b[0m \u001b[96m    ~~~~~~~~~~~~\u001b[0m\n    An outer value of 'this' is shadowed by this container.\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/workflow-automation.service.ts\nERROR: \u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m208\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2375: \u001b[0mType '{ id: string; workflowDefinitionId: string; workflowName: string; version: string; triggeredBy: string; triggerType: TriggerType; triggerData: Record<string, any> | undefined; ... 12 more ...; updatedAt: Date; }' is not assignable to type 'WorkflowExecution' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'triggerData' are incompatible.\n    Type 'Record<string, any> | undefined' is not assignable to type 'Record<string, any>'.\n      Type 'undefined' is not assignable to type 'Record<string, any>'.\n\n\u001b[7m208\u001b[0m       const execution: WorkflowExecution = {\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m242\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2375: \u001b[0mType '{ executionId: string; status: WorkflowStatus; message: string; estimatedDuration: number; nextSteps: string[] | undefined; }' is not assignable to type 'WorkflowExecutionResponse' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'nextSteps' are incompatible.\n    Type 'string[] | undefined' is not assignable to type 'string[]'.\n      Type 'undefined' is not assignable to type 'string[]'.\n\n\u001b[7m242\u001b[0m       return {\n\u001b[7m   \u001b[0m \u001b[91m      ~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m321\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2412: \u001b[0mType 'undefined' is not assignable to type 'Date' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the type of the target.\n\n\u001b[7m321\u001b[0m       execution.endTime = undefined;\n\u001b[7m   \u001b[0m \u001b[91m      ~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m322\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2412: \u001b[0mType 'undefined' is not assignable to type 'number' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the type of the target.\n\n\u001b[7m322\u001b[0m       execution.duration = undefined;\n\u001b[7m   \u001b[0m \u001b[91m      ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m340\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2375: \u001b[0mType '{ executionId: string; status: WorkflowStatus.ACTIVE; message: string; nextSteps: string[] | undefined; }' is not assignable to type 'WorkflowExecutionResponse' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'nextSteps' are incompatible.\n    Type 'string[] | undefined' is not assignable to type 'string[]'.\n      Type 'undefined' is not assignable to type 'string[]'.\n\n\u001b[7m340\u001b[0m       return {\n\u001b[7m   \u001b[0m \u001b[91m      ~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m399\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2412: \u001b[0mType 'string | undefined' is not assignable to type 'string' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the type of the target.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m399\u001b[0m         execution.currentStep = currentStepId;\n\u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m400\u001b[0m:\u001b[93m39\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m400\u001b[0m         execution.completedSteps.push(currentStepId);\n\u001b[7m   \u001b[0m \u001b[91m                                      ~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m559\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'execution' is declared but its value is never read.\n\n\u001b[7m559\u001b[0m   private async executeApprovalGate(execution: WorkflowExecution, step: WorkflowStep): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                    ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m611\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'execution' is declared but its value is never read.\n\n\u001b[7m611\u001b[0m   private async executeApiCall(execution: WorkflowExecution, step: WorkflowStep): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m634\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'execution' is declared but its value is never read.\n\n\u001b[7m634\u001b[0m   private async executeDelay(execution: WorkflowExecution, step: WorkflowStep): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m649\u001b[0m:\u001b[93m39\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'execution' is declared but its value is never read.\n\n\u001b[7m649\u001b[0m   private async executeTaskAssignment(execution: WorkflowExecution, step: WorkflowStep): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                      ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m691\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'execution' is declared but its value is never read.\n\n\u001b[7m691\u001b[0m   private async executeCustomStep(execution: WorkflowExecution, step: WorkflowStep): Promise<void> {\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m919\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2375: \u001b[0mType '{ userId: string; userRoles: string[]; organizationId: string; teamId: string | undefined; caseId: string | undefined; clientId: string | undefined; matterId: string | undefined; documentIds: string[] | undefined; ... 4 more ...; customData: Record<...> | undefined; }' is not assignable to type 'ExecutionContext' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'teamId' are incompatible.\n    Type 'string | undefined' is not assignable to type 'string'.\n      Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m919\u001b[0m     return {\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m1039\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2532: \u001b[0mObject is possibly 'undefined'.\n\n\u001b[7m1039\u001b[0m       ? (sorted[middle - 1] + sorted[middle]) / 2\n\u001b[7m    \u001b[0m \u001b[91m         ~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m1039\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2532: \u001b[0mObject is possibly 'undefined'.\n\n\u001b[7m1039\u001b[0m       ? (sorted[middle - 1] + sorted[middle]) / 2\n\u001b[7m    \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/workflow-automation.service.ts\u001b[0m:\u001b[93m1040\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'number | undefined' is not assignable to type 'number'.\n  Type 'undefined' is not assignable to type 'number'.\n\n\u001b[7m1040\u001b[0m       : sorted[middle];\n\u001b[7m    \u001b[0m \u001b[91m        ~~~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/commands/client/create-client.handler.ts\nERROR: \u001b[96msrc/commands/client/create-client.handler.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2379: \u001b[0mArgument of type '{ name: string; email: string; clientType: string; phone: string | undefined; }' is not assignable to parameter of type '{ name: string; email: string; clientType: string; phone?: string; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.\n  Types of property 'phone' are incompatible.\n    Type 'string | undefined' is not assignable to type 'string'.\n      Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m25\u001b[0m     await this.validateClientData({ name, email, clientType, phone });\n\u001b[7m  \u001b[0m \u001b[91m                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/providers/legal-bert.provider.ts\nERROR: \u001b[96msrc/services/providers/legal-bert.provider.ts\u001b[0m:\u001b[93m90\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'document' is declared but its value is never read.\n\n\u001b[7m90\u001b[0m   private extractClauses(document: any): any {\n\u001b[7m  \u001b[0m \u001b[91m                         ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/providers/legal-bert.provider.ts\u001b[0m:\u001b[93m114\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'text' is declared but its value is never read.\n\n\u001b[7m114\u001b[0m   private recognizeEntities(text: any): any {\n\u001b[7m   \u001b[0m \u001b[91m                            ~~~~\u001b[0m\n\u001b[96msrc/services/providers/legal-bert.provider.ts\u001b[0m:\u001b[93m146\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'document' is declared but its value is never read.\n\n\u001b[7m146\u001b[0m   private checkNigerianCompliance(document: any): any {\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/providers/legal-bert.provider.ts\u001b[0m:\u001b[93m166\u001b[0m:\u001b[93m39\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'document' is declared but its value is never read.\n\n\u001b[7m166\u001b[0m   private checkSouthAfricanCompliance(document: any): any {\n\u001b[7m   \u001b[0m \u001b[91m                                      ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/providers/legal-bert.provider.ts\u001b[0m:\u001b[93m180\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'document' is declared but its value is never read.\n\n\u001b[7m180\u001b[0m   private checkUAECompliance(document: any): any {\n\u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/providers/legal-bert.provider.ts\u001b[0m:\u001b[93m194\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'document' is declared but its value is never read.\n\n\u001b[7m194\u001b[0m   private checkEgyptianCompliance(document: any): any {\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/providers/legal-bert.provider.ts\u001b[0m:\u001b[93m208\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'document' is declared but its value is never read.\n\n\u001b[7m208\u001b[0m   private checkGeneralCompliance(document: any): any {\n\u001b[7m   \u001b[0m \u001b[91m                                 ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/providers/legal-bert.provider.ts\u001b[0m:\u001b[93m216\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'input' is declared but its value is never read.\n\n\u001b[7m216\u001b[0m   private generalLegalAnalysis(input: any): any {\n\u001b[7m   \u001b[0m \u001b[91m                               ~~~~~\u001b[0m\n\u001b[96msrc/services/providers/legal-bert.provider.ts\u001b[0m:\u001b[93m253\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'contract' is declared but its value is never read.\n\n\u001b[7m253\u001b[0m   private identifyMissingClauses(contract: any): string[] {\n\u001b[7m   \u001b[0m \u001b[91m                                 ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/providers/legal-bert.provider.ts\u001b[0m:\u001b[93m277\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'contract' is declared but its value is never read.\n\n\u001b[7m277\u001b[0m   private generateRecommendations(contract: any): string[] {\n\u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/legal-research.service.ts\nERROR: \u001b[96msrc/services/legal-research.service.ts\u001b[0m:\u001b[93m339\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'query' is declared but its value is never read.\n\n\u001b[7m339\u001b[0m     query: string,\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~\u001b[0m\n\u001b[96msrc/services/legal-research.service.ts\u001b[0m:\u001b[93m341\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m341\u001b[0m     request: LegalResearchRequest\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~~\u001b[0m\n\u001b[96msrc/services/legal-research.service.ts\u001b[0m:\u001b[93m369\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m369\u001b[0m   private async findPrecedents(documents: LegalDocument[], request: LegalResearchRequest): Promise<Precedent[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~~~~\u001b[0m\n\u001b[96msrc/services/legal-research.service.ts\u001b[0m:\u001b[93m395\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'precedents' is declared but its value is never read.\n\n\u001b[7m395\u001b[0m     precedents: Precedent[],\n\u001b[7m   \u001b[0m \u001b[91m    ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/legal-research.service.ts\u001b[0m:\u001b[93m419\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'LegalJurisdiction | undefined' is not assignable to type 'LegalJurisdiction'.\n  Type 'undefined' is not assignable to type 'LegalJurisdiction'.\n\n\u001b[7m419\u001b[0m           jurisdiction: request.jurisdictions[0],\n\u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/legal-research.service.ts\u001b[0m:\u001b[93m422\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'import(\"/home/adel__ndawoke/Neo/apps/api/src/types/legal-research.types\").LegalArea | undefined' is not assignable to type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m422\u001b[0m           practiceArea: request.legalAreas[0],\n\u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/legal-research.service.ts\u001b[0m:\u001b[93m557\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m557\u001b[0m   private async generateSuggestions(request: LegalResearchRequest, documents: LegalDocument[]): Promise<any[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                    ~~~~~~~\u001b[0m\n\u001b[96msrc/services/legal-research.service.ts\u001b[0m:\u001b[93m557\u001b[0m:\u001b[93m68\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'documents' is declared but its value is never read.\n\n\u001b[7m557\u001b[0m   private async generateSuggestions(request: LegalResearchRequest, documents: LegalDocument[]): Promise<any[]> {\n\u001b[7m   \u001b[0m \u001b[91m                                                                   ~~~~~~~~~\u001b[0m\n\u001b[96msrc/services/legal-research.service.ts\u001b[0m:\u001b[93m580\u001b[0m:\u001b[93m51\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'format' is declared but its value is never read.\n\n\u001b[7m580\u001b[0m   private formatCitation(document: LegalDocument, format: any): string {\n\u001b[7m   \u001b[0m \u001b[91m                                                  ~~~~~~\u001b[0m\n\u001b[96msrc/services/legal-research.service.ts\u001b[0m:\u001b[93m585\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'format' is declared but its value is never read.\n\n\u001b[7m585\u001b[0m   private formatShortCitation(document: LegalDocument, format: any): string {\n\u001b[7m   \u001b[0m \u001b[91m                                                       ~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/services/legal-intelligence.service.ts\nERROR: \u001b[96msrc/services/legal-intelligence.service.ts\u001b[0m:\u001b[93m913\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'aiOutput' is declared but its value is never read.\n\n\u001b[7m913\u001b[0m   private parseTrendAnalysisResult(aiOutput: string, request: LegalIntelligenceRequest): TrendAnalysisResult[] {\n\u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~~~~\u001b[0m\n\u001b[96msrc/services/legal-intelligence.service.ts\u001b[0m:\u001b[93m1102\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m1102\u001b[0m   private async generateKeyInsights(request: LegalIntelligenceRequest, results: any): Promise<KeyInsight[]> {\n\u001b[7m    \u001b[0m \u001b[91m                                    ~~~~~~~\u001b[0m\n\u001b[96msrc/services/legal-intelligence.service.ts\u001b[0m:\u001b[93m1163\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m1163\u001b[0m     request: LegalIntelligenceRequest,\n\u001b[7m    \u001b[0m \u001b[91m    ~~~~~~~\u001b[0m\n\u001b[96msrc/services/legal-intelligence.service.ts\u001b[0m:\u001b[93m1209\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'request' is declared but its value is never read.\n\n\u001b[7m1209\u001b[0m     request: LegalIntelligenceRequest,\n\u001b[7m    \u001b[0m \u001b[91m    ~~~~~~~\u001b[0m\nSTACK: \nFailed to collect coverage from /home/adel__ndawoke/Neo/apps/api/src/routes/workflow-automation.routes.ts\nERROR: \u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m9\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2724: \u001b[0m'\"../middleware/validation.middleware\"' has no exported member named 'validateRequest'. Did you mean 'validateQuery'?\n\n\u001b[7m9\u001b[0m import { validateRequest } from '../middleware/validation.middleware';\n\u001b[7m \u001b[0m \u001b[91m         ~~~~~~~~~~~~~~~\u001b[0m\n\n  \u001b[96msrc/middleware/validation.middleware.ts\u001b[0m:\u001b[93m94\u001b[0m:\u001b[93m14\u001b[0m\n    \u001b[7m94\u001b[0m export const validateQuery = (schema: ZodSchema) => {\n    \u001b[7m  \u001b[0m \u001b[96m             ~~~~~~~~~~~~~\u001b[0m\n    'validateQuery' is declared here.\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m10\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../middleware/rate-limit.middleware' or its corresponding type declarations.\n\n\u001b[7m10\u001b[0m import { rateLimit } from '../middleware/rate-limit.middleware';\n\u001b[7m  \u001b[0m \u001b[91m                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m36\u001b[0m:\u001b[93m65\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 2, '(def: WorkflowPriority): ZodDefault<ZodOptional<ZodNativeEnum<typeof WorkflowPriority>>>', gave the following error.\n    Argument of type '\"MEDIUM\"' is not assignable to parameter of type 'WorkflowPriority'.\n  Overload 2 of 2, '(def: () => WorkflowPriority): ZodDefault<ZodOptional<ZodNativeEnum<typeof WorkflowPriority>>>', gave the following error.\n    Argument of type 'string' is not assignable to parameter of type '() => WorkflowPriority'.\n\n\u001b[7m36\u001b[0m     priority: z.nativeEnum(WorkflowPriority).optional().default('MEDIUM'),\n\u001b[7m  \u001b[0m \u001b[91m                                                                ~~~~~~~~\u001b[0m\n\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m37\u001b[0m:\u001b[93m69\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 2, '(def: WorkflowComplexity): ZodDefault<ZodOptional<ZodNativeEnum<typeof WorkflowComplexity>>>', gave the following error.\n    Argument of type '\"MODERATE\"' is not assignable to parameter of type 'WorkflowComplexity'.\n  Overload 2 of 2, '(def: () => WorkflowComplexity): ZodDefault<ZodOptional<ZodNativeEnum<typeof WorkflowComplexity>>>', gave the following error.\n    Argument of type 'string' is not assignable to parameter of type '() => WorkflowComplexity'.\n\n\u001b[7m37\u001b[0m     complexity: z.nativeEnum(WorkflowComplexity).optional().default('MODERATE'),\n\u001b[7m  \u001b[0m \u001b[91m                                                                    ~~~~~~~~~~\u001b[0m\n\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m111\u001b[0m:\u001b[93m63\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 2, '(def: TriggerType): ZodDefault<ZodOptional<ZodNativeEnum<typeof TriggerType>>>', gave the following error.\n    Argument of type '\"MANUAL_START\"' is not assignable to parameter of type 'TriggerType'.\n  Overload 2 of 2, '(def: () => TriggerType): ZodDefault<ZodOptional<ZodNativeEnum<typeof TriggerType>>>', gave the following error.\n    Argument of type 'string' is not assignable to parameter of type '() => TriggerType'.\n\n\u001b[7m111\u001b[0m     triggerType: z.nativeEnum(TriggerType).optional().default('MANUAL_START'),\n\u001b[7m   \u001b[0m \u001b[91m                                                              ~~~~~~~~~~~~~~\u001b[0m\n\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m112\u001b[0m:\u001b[93m65\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 2, '(def: WorkflowPriority): ZodDefault<ZodOptional<ZodNativeEnum<typeof WorkflowPriority>>>', gave the following error.\n    Argument of type '\"MEDIUM\"' is not assignable to parameter of type 'WorkflowPriority'.\n  Overload 2 of 2, '(def: () => WorkflowPriority): ZodDefault<ZodOptional<ZodNativeEnum<typeof WorkflowPriority>>>', gave the following error.\n    Argument of type 'string' is not assignable to parameter of type '() => WorkflowPriority'.\n\n\u001b[7m112\u001b[0m     priority: z.nativeEnum(WorkflowPriority).optional().default('MEDIUM'),\n\u001b[7m   \u001b[0m \u001b[91m                                                                ~~~~~~~~\u001b[0m\n\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m149\u001b[0m:\u001b[93m62\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 2, '(def: AnalyticsPeriod): ZodDefault<ZodOptional<ZodNativeEnum<typeof AnalyticsPeriod>>>', gave the following error.\n    Argument of type '\"LAST_30_DAYS\"' is not assignable to parameter of type 'AnalyticsPeriod'.\n  Overload 2 of 2, '(def: () => AnalyticsPeriod): ZodDefault<ZodOptional<ZodNativeEnum<typeof AnalyticsPeriod>>>', gave the following error.\n    Argument of type 'string' is not assignable to parameter of type '() => AnalyticsPeriod'.\n\n\u001b[7m149\u001b[0m     period: z.nativeEnum(AnalyticsPeriod).optional().default('LAST_30_DAYS'),\n\u001b[7m   \u001b[0m \u001b[91m                                                             ~~~~~~~~~~~~~~\u001b[0m\n\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m150\u001b[0m:\u001b[93m90\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 2, '(def: string): ZodDefault<ZodOptional<ZodEffects<ZodString, boolean, string>>>', gave the following error.\n    Argument of type 'boolean' is not assignable to parameter of type 'string'.\n  Overload 2 of 2, '(def: () => string): ZodDefault<ZodOptional<ZodEffects<ZodString, boolean, string>>>', gave the following error.\n    Argument of type 'boolean' is not assignable to parameter of type '() => string'.\n\n\u001b[7m150\u001b[0m     includeStepAnalytics: z.string().transform(val => val === 'true').optional().default(false),\n\u001b[7m   \u001b[0m \u001b[91m                                                                                         ~~~~~\u001b[0m\n\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m151\u001b[0m:\u001b[93m83\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2769: \u001b[0mNo overload matches this call.\n  Overload 1 of 2, '(def: string): ZodDefault<ZodOptional<ZodEffects<ZodString, boolean, string>>>', gave the following error.\n    Argument of type 'boolean' is not assignable to parameter of type 'string'.\n  Overload 2 of 2, '(def: () => string): ZodDefault<ZodOptional<ZodEffects<ZodString, boolean, string>>>', gave the following error.\n    Argument of type 'boolean' is not assignable to parameter of type '() => string'.\n\n\u001b[7m151\u001b[0m     includeTrends: z.string().transform(val => val === 'true').optional().default(false)\n\u001b[7m   \u001b[0m \u001b[91m                                                                                  ~~~~~\u001b[0m\n\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m225\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'organizationId' is declared but its value is never read.\n\n\u001b[7m225\u001b[0m       const organizationId = (req as any).user?.organizationId;\n\u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m259\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m259\u001b[0m   async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m262\u001b[0m:\u001b[93m58\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m262\u001b[0m       const workflow = await workflowService.getWorkflow(workflowId);\n\u001b[7m   \u001b[0m \u001b[91m                                                         ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m300\u001b[0m:\u001b[93m61\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m300\u001b[0m       const workflow = await workflowService.updateWorkflow(workflowId, body);\n\u001b[7m   \u001b[0m \u001b[91m                                                            ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m325\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m325\u001b[0m   async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m328\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m328\u001b[0m       const success = await workflowService.deleteWorkflow(workflowId);\n\u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m410\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m410\u001b[0m   async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m413\u001b[0m:\u001b[93m66\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m413\u001b[0m       const execution = await workflowService.getExecutionStatus(executionId);\n\u001b[7m   \u001b[0m \u001b[91m                                                                 ~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m444\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m444\u001b[0m   async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m447\u001b[0m:\u001b[93m61\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m447\u001b[0m       const success = await workflowService.cancelExecution(executionId);\n\u001b[7m   \u001b[0m \u001b[91m                                                            ~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m481\u001b[0m:\u001b[93m59\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m481\u001b[0m       const result = await workflowService.retryExecution(executionId);\n\u001b[7m   \u001b[0m \u001b[91m                                                          ~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m546\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7030: \u001b[0mNot all code paths return a value.\n\n\u001b[7m546\u001b[0m   async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m549\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'period' comes from an index signature, so it must be accessed with ['period'].\n\n\u001b[7m549\u001b[0m       const period = (req.query.period as AnalyticsPeriod) || AnalyticsPeriod.LAST_30_DAYS;\n\u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m552\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'string | undefined' is not assignable to type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n\n\u001b[7m552\u001b[0m         workflowIds: [workflowId],\n\u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m589\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m589\u001b[0m   async (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m         ~~~\u001b[0m\n\u001b[96msrc/routes/workflow-automation.routes.ts\u001b[0m:\u001b[93m616\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS6133: \u001b[0m'req' is declared but its value is never read.\n\n\u001b[7m616\u001b[0m router.get('/health', (req: Request, res: Response) => {\n\u001b[7m   \u001b[0m \u001b[91m                       ~~~\u001b[0m\nSTACK: \nJest: \"global\" coverage threshold for statements (85%) not met: 0%\nJest: \"global\" coverage threshold for branches (80%) not met: 0%\nJest: \"global\" coverage threshold for lines (85%) not met: 0%\nJest: \"global\" coverage threshold for functions (85%) not met: 0%\nJest: \"./src/core/\" coverage threshold for statements (95%) not met: 0%\nJest: \"./src/core/\" coverage threshold for branches (90%) not met: 0%\nJest: \"./src/core/\" coverage threshold for lines (95%) not met: 0%\nJest: \"./src/core/\" coverage threshold for functions (95%) not met: 0%\nJest: Coverage data for ./src/utils/circuit-breaker.ts was not found.\nTest Suites: 19 failed, 19 total\nTests:       0 total\nSnapshots:   0 total\nTime:        51.05 s\nRan all test suites matching /test\\/.*\\.test\\.(ts|js)$/i.\nnpm error Lifecycle script `test` failed with error:\nnpm error code 1\nnpm error path /home/adel__ndawoke/Neo/apps/api\nnpm error workspace @counselflow/api@1.0.0\nnpm error location /home/adel__ndawoke/Neo/apps/api\nnpm error command failed\nnpm error command sh -c jest '--testPathPattern=test/.*\\.test\\.(ts|js)$' --coverage\n",
      "duration": 0
    },
    {
      "name": "Web Unit Tests",
      "success": false,
      "error": "spawnSync /bin/sh ENOBUFS",
      "duration": 0
    },
    {
      "name": "Integration Tests",
      "success": false,
      "error": "Command failed: npm test -- --testPathPattern=\"integration\\.test\\.(ts|js)$\"\n● Validation Warning:\n\n  Unknown option \"moduleNameMapping\" with value {\"^@/(.*)$\": \"<rootDir>/src/$1\", \"^@commands/(.*)$\": \"<rootDir>/src/commands/$1\", \"^@config/(.*)$\": \"<rootDir>/src/config/$1\", \"^@core/(.*)$\": \"<rootDir>/src/core/$1\", \"^@middleware/(.*)$\": \"<rootDir>/src/middleware/$1\", \"^@utils/(.*)$\": \"<rootDir>/src/utils/$1\"} was found.\n  This is probably a typing mistake. Fixing it will remove this message.\n\n  Configuration Documentation:\n  https://jestjs.io/docs/configuration\n\n● Validation Warning:\n\n  Unknown option \"moduleNameMapping\" with value {\"^@/(.*)$\": \"<rootDir>/src/$1\", \"^@commands/(.*)$\": \"<rootDir>/src/commands/$1\", \"^@config/(.*)$\": \"<rootDir>/src/config/$1\", \"^@core/(.*)$\": \"<rootDir>/src/core/$1\", \"^@middleware/(.*)$\": \"<rootDir>/src/middleware/$1\", \"^@utils/(.*)$\": \"<rootDir>/src/utils/$1\"} was found.\n  This is probably a typing mistake. Fixing it will remove this message.\n\n  Configuration Documentation:\n  https://jestjs.io/docs/configuration\n\nFAIL src/test/integration.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/middleware.integration.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/database.integration.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nFAIL src/test/ai-routes.integration.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m6\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module 'dotenv' or its corresponding type declarations.\n\n    \u001b[7m6\u001b[0m import { config } from 'dotenv';\n    \u001b[7m \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'NODE_ENV' comes from an index signature, so it must be accessed with ['NODE_ENV'].\n\n    \u001b[7m13\u001b[0m process.env.NODE_ENV = 'test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m14\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_SECRET' comes from an index signature, so it must be accessed with ['JWT_SECRET'].\n\n    \u001b[7m14\u001b[0m process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_SECRET' comes from an index signature, so it must be accessed with ['JWT_REFRESH_SECRET'].\n\n    \u001b[7m15\u001b[0m process.env.JWT_REFRESH_SECRET = 'test-refresh-secret-key-for-testing-only';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_EXPIRES_IN'].\n\n    \u001b[7m16\u001b[0m process.env.JWT_EXPIRES_IN = '1h';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m17\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'JWT_REFRESH_EXPIRES_IN' comes from an index signature, so it must be accessed with ['JWT_REFRESH_EXPIRES_IN'].\n\n    \u001b[7m17\u001b[0m process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m18\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'BCRYPT_SALT_ROUNDS' comes from an index signature, so it must be accessed with ['BCRYPT_SALT_ROUNDS'].\n\n    \u001b[7m18\u001b[0m process.env.BCRYPT_SALT_ROUNDS = '10'; // Lower for faster tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DATABASE_URL' comes from an index signature, so it must be accessed with ['DATABASE_URL'].\n\n    \u001b[7m19\u001b[0m process.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/counselflow_test';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m20\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'APP_URL' comes from an index signature, so it must be accessed with ['APP_URL'].\n\n    \u001b[7m20\u001b[0m process.env.APP_URL = 'http://localhost:3000';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'ENABLE_REGISTRATION' comes from an index signature, so it must be accessed with ['ENABLE_REGISTRATION'].\n\n    \u001b[7m21\u001b[0m process.env.ENABLE_REGISTRATION = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'CIRCUIT_BREAKER_ENABLED' comes from an index signature, so it must be accessed with ['CIRCUIT_BREAKER_ENABLED'].\n\n    \u001b[7m24\u001b[0m process.env.CIRCUIT_BREAKER_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'POLICY_CACHE_ENABLED' comes from an index signature, so it must be accessed with ['POLICY_CACHE_ENABLED'].\n\n    \u001b[7m25\u001b[0m process.env.POLICY_CACHE_ENABLED = 'true';\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'COMMAND_BUS_AUDIT' comes from an index signature, so it must be accessed with ['COMMAND_BUS_AUDIT'].\n\n    \u001b[7m26\u001b[0m process.env.COMMAND_BUS_AUDIT = 'false'; // Disable audit logging in tests\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m34\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/setup.ts\u001b[0m:\u001b[93m55\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS4111: \u001b[0mProperty 'DEBUG_TESTS' comes from an index signature, so it must be accessed with ['DEBUG_TESTS'].\n\n    \u001b[7m55\u001b[0m   if (!process.env.DEBUG_TESTS) {\n    \u001b[7m  \u001b[0m \u001b[91m                   ~~~~~~~~~~~\u001b[0m\n\nTest Suites: 4 failed, 4 total\nTests:       0 total\nSnapshots:   0 total\nTime:        3.429 s\nRan all test suites matching /integration\\.test\\.(ts|js)$/i.\nnpm error Lifecycle script `test` failed with error:\nnpm error code 1\nnpm error path /home/adel__ndawoke/Neo/apps/api\nnpm error workspace @counselflow/api@1.0.0\nnpm error location /home/adel__ndawoke/Neo/apps/api\nnpm error command failed\nnpm error command sh -c jest '--testPathPattern=integration\\.test\\.(ts|js)$'\n",
      "duration": 0
    },
    {
      "name": "Security Audit",
      "success": false,
      "error": "Command failed: npm audit --audit-level moderate",
      "duration": 0
    },
    {
      "name": "API Build",
      "success": false,
      "error": "Command failed: npm run build\nnpm error Lifecycle script `build` failed with error:\nnpm error code 2\nnpm error path /home/adel__ndawoke/Neo/apps/api\nnpm error workspace @counselflow/api@1.0.0\nnpm error location /home/adel__ndawoke/Neo/apps/api\nnpm error command failed\nnpm error command sh -c tsc\n",
      "duration": 0
    },
    {
      "name": "Web Build",
      "success": false,
      "error": "Command failed: npm run build\n<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: Can't resolve 'swagger-ui-express' in '/home/adel__ndawoke/Neo'\n<w> while resolving 'swagger-ui-express' in /home/adel__ndawoke/Neo to a directory\n<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: Can't resolve 'swagger-ui-express' in '/home/adel__ndawoke/Neo'\n<w> while resolving 'swagger-ui-express' in /home/adel__ndawoke/Neo to a directory\nFailed to compile.\n\n./src/app/client-management/page.tsx:3:27\nType error: 'useEffect' is declared but its value is never read.\n\n\u001b[0m \u001b[90m 1 |\u001b[39m \u001b[32m'use client'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 2 |\u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m { useState\u001b[33m,\u001b[39m useEffect } \u001b[36mfrom\u001b[39m \u001b[32m'react'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m   |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mMainLayout\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../../components/layout/MainLayout'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mUsers\u001b[39m\u001b[33m,\u001b[39m \u001b[33mPlus\u001b[39m\u001b[33m,\u001b[39m \u001b[33mSearch\u001b[39m\u001b[33m,\u001b[39m \u001b[33mDownload\u001b[39m\u001b[33m,\u001b[39m \u001b[33mUpload\u001b[39m\u001b[33m,\u001b[39m \u001b[33mEdit3\u001b[39m\u001b[33m,\u001b[39m \u001b[33mTrash2\u001b[39m\u001b[33m,\u001b[39m \u001b[33mEye\u001b[39m\u001b[33m,\u001b[39m \u001b[33mCheckCircle\u001b[39m\u001b[33m,\u001b[39m \u001b[33mAlertTriangle\u001b[39m\u001b[33m,\u001b[39m \u001b[33mBarChart3\u001b[39m\u001b[33m,\u001b[39m \u001b[33mCalendar\u001b[39m\u001b[33m,\u001b[39m \u001b[33mFileText\u001b[39m\u001b[33m,\u001b[39m \u001b[33mBuilding2\u001b[39m\u001b[33m,\u001b[39m \u001b[33mTrendingUp\u001b[39m\u001b[33m,\u001b[39m \u001b[33mClock\u001b[39m\u001b[33m,\u001b[39m \u001b[33mLoader2\u001b[39m\u001b[33m,\u001b[39m \u001b[33mMail\u001b[39m\u001b[33m,\u001b[39m \u001b[33mPhone\u001b[39m\u001b[33m,\u001b[39m \u001b[33mMapPin\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'lucide-react'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { useClients\u001b[33m,\u001b[39m useCreateClient\u001b[33m,\u001b[39m useClientStats } \u001b[36mfrom\u001b[39m \u001b[32m'../../hooks/useApi'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\nnpm error Lifecycle script `build` failed with error:\nnpm error code 1\nnpm error path /home/adel__ndawoke/Neo/apps/web\nnpm error workspace @counselflow/web@1.0.0\nnpm error location /home/adel__ndawoke/Neo/apps/web\nnpm error command failed\nnpm error command sh -c next build\n",
      "duration": 0
    }
  ]
}